:doc:`S3Control <../../s3control>` / Client / put_storage_lens_configuration

******************************
put_storage_lens_configuration
******************************



.. py:method:: S3Control.Client.put_storage_lens_configuration(**kwargs)

  

  .. note::

    

    This operation is not supported by directory buckets.

    

   

  Puts an Amazon S3 Storage Lens configuration. For more information about S3 Storage Lens, see `Working with Amazon S3 Storage Lens <https://docs.aws.amazon.com/AmazonS3/latest/dev/storage_lens.html>`__ in the *Amazon S3 User Guide*. For a complete list of S3 Storage Lens metrics, see `S3 Storage Lens metrics glossary <https://docs.aws.amazon.com/AmazonS3/latest/userguide/storage_lens_metrics_glossary.html>`__ in the *Amazon S3 User Guide*.

   

  .. note::

    

    To use this action, you must have permission to perform the ``s3:PutStorageLensConfiguration`` action. For more information, see `Setting permissions to use Amazon S3 Storage Lens <https://docs.aws.amazon.com/AmazonS3/latest/dev/storage_lens_iam_permissions.html>`__ in the *Amazon S3 User Guide*.

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/s3control-2018-08-20/PutStorageLensConfiguration>`_  


  **Request Syntax**
  ::

    response = client.put_storage_lens_configuration(
        ConfigId='string',
        AccountId='string',
        StorageLensConfiguration={
            'Id': 'string',
            'AccountLevel': {
                'ActivityMetrics': {
                    'IsEnabled': True|False
                },
                'BucketLevel': {
                    'ActivityMetrics': {
                        'IsEnabled': True|False
                    },
                    'PrefixLevel': {
                        'StorageMetrics': {
                            'IsEnabled': True|False,
                            'SelectionCriteria': {
                                'Delimiter': 'string',
                                'MaxDepth': 123,
                                'MinStorageBytesPercentage': 123.0
                            }
                        }
                    },
                    'AdvancedCostOptimizationMetrics': {
                        'IsEnabled': True|False
                    },
                    'AdvancedDataProtectionMetrics': {
                        'IsEnabled': True|False
                    },
                    'DetailedStatusCodesMetrics': {
                        'IsEnabled': True|False
                    },
                    'AdvancedPerformanceMetrics': {
                        'IsEnabled': True|False
                    }
                },
                'AdvancedCostOptimizationMetrics': {
                    'IsEnabled': True|False
                },
                'AdvancedDataProtectionMetrics': {
                    'IsEnabled': True|False
                },
                'DetailedStatusCodesMetrics': {
                    'IsEnabled': True|False
                },
                'AdvancedPerformanceMetrics': {
                    'IsEnabled': True|False
                },
                'StorageLensGroupLevel': {
                    'SelectionCriteria': {
                        'Include': [
                            'string',
                        ],
                        'Exclude': [
                            'string',
                        ]
                    }
                }
            },
            'Include': {
                'Buckets': [
                    'string',
                ],
                'Regions': [
                    'string',
                ]
            },
            'Exclude': {
                'Buckets': [
                    'string',
                ],
                'Regions': [
                    'string',
                ]
            },
            'DataExport': {
                'S3BucketDestination': {
                    'Format': 'CSV'|'Parquet',
                    'OutputSchemaVersion': 'V_1',
                    'AccountId': 'string',
                    'Arn': 'string',
                    'Prefix': 'string',
                    'Encryption': {
                        'SSES3': {}
                        ,
                        'SSEKMS': {
                            'KeyId': 'string'
                        }
                    }
                },
                'CloudWatchMetrics': {
                    'IsEnabled': True|False
                },
                'StorageLensTableDestination': {
                    'IsEnabled': True|False,
                    'Encryption': {
                        'SSES3': {}
                        ,
                        'SSEKMS': {
                            'KeyId': 'string'
                        }
                    }
                }
            },
            'ExpandedPrefixesDataExport': {
                'S3BucketDestination': {
                    'Format': 'CSV'|'Parquet',
                    'OutputSchemaVersion': 'V_1',
                    'AccountId': 'string',
                    'Arn': 'string',
                    'Prefix': 'string',
                    'Encryption': {
                        'SSES3': {}
                        ,
                        'SSEKMS': {
                            'KeyId': 'string'
                        }
                    }
                },
                'StorageLensTableDestination': {
                    'IsEnabled': True|False,
                    'Encryption': {
                        'SSES3': {}
                        ,
                        'SSEKMS': {
                            'KeyId': 'string'
                        }
                    }
                }
            },
            'IsEnabled': True|False,
            'AwsOrg': {
                'Arn': 'string'
            },
            'StorageLensArn': 'string',
            'PrefixDelimiter': 'string'
        },
        Tags=[
            {
                'Key': 'string',
                'Value': 'string'
            },
        ]
    )
    
  :type ConfigId: string
  :param ConfigId: **[REQUIRED]** 

    The ID of the S3 Storage Lens configuration.

    

  
  :type AccountId: string
  :param AccountId: **[REQUIRED]** 

    The account ID of the requester.

    

  
  :type StorageLensConfiguration: dict
  :param StorageLensConfiguration: **[REQUIRED]** 

    The S3 Storage Lens configuration.

    

  
    - **Id** *(string) --* **[REQUIRED]** 

      A container for the Amazon S3 Storage Lens configuration ID.

      

    
    - **AccountLevel** *(dict) --* **[REQUIRED]** 

      A container for all the account-level configurations of your S3 Storage Lens configuration.

      

    
      - **ActivityMetrics** *(dict) --* 

        A container element for S3 Storage Lens activity metrics.

        

      
        - **IsEnabled** *(boolean) --* 

          A container that indicates whether activity metrics are enabled.

          

        
      
      - **BucketLevel** *(dict) --* **[REQUIRED]** 

        A container element for the S3 Storage Lens bucket-level configuration.

        

      
        - **ActivityMetrics** *(dict) --* 

          A container for the bucket-level activity metrics for S3 Storage Lens.

          

        
          - **IsEnabled** *(boolean) --* 

            A container that indicates whether activity metrics are enabled.

            

          
        
        - **PrefixLevel** *(dict) --* 

          A container for the prefix-level metrics for S3 Storage Lens.

          

        
          - **StorageMetrics** *(dict) --* **[REQUIRED]** 

            A container for the prefix-level storage metrics for S3 Storage Lens.

            

          
            - **IsEnabled** *(boolean) --* 

              A container for whether prefix-level storage metrics are enabled.

              

            
            - **SelectionCriteria** *(dict) --* 

            
              - **Delimiter** *(string) --* 

                A container for the delimiter of the selection criteria being used.

                

              
              - **MaxDepth** *(integer) --* 

                The max depth of the selection criteria

                

              
              - **MinStorageBytesPercentage** *(float) --* 

                The minimum number of storage bytes percentage whose metrics will be selected.

                 

                .. note::

                  

                  You must choose a value greater than or equal to ``1.0``.

                  

                

              
            
          
        
        - **AdvancedCostOptimizationMetrics** *(dict) --* 

          A container for bucket-level advanced cost-optimization metrics for S3 Storage Lens.

          

        
          - **IsEnabled** *(boolean) --* 

            A container that indicates whether advanced cost-optimization metrics are enabled.

            

          
        
        - **AdvancedDataProtectionMetrics** *(dict) --* 

          A container for bucket-level advanced data-protection metrics for S3 Storage Lens.

          

        
          - **IsEnabled** *(boolean) --* 

            A container that indicates whether advanced data-protection metrics are enabled.

            

          
        
        - **DetailedStatusCodesMetrics** *(dict) --* 

          A container for bucket-level detailed status code metrics for S3 Storage Lens.

          

        
          - **IsEnabled** *(boolean) --* 

            A container that indicates whether detailed status code metrics are enabled.

            

          
        
        - **AdvancedPerformanceMetrics** *(dict) --* 

          A container for bucket-level advanced performance metrics for S3 Storage Lens.

          

        
          - **IsEnabled** *(boolean) --* 

            A container that indicates whether S3 Storage Lens advanced performance metrics are enabled.

            

          
        
      
      - **AdvancedCostOptimizationMetrics** *(dict) --* 

        A container element for S3 Storage Lens advanced cost-optimization metrics.

        

      
        - **IsEnabled** *(boolean) --* 

          A container that indicates whether advanced cost-optimization metrics are enabled.

          

        
      
      - **AdvancedDataProtectionMetrics** *(dict) --* 

        A container element for S3 Storage Lens advanced data-protection metrics.

        

      
        - **IsEnabled** *(boolean) --* 

          A container that indicates whether advanced data-protection metrics are enabled.

          

        
      
      - **DetailedStatusCodesMetrics** *(dict) --* 

        A container element for detailed status code metrics.

        

      
        - **IsEnabled** *(boolean) --* 

          A container that indicates whether detailed status code metrics are enabled.

          

        
      
      - **AdvancedPerformanceMetrics** *(dict) --* 

        A container element for S3 Storage Lens advanced performance metrics.

        

      
        - **IsEnabled** *(boolean) --* 

          A container that indicates whether S3 Storage Lens advanced performance metrics are enabled.

          

        
      
      - **StorageLensGroupLevel** *(dict) --* 

        A container element for S3 Storage Lens groups metrics.

        

      
        - **SelectionCriteria** *(dict) --* 

          Indicates which Storage Lens group ARNs to include or exclude in the Storage Lens group aggregation. If this value is left null, then all Storage Lens groups are selected.

          

        
          - **Include** *(list) --* 

            Indicates which Storage Lens group ARNs to include in the Storage Lens group aggregation.

            

          
            - *(string) --* 

            
        
          - **Exclude** *(list) --* 

            Indicates which Storage Lens group ARNs to exclude from the Storage Lens group aggregation.

            

          
            - *(string) --* 

            
        
        
      
    
    - **Include** *(dict) --* 

      A container for what is included in this configuration. This container can only be valid if there is no ``Exclude`` container submitted, and it's not empty.

      

    
      - **Buckets** *(list) --* 

        A container for the S3 Storage Lens bucket includes.

        

      
        - *(string) --* 

        
    
      - **Regions** *(list) --* 

        A container for the S3 Storage Lens Region includes.

        

      
        - *(string) --* 

        
    
    
    - **Exclude** *(dict) --* 

      A container for what is excluded in this configuration. This container can only be valid if there is no ``Include`` container submitted, and it's not empty.

      

    
      - **Buckets** *(list) --* 

        A container for the S3 Storage Lens bucket excludes.

        

      
        - *(string) --* 

        
    
      - **Regions** *(list) --* 

        A container for the S3 Storage Lens Region excludes.

        

      
        - *(string) --* 

        
    
    
    - **DataExport** *(dict) --* 

      A container to specify the properties of your S3 Storage Lens metrics export including, the destination, schema and format.

      

    
      - **S3BucketDestination** *(dict) --* 

        A container for the bucket where the S3 Storage Lens metrics export will be located.

         

        .. note::

          

          This bucket must be located in the same Region as the storage lens configuration.

          

        

      
        - **Format** *(string) --* **[REQUIRED]** 

        
        - **OutputSchemaVersion** *(string) --* **[REQUIRED]** 

          The schema version of the export file.

          

        
        - **AccountId** *(string) --* **[REQUIRED]** 

          The account ID of the owner of the S3 Storage Lens metrics export bucket.

          

        
        - **Arn** *(string) --* **[REQUIRED]** 

          The Amazon Resource Name (ARN) of the bucket. This property is read-only and follows the following format: ``arn:aws:s3:us-east-1:example-account-id:bucket/your-destination-bucket-name``

          

        
        - **Prefix** *(string) --* 

          The prefix of the destination bucket where the metrics export will be delivered.

          

        
        - **Encryption** *(dict) --* 

          The container for the type encryption of the metrics exports in this bucket.

          

        
          - **SSES3** *(dict) --* 

          
          
          - **SSEKMS** *(dict) --* 

          
            - **KeyId** *(string) --* **[REQUIRED]** 

              A container for the ARN of the SSE-KMS encryption. This property is read-only and follows the following format: ``arn:aws:kms:us-east-1:example-account-id:key/example-9a73-4afc-8d29-8f5900cef44e``

              

            
          
        
      
      - **CloudWatchMetrics** *(dict) --* 

        A container for enabling Amazon CloudWatch publishing for S3 Storage Lens metrics.

        

      
        - **IsEnabled** *(boolean) --* **[REQUIRED]** 

          A container that indicates whether CloudWatch publishing for S3 Storage Lens metrics is enabled. A value of ``true`` indicates that CloudWatch publishing for S3 Storage Lens metrics is enabled.

          

        
      
      - **StorageLensTableDestination** *(dict) --* 

        A container for configuring S3 Storage Lens data exports to read-only S3 table buckets.

        

      
        - **IsEnabled** *(boolean) --* **[REQUIRED]** 

          A container that indicates whether the export to read-only S3 table buckets is enabled for your S3 Storage Lens configuration. When set to true, Storage Lens reports are automatically exported to tables in addition to other configured destinations.

          

        
        - **Encryption** *(dict) --* 

          A container for the encryption of the S3 Storage Lens metrics exports.

          

        
          - **SSES3** *(dict) --* 

          
          
          - **SSEKMS** *(dict) --* 

          
            - **KeyId** *(string) --* **[REQUIRED]** 

              A container for the ARN of the SSE-KMS encryption. This property is read-only and follows the following format: ``arn:aws:kms:us-east-1:example-account-id:key/example-9a73-4afc-8d29-8f5900cef44e``

              

            
          
        
      
    
    - **ExpandedPrefixesDataExport** *(dict) --* 

      A container that configures your S3 Storage Lens expanded prefixes metrics report.

      

    
      - **S3BucketDestination** *(dict) --* 

        A container for the bucket where the Amazon S3 Storage Lens metrics export files are located.

        

      
        - **Format** *(string) --* **[REQUIRED]** 

        
        - **OutputSchemaVersion** *(string) --* **[REQUIRED]** 

          The schema version of the export file.

          

        
        - **AccountId** *(string) --* **[REQUIRED]** 

          The account ID of the owner of the S3 Storage Lens metrics export bucket.

          

        
        - **Arn** *(string) --* **[REQUIRED]** 

          The Amazon Resource Name (ARN) of the bucket. This property is read-only and follows the following format: ``arn:aws:s3:us-east-1:example-account-id:bucket/your-destination-bucket-name``

          

        
        - **Prefix** *(string) --* 

          The prefix of the destination bucket where the metrics export will be delivered.

          

        
        - **Encryption** *(dict) --* 

          The container for the type encryption of the metrics exports in this bucket.

          

        
          - **SSES3** *(dict) --* 

          
          
          - **SSEKMS** *(dict) --* 

          
            - **KeyId** *(string) --* **[REQUIRED]** 

              A container for the ARN of the SSE-KMS encryption. This property is read-only and follows the following format: ``arn:aws:kms:us-east-1:example-account-id:key/example-9a73-4afc-8d29-8f5900cef44e``

              

            
          
        
      
      - **StorageLensTableDestination** *(dict) --* 

        A container for the bucket where the S3 Storage Lens metric export files are located. At least one export destination must be specified.

        

      
        - **IsEnabled** *(boolean) --* **[REQUIRED]** 

          A container that indicates whether the export to read-only S3 table buckets is enabled for your S3 Storage Lens configuration. When set to true, Storage Lens reports are automatically exported to tables in addition to other configured destinations.

          

        
        - **Encryption** *(dict) --* 

          A container for the encryption of the S3 Storage Lens metrics exports.

          

        
          - **SSES3** *(dict) --* 

          
          
          - **SSEKMS** *(dict) --* 

          
            - **KeyId** *(string) --* **[REQUIRED]** 

              A container for the ARN of the SSE-KMS encryption. This property is read-only and follows the following format: ``arn:aws:kms:us-east-1:example-account-id:key/example-9a73-4afc-8d29-8f5900cef44e``

              

            
          
        
      
    
    - **IsEnabled** *(boolean) --* **[REQUIRED]** 

      A container for whether the S3 Storage Lens configuration is enabled.

      

    
    - **AwsOrg** *(dict) --* 

      A container for the Amazon Web Services organization for this S3 Storage Lens configuration.

      

    
      - **Arn** *(string) --* **[REQUIRED]** 

        A container for the Amazon Resource Name (ARN) of the Amazon Web Services organization. This property is read-only and follows the following format: ``arn:aws:organizations:us-east-1:example-account-id:organization/o-ex2l495dck``

        

      
    
    - **StorageLensArn** *(string) --* 

      The Amazon Resource Name (ARN) of the S3 Storage Lens configuration. This property is read-only and follows the following format: ``arn:aws:s3:us-east-1:example-account-id:storage-lens/your-dashboard-name``

      

    
    - **PrefixDelimiter** *(string) --* 

      A container for all prefix delimiters that are used for object keys in this S3 Storage Lens configuration. The prefix delimiters determine how S3 Storage Lens counts prefix depth, by separating the hierarchical levels in object keys.

       

      .. note::

        

        
        * If either a prefix delimiter or existing delimiter is undefined, Amazon S3 uses the delimiter thatâ€™s defined.
         
        * If both the prefix delimiter and existing delimiter are undefined, S3 uses ``/`` as the default delimiter.
         
        * When custom delimiters are used, both the prefix delimiter and existing delimiter must specify the same special character. Otherwise, your request results in an error.
        

        

      

    
  
  :type Tags: list
  :param Tags: 

    The tag set of the S3 Storage Lens configuration.

     

    .. note::

      

      You can set up to a maximum of 50 tags.

      

    

  
    - *(dict) --* 

    
      - **Key** *(string) --* **[REQUIRED]** 

      
      - **Value** *(string) --* **[REQUIRED]** 

      
    

  
  :returns: None