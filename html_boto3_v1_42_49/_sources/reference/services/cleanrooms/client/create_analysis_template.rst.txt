:doc:`CleanRoomsService <../../cleanrooms>` / Client / create_analysis_template

************************
create_analysis_template
************************



.. py:method:: CleanRoomsService.Client.create_analysis_template(**kwargs)

  

  Creates a new analysis template.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/cleanrooms-2022-02-17/CreateAnalysisTemplate>`_  


  **Request Syntax**
  ::

    response = client.create_analysis_template(
        description='string',
        membershipIdentifier='string',
        name='string',
        format='SQL'|'PYSPARK_1_0',
        source={
            'text': 'string',
            'artifacts': {
                'entryPoint': {
                    'location': {
                        'bucket': 'string',
                        'key': 'string'
                    }
                },
                'additionalArtifacts': [
                    {
                        'location': {
                            'bucket': 'string',
                            'key': 'string'
                        }
                    },
                ],
                'roleArn': 'string'
            }
        },
        tags={
            'string': 'string'
        },
        analysisParameters=[
            {
                'name': 'string',
                'type': 'SMALLINT'|'INTEGER'|'BIGINT'|'DECIMAL'|'REAL'|'DOUBLE_PRECISION'|'BOOLEAN'|'CHAR'|'VARCHAR'|'DATE'|'TIMESTAMP'|'TIMESTAMPTZ'|'TIME'|'TIMETZ'|'VARBYTE'|'BINARY'|'BYTE'|'CHARACTER'|'DOUBLE'|'FLOAT'|'INT'|'LONG'|'NUMERIC'|'SHORT'|'STRING'|'TIMESTAMP_LTZ'|'TIMESTAMP_NTZ'|'TINYINT',
                'defaultValue': 'string'
            },
        ],
        schema={
            'referencedTables': [
                'string',
            ]
        },
        errorMessageConfiguration={
            'type': 'DETAILED'
        },
        syntheticDataParameters={
            'mlSyntheticDataParameters': {
                'epsilon': 123.0,
                'maxMembershipInferenceAttackScore': 123.0,
                'columnClassification': {
                    'columnMapping': [
                        {
                            'columnName': 'string',
                            'columnType': 'CATEGORICAL'|'NUMERICAL',
                            'isPredictiveValue': True|False
                        },
                    ]
                }
            }
        }
    )
    
  :type description: string
  :param description: 

    The description of the analysis template.

    

  
  :type membershipIdentifier: string
  :param membershipIdentifier: **[REQUIRED]** 

    The identifier for a membership resource.

    

  
  :type name: string
  :param name: **[REQUIRED]** 

    The name of the analysis template.

    

  
  :type format: string
  :param format: **[REQUIRED]** 

    The format of the analysis template.

    

  
  :type source: dict
  :param source: **[REQUIRED]** 

    The information in the analysis template.

    .. note::    This is a Tagged Union structure. Only one of the     following top level keys can be set: ``text``, ``artifacts``. 

  
    - **text** *(string) --* 

      The query text.

      

    
    - **artifacts** *(dict) --* 

      The artifacts of the analysis source.

      

    
      - **entryPoint** *(dict) --* **[REQUIRED]** 

        The entry point for the analysis template artifacts.

        

      
        - **location** *(dict) --* **[REQUIRED]** 

          The artifact location.

          

        
          - **bucket** *(string) --* **[REQUIRED]** 

            The bucket name.

            

          
          - **key** *(string) --* **[REQUIRED]** 

            The object key.

            

          
        
      
      - **additionalArtifacts** *(list) --* 

        Additional artifacts for the analysis template.

        

      
        - *(dict) --* 

          The analysis template artifact.

          

        
          - **location** *(dict) --* **[REQUIRED]** 

            The artifact location.

            

          
            - **bucket** *(string) --* **[REQUIRED]** 

              The bucket name.

              

            
            - **key** *(string) --* **[REQUIRED]** 

              The object key.

              

            
          
        
    
      - **roleArn** *(string) --* **[REQUIRED]** 

        The role ARN for the analysis template artifacts.

        

      
    
  
  :type tags: dict
  :param tags: 

    An optional label that you can assign to a resource when you create it. Each tag consists of a key and an optional value, both of which you define. When you use tagging, you can also use tag-based access control in IAM policies to control access to this resource.

    

  
    - *(string) --* 

    
      - *(string) --* 

      


  :type analysisParameters: list
  :param analysisParameters: 

    The parameters of the analysis template.

    

  
    - *(dict) --* 

      Optional. The member who can query can provide this placeholder for a literal data value in an analysis template.

      

    
      - **name** *(string) --* **[REQUIRED]** 

        The name of the parameter. The name must use only alphanumeric or underscore (_) characters.

        

      
      - **type** *(string) --* **[REQUIRED]** 

        The type of parameter.

        

      
      - **defaultValue** *(string) --* 

        Optional. The default value that is applied in the analysis template. The member who can query can override this value in the query editor.

        

      
    

  :type schema: dict
  :param schema: 

    A relation within an analysis.

    

  
    - **referencedTables** *(list) --* 

      The tables referenced in the analysis schema.

      

    
      - *(string) --* 

      
  
  
  :type errorMessageConfiguration: dict
  :param errorMessageConfiguration: 

    The configuration that specifies the level of detail in error messages returned by analyses using this template. When set to ``DETAILED``, error messages include more information to help troubleshoot issues with PySpark jobs. Detailed error messages may expose underlying data, including sensitive information. Recommended for faster troubleshooting in development and testing environments.

    

  
    - **type** *(string) --* **[REQUIRED]** 

      The level of detail for error messages returned by the PySpark job. When set to DETAILED, error messages include more information to help troubleshoot issues with your PySpark job.

       

      Because this setting may expose sensitive data, it is recommended for development and testing environments.

      

    
  
  :type syntheticDataParameters: dict
  :param syntheticDataParameters: 

    The parameters for generating synthetic data when running the analysis template.

    .. note::    This is a Tagged Union structure. Only one of the     following top level keys can be set: ``mlSyntheticDataParameters``. 

  
    - **mlSyntheticDataParameters** *(dict) --* 

      The machine learning-specific parameters for synthetic data generation.

      

    
      - **epsilon** *(float) --* **[REQUIRED]** 

        The epsilon value for differential privacy when generating synthetic data. Lower values provide stronger privacy guarantees but may reduce data utility.

        

      
      - **maxMembershipInferenceAttackScore** *(float) --* **[REQUIRED]** 

        The maximum acceptable score for membership inference attack vulnerability. Synthetic data generation fails if the score for the resulting data exceeds this threshold.

        

      
      - **columnClassification** *(dict) --* **[REQUIRED]** 

        Classification details for data columns that specify how each column should be treated during synthetic data generation.

        

      
        - **columnMapping** *(list) --* **[REQUIRED]** 

          A mapping that defines the classification of data columns for synthetic data generation and specifies how each column should be handled during the privacy-preserving data synthesis process.

          

        
          - *(dict) --* 

            Properties that define how a specific data column should be handled during synthetic data generation, including its name, type, and role in predictive modeling.

            

          
            - **columnName** *(string) --* **[REQUIRED]** 

              The name of the data column as it appears in the dataset.

              

            
            - **columnType** *(string) --* **[REQUIRED]** 

              The data type of the column, which determines how the synthetic data generation algorithm processes and synthesizes values for this column.

              

            
            - **isPredictiveValue** *(boolean) --* **[REQUIRED]** 

              Indicates if this column contains predictive values that should be treated as target variables in machine learning models. This affects how the synthetic data generation preserves statistical relationships.

              

            
          
      
      
    
  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'analysisTemplate': {
              'id': 'string',
              'arn': 'string',
              'collaborationId': 'string',
              'collaborationArn': 'string',
              'membershipId': 'string',
              'membershipArn': 'string',
              'description': 'string',
              'name': 'string',
              'createTime': datetime(2015, 1, 1),
              'updateTime': datetime(2015, 1, 1),
              'schema': {
                  'referencedTables': [
                      'string',
                  ]
              },
              'format': 'SQL'|'PYSPARK_1_0',
              'source': {
                  'text': 'string',
                  'artifacts': {
                      'entryPoint': {
                          'location': {
                              'bucket': 'string',
                              'key': 'string'
                          }
                      },
                      'additionalArtifacts': [
                          {
                              'location': {
                                  'bucket': 'string',
                                  'key': 'string'
                              }
                          },
                      ],
                      'roleArn': 'string'
                  }
              },
              'sourceMetadata': {
                  'artifacts': {
                      'entryPointHash': {
                          'sha256': 'string'
                      },
                      'additionalArtifactHashes': [
                          {
                              'sha256': 'string'
                          },
                      ]
                  }
              },
              'analysisParameters': [
                  {
                      'name': 'string',
                      'type': 'SMALLINT'|'INTEGER'|'BIGINT'|'DECIMAL'|'REAL'|'DOUBLE_PRECISION'|'BOOLEAN'|'CHAR'|'VARCHAR'|'DATE'|'TIMESTAMP'|'TIMESTAMPTZ'|'TIME'|'TIMETZ'|'VARBYTE'|'BINARY'|'BYTE'|'CHARACTER'|'DOUBLE'|'FLOAT'|'INT'|'LONG'|'NUMERIC'|'SHORT'|'STRING'|'TIMESTAMP_LTZ'|'TIMESTAMP_NTZ'|'TINYINT',
                      'defaultValue': 'string'
                  },
              ],
              'validations': [
                  {
                      'type': 'DIFFERENTIAL_PRIVACY',
                      'status': 'VALID'|'INVALID'|'UNABLE_TO_VALIDATE',
                      'reasons': [
                          {
                              'message': 'string'
                          },
                      ]
                  },
              ],
              'errorMessageConfiguration': {
                  'type': 'DETAILED'
              },
              'syntheticDataParameters': {
                  'mlSyntheticDataParameters': {
                      'epsilon': 123.0,
                      'maxMembershipInferenceAttackScore': 123.0,
                      'columnClassification': {
                          'columnMapping': [
                              {
                                  'columnName': 'string',
                                  'columnType': 'CATEGORICAL'|'NUMERICAL',
                                  'isPredictiveValue': True|False
                              },
                          ]
                      }
                  }
              }
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **analysisTemplate** *(dict) --* 

        The analysis template.

        
        

        - **id** *(string) --* 

          The identifier for the analysis template.

          
        

        - **arn** *(string) --* 

          The Amazon Resource Name (ARN) of the analysis template.

          
        

        - **collaborationId** *(string) --* 

          The unique ID for the associated collaboration of the analysis template.

          
        

        - **collaborationArn** *(string) --* 

          The unique ARN for the analysis templateâ€™s associated collaboration.

          
        

        - **membershipId** *(string) --* 

          The identifier of a member who created the analysis template.

          
        

        - **membershipArn** *(string) --* 

          The Amazon Resource Name (ARN) of the member who created the analysis template.

          
        

        - **description** *(string) --* 

          The description of the analysis template.

          
        

        - **name** *(string) --* 

          The name of the analysis template.

          
        

        - **createTime** *(datetime) --* 

          The time that the analysis template was created.

          
        

        - **updateTime** *(datetime) --* 

          The time that the analysis template was last updated.

          
        

        - **schema** *(dict) --* 

          The entire schema object.

          
          

          - **referencedTables** *(list) --* 

            The tables referenced in the analysis schema.

            
            

            - *(string) --* 
        
      
        

        - **format** *(string) --* 

          The format of the analysis template.

          
        

        - **source** *(dict) --* 

          The source of the analysis template.

          .. note::    This is a Tagged Union structure. Only one of the     following top level keys will be set: ``text``, ``artifacts``.     If a client receives an unknown member it will     set ``SDK_UNKNOWN_MEMBER`` as the top level key,     which maps to the name or tag of the unknown     member. The structure of ``SDK_UNKNOWN_MEMBER`` is     as follows::

                    'SDK_UNKNOWN_MEMBER': {'name': 'UnknownMemberName'}


        
          

          - **text** *(string) --* 

            The query text.

            
          

          - **artifacts** *(dict) --* 

            The artifacts of the analysis source.

            
            

            - **entryPoint** *(dict) --* 

              The entry point for the analysis template artifacts.

              
              

              - **location** *(dict) --* 

                The artifact location.

                
                

                - **bucket** *(string) --* 

                  The bucket name.

                  
                

                - **key** *(string) --* 

                  The object key.

                  
            
          
            

            - **additionalArtifacts** *(list) --* 

              Additional artifacts for the analysis template.

              
              

              - *(dict) --* 

                The analysis template artifact.

                
                

                - **location** *(dict) --* 

                  The artifact location.

                  
                  

                  - **bucket** *(string) --* 

                    The bucket name.

                    
                  

                  - **key** *(string) --* 

                    The object key.

                    
              
            
          
            

            - **roleArn** *(string) --* 

              The role ARN for the analysis template artifacts.

              
        
      
        

        - **sourceMetadata** *(dict) --* 

          The source metadata for the analysis template.

          .. note::    This is a Tagged Union structure. Only one of the     following top level keys will be set: ``artifacts``.     If a client receives an unknown member it will     set ``SDK_UNKNOWN_MEMBER`` as the top level key,     which maps to the name or tag of the unknown     member. The structure of ``SDK_UNKNOWN_MEMBER`` is     as follows::

                    'SDK_UNKNOWN_MEMBER': {'name': 'UnknownMemberName'}


        
          

          - **artifacts** *(dict) --* 

            The artifacts of the analysis source metadata.

            
            

            - **entryPointHash** *(dict) --* 

              The hash of the entry point for the analysis template artifact metadata.

              
              

              - **sha256** *(string) --* 

                The SHA-256 hash value.

                
          
            

            - **additionalArtifactHashes** *(list) --* 

              Additional artifact hashes for the analysis template.

              
              

              - *(dict) --* 

                Hash

                
                

                - **sha256** *(string) --* 

                  The SHA-256 hash value.

                  
            
          
        
      
        

        - **analysisParameters** *(list) --* 

          The parameters of the analysis template.

          
          

          - *(dict) --* 

            Optional. The member who can query can provide this placeholder for a literal data value in an analysis template.

            
            

            - **name** *(string) --* 

              The name of the parameter. The name must use only alphanumeric or underscore (_) characters.

              
            

            - **type** *(string) --* 

              The type of parameter.

              
            

            - **defaultValue** *(string) --* 

              Optional. The default value that is applied in the analysis template. The member who can query can override this value in the query editor.

              
        
      
        

        - **validations** *(list) --* 

          Information about the validations performed on the analysis template.

          
          

          - *(dict) --* 

            The status details of the analysis template validation. Clean Rooms Differential Privacy uses a general-purpose query structure to support complex SQL queries and validates whether an analysis template fits that general-purpose query structure. Validation is performed when analysis templates are created and fetched. Because analysis templates are immutable by design, we recommend that you create analysis templates after you associate the configured tables with their analysis rule to your collaboration.

             

            For more information, see `https\://docs.aws.amazon.com/clean-rooms/latest/userguide/analysis-rules-custom.html#custom-diff-privacy <https://docs.aws.amazon.com/clean-rooms/latest/userguide/analysis-rules-custom.html#custom-diff-privacy>`__.

            
            

            - **type** *(string) --* 

              The type of validation that was performed.

              
            

            - **status** *(string) --* 

              The status of the validation.

              
            

            - **reasons** *(list) --* 

              The reasons for the validation results.

              
              

              - *(dict) --* 

                The reasons for the validation results.

                
                

                - **message** *(string) --* 

                  The validation message.

                  
            
          
        
      
        

        - **errorMessageConfiguration** *(dict) --* 

          The configuration that specifies the level of detail in error messages returned by analyses using this template. When set to ``DETAILED``, error messages include more information to help troubleshoot issues with PySpark jobs. Detailed error messages may expose underlying data, including sensitive information. Recommended for faster troubleshooting in development and testing environments.

          
          

          - **type** *(string) --* 

            The level of detail for error messages returned by the PySpark job. When set to DETAILED, error messages include more information to help troubleshoot issues with your PySpark job.

             

            Because this setting may expose sensitive data, it is recommended for development and testing environments.

            
      
        

        - **syntheticDataParameters** *(dict) --* 

          The parameters used to generate synthetic data for this analysis template.

          .. note::    This is a Tagged Union structure. Only one of the     following top level keys will be set: ``mlSyntheticDataParameters``.     If a client receives an unknown member it will     set ``SDK_UNKNOWN_MEMBER`` as the top level key,     which maps to the name or tag of the unknown     member. The structure of ``SDK_UNKNOWN_MEMBER`` is     as follows::

                    'SDK_UNKNOWN_MEMBER': {'name': 'UnknownMemberName'}


        
          

          - **mlSyntheticDataParameters** *(dict) --* 

            The machine learning-specific parameters for synthetic data generation.

            
            

            - **epsilon** *(float) --* 

              The epsilon value for differential privacy when generating synthetic data. Lower values provide stronger privacy guarantees but may reduce data utility.

              
            

            - **maxMembershipInferenceAttackScore** *(float) --* 

              The maximum acceptable score for membership inference attack vulnerability. Synthetic data generation fails if the score for the resulting data exceeds this threshold.

              
            

            - **columnClassification** *(dict) --* 

              Classification details for data columns that specify how each column should be treated during synthetic data generation.

              
              

              - **columnMapping** *(list) --* 

                A mapping that defines the classification of data columns for synthetic data generation and specifies how each column should be handled during the privacy-preserving data synthesis process.

                
                

                - *(dict) --* 

                  Properties that define how a specific data column should be handled during synthetic data generation, including its name, type, and role in predictive modeling.

                  
                  

                  - **columnName** *(string) --* 

                    The name of the data column as it appears in the dataset.

                    
                  

                  - **columnType** *(string) --* 

                    The data type of the column, which determines how the synthetic data generation algorithm processes and synthesizes values for this column.

                    
                  

                  - **isPredictiveValue** *(boolean) --* 

                    Indicates if this column contains predictive values that should be treated as target variables in machine learning models. This affects how the synthetic data generation preserves statistical relationships.

                    
              
            
          
        
      
    
  
  **Exceptions**
  
  *   :py:class:`CleanRoomsService.Client.exceptions.ConflictException`

  
  *   :py:class:`CleanRoomsService.Client.exceptions.ServiceQuotaExceededException`

  
  *   :py:class:`CleanRoomsService.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`CleanRoomsService.Client.exceptions.InternalServerException`

  
  *   :py:class:`CleanRoomsService.Client.exceptions.ValidationException`

  
  *   :py:class:`CleanRoomsService.Client.exceptions.ThrottlingException`

  
  *   :py:class:`CleanRoomsService.Client.exceptions.AccessDeniedException`

  