:doc:`CognitoIdentityProvider <../../cognito-idp>` / Client / associate_software_token

************************
associate_software_token
************************



.. py:method:: CognitoIdentityProvider.Client.associate_software_token(**kwargs)

  

  Begins setup of time-based one-time password (TOTP) multi-factor authentication (MFA) for a user, with a unique private key that Amazon Cognito generates and returns in the API response. You can authorize an ``AssociateSoftwareToken`` request with either the user's access token, or a session string from a challenge response that you received from Amazon Cognito.

   

  .. note::

    

    Amazon Cognito doesn't evaluate Identity and Access Management (IAM) policies in requests for this API operation. For this operation, you can't use IAM credentials to authorize requests, and you can't grant IAM permissions in policies. For more information about authorization models in Amazon Cognito, see `Using the Amazon Cognito user pools API and user pool endpoints <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pools-API-operations.html>`__.

    

   

  Authorize this action with a signed-in user's access token. It must include the scope ``aws.cognito.signin.user.admin``.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/cognito-idp-2016-04-18/AssociateSoftwareToken>`_  


  **Request Syntax**
  ::

    response = client.associate_software_token(
        AccessToken='string',
        Session='string'
    )
    
  :type AccessToken: string
  :param AccessToken: 

    A valid access token that Amazon Cognito issued to the currently signed-in user. Must include a scope claim for ``aws.cognito.signin.user.admin``.

     

    You can provide either an access token or a session ID in the request.

    

  
  :type Session: string
  :param Session: 

    The session identifier that maintains the state of authentication requests and challenge responses. In ``AssociateSoftwareToken``, this is the session ID from a successful sign-in. You can provide either an access token or a session ID in the request.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'SecretCode': 'string',
          'Session': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **SecretCode** *(string) --* 

        A unique generated shared secret code that is used by the TOTP algorithm to generate a one-time code.

        
      

      - **Session** *(string) --* 

        The session identifier that maintains the state of authentication requests and challenge responses.

        
  
  **Exceptions**
  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ConcurrentModificationException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.NotAuthorizedException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InternalErrorException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.SoftwareTokenMFANotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ForbiddenException`

  