:doc:`CognitoIdentityProvider <../../cognito-idp>` / Client / get_tokens_from_refresh_token

*****************************
get_tokens_from_refresh_token
*****************************



.. py:method:: CognitoIdentityProvider.Client.get_tokens_from_refresh_token(**kwargs)

  

  Given a refresh token, issues new ID, access, and optionally refresh tokens for the user who owns the submitted token. This operation issues a new refresh token and invalidates the original refresh token after an optional grace period when refresh token rotation is enabled. If refresh token rotation is disabled, issues new ID and access tokens only.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/cognito-idp-2016-04-18/GetTokensFromRefreshToken>`_  


  **Request Syntax**
  ::

    response = client.get_tokens_from_refresh_token(
        RefreshToken='string',
        ClientId='string',
        ClientSecret='string',
        DeviceKey='string',
        ClientMetadata={
            'string': 'string'
        }
    )
    
  :type RefreshToken: string
  :param RefreshToken: **[REQUIRED]** 

    A valid refresh token that can authorize the request for new tokens. When refresh token rotation is active in the requested app client, this token is invalidated after the request is complete and after an optional grace period.

    

  
  :type ClientId: string
  :param ClientId: **[REQUIRED]** 

    The app client that issued the refresh token to the user who wants to request new tokens.

    

  
  :type ClientSecret: string
  :param ClientSecret: 

    The client secret of the requested app client, if the client has a secret.

    

  
  :type DeviceKey: string
  :param DeviceKey: 

    When you enable device remembering, Amazon Cognito issues a device key that you can use for device authentication that bypasses multi-factor authentication (MFA). To implement ``GetTokensFromRefreshToken`` in a user pool with device remembering, you must capture the device key from the initial authentication request. If your application doesn't provide the key of a registered device, Amazon Cognito issues a new one. You must provide the confirmed device key in this request if device remembering is enabled in your user pool.

     

    For more information about device remembering, see `Working with devices <https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-device-tracking.html>`__.

    

  
  :type ClientMetadata: dict
  :param ClientMetadata: 

    A map of custom key-value pairs that you can provide as input for certain custom workflows that this action triggers.

     

    You create custom workflows by assigning Lambda functions to user pool triggers. When you use the ``GetTokensFromRefreshToken`` API action, Amazon Cognito invokes the Lambda function the pre token generation trigger.

     

    For more information, see `Using Lambda triggers <https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools-working-with-aws-lambda-triggers.html>`__ in the *Amazon Cognito Developer Guide*.

     

    .. note::

      

      When you use the ``ClientMetadata`` parameter, note that Amazon Cognito won't do the following:

       

      
      * Store the ``ClientMetadata`` value. This data is available only to Lambda triggers that are assigned to a user pool to support custom workflows. If your user pool configuration doesn't include triggers, the ``ClientMetadata`` parameter serves no purpose.
       
      * Validate the ``ClientMetadata`` value.
       
      * Encrypt the ``ClientMetadata`` value. Don't send sensitive information in this parameter.
      

      

    

  
    - *(string) --* 

    
      - *(string) --* 

      


  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'AuthenticationResult': {
              'AccessToken': 'string',
              'ExpiresIn': 123,
              'TokenType': 'string',
              'RefreshToken': 'string',
              'IdToken': 'string',
              'NewDeviceMetadata': {
                  'DeviceKey': 'string',
                  'DeviceGroupKey': 'string'
              }
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **AuthenticationResult** *(dict) --* 

        The object that your application receives after authentication. Contains tokens and information for device authentication.

        
        

        - **AccessToken** *(string) --* 

          Your user's access token.

          
        

        - **ExpiresIn** *(integer) --* 

          The expiration period of the authentication result in seconds.

          
        

        - **TokenType** *(string) --* 

          The intended use of the token, for example ``Bearer``.

          
        

        - **RefreshToken** *(string) --* 

          Your user's refresh token.

          
        

        - **IdToken** *(string) --* 

          Your user's ID token.

          
        

        - **NewDeviceMetadata** *(dict) --* 

          The new device metadata from an authentication result.

          
          

          - **DeviceKey** *(string) --* 

            The device key, an identifier used in generating the ``DEVICE_PASSWORD_VERIFIER`` for device SRP authentication.

            
          

          - **DeviceGroupKey** *(string) --* 

            The device group key, an identifier used in generating the ``DEVICE_PASSWORD_VERIFIER`` for device SRP authentication.

            
      
    
  
  **Exceptions**
  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.NotAuthorizedException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.TooManyRequestsException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.UserNotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.UnexpectedLambdaException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.UserLambdaValidationException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InvalidLambdaResponseException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ForbiddenException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.RefreshTokenReuseException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InternalErrorException`

  