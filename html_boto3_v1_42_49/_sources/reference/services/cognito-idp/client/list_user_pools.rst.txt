:doc:`CognitoIdentityProvider <../../cognito-idp>` / Client / list_user_pools

***************
list_user_pools
***************



.. py:method:: CognitoIdentityProvider.Client.list_user_pools(**kwargs)

  

  Lists user pools and their details in the current Amazon Web Services account.

   

  .. note::

    

    Amazon Cognito evaluates Identity and Access Management (IAM) policies in requests for this API operation. For this operation, you must use IAM credentials to authorize requests, and you must grant yourself the corresponding IAM permission in a policy.

     

    **Learn more**

     

    
    * `Signing Amazon Web Services API Requests <https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-signing.html>`__
     
    * `Using the Amazon Cognito user pools API and user pool endpoints <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pools-API-operations.html>`__
    

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/cognito-idp-2016-04-18/ListUserPools>`_  


  **Request Syntax**
  ::

    response = client.list_user_pools(
        NextToken='string',
        MaxResults=123
    )
    
  :type NextToken: string
  :param NextToken: 

    This API operation returns a limited number of results. The pagination token is an identifier that you can present in an additional API request with the same parameters. When you include the pagination token, Amazon Cognito returns the next set of items after the current list. Subsequent requests return a new pagination token. By use of this token, you can paginate through the full list of items.

    

  
  :type MaxResults: integer
  :param MaxResults: **[REQUIRED]** 

    The maximum number of user pools that you want Amazon Cognito to return in the response.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'UserPools': [
              {
                  'Id': 'string',
                  'Name': 'string',
                  'LambdaConfig': {
                      'PreSignUp': 'string',
                      'CustomMessage': 'string',
                      'PostConfirmation': 'string',
                      'PreAuthentication': 'string',
                      'PostAuthentication': 'string',
                      'DefineAuthChallenge': 'string',
                      'CreateAuthChallenge': 'string',
                      'VerifyAuthChallengeResponse': 'string',
                      'PreTokenGeneration': 'string',
                      'UserMigration': 'string',
                      'PreTokenGenerationConfig': {
                          'LambdaVersion': 'V1_0'|'V2_0'|'V3_0',
                          'LambdaArn': 'string'
                      },
                      'CustomSMSSender': {
                          'LambdaVersion': 'V1_0',
                          'LambdaArn': 'string'
                      },
                      'CustomEmailSender': {
                          'LambdaVersion': 'V1_0',
                          'LambdaArn': 'string'
                      },
                      'KMSKeyID': 'string',
                      'InboundFederation': {
                          'LambdaVersion': 'V1_0',
                          'LambdaArn': 'string'
                      }
                  },
                  'Status': 'Enabled'|'Disabled',
                  'LastModifiedDate': datetime(2015, 1, 1),
                  'CreationDate': datetime(2015, 1, 1)
              },
          ],
          'NextToken': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 

      Represents the response to list user pools.

      
      

      - **UserPools** *(list) --* 

        An array of user pools and their configuration details.

        
        

        - *(dict) --* 

          A short description of a user pool.

          
          

          - **Id** *(string) --* 

            The user pool ID.

            
          

          - **Name** *(string) --* 

            The user pool name.

            
          

          - **LambdaConfig** *(dict) --* 

            A collection of user pool Lambda triggers. Amazon Cognito invokes triggers at several possible stages of user pool operations. Triggers can modify the outcome of the operations that invoked them.

            
            

            - **PreSignUp** *(string) --* 

              The configuration of a `pre sign-up Lambda trigger <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-pre-sign-up.html>`__ in a user pool. This trigger evaluates new users and can bypass confirmation, `link a federated user profile <https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-identity-federation-consolidate-users.html>`__, or block sign-up requests.

              
            

            - **CustomMessage** *(string) --* 

              A custom message Lambda trigger. This trigger is an opportunity to customize all SMS and email messages from your user pool. When a custom message trigger is active, your user pool routes all messages to a Lambda function that returns a runtime-customized message subject and body for your user pool to deliver to a user.

              
            

            - **PostConfirmation** *(string) --* 

              The configuration of a `post confirmation Lambda trigger <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-post-confirmation.html>`__ in a user pool. This trigger can take custom actions after a user confirms their user account and their email address or phone number.

              
            

            - **PreAuthentication** *(string) --* 

              The configuration of a `pre authentication trigger <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-pre-authentication.html>`__ in a user pool. This trigger can evaluate and modify user sign-in events.

              
            

            - **PostAuthentication** *(string) --* 

              The configuration of a `post authentication Lambda trigger <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-post-authentication.html>`__ in a user pool. This trigger can take custom actions after a user signs in.

              
            

            - **DefineAuthChallenge** *(string) --* 

              The configuration of a define auth challenge Lambda trigger, one of three triggers in the sequence of the `custom authentication challenge triggers <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-challenge.html>`__.

              
            

            - **CreateAuthChallenge** *(string) --* 

              The configuration of a create auth challenge Lambda trigger, one of three triggers in the sequence of the `custom authentication challenge triggers <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-challenge.html>`__.

              
            

            - **VerifyAuthChallengeResponse** *(string) --* 

              The configuration of a verify auth challenge Lambda trigger, one of three triggers in the sequence of the `custom authentication challenge triggers <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-challenge.html>`__.

              
            

            - **PreTokenGeneration** *(string) --* 

              The legacy configuration of a `pre token generation Lambda trigger <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-pre-token-generation.html>`__ in a user pool.

               

              Set this parameter for legacy purposes. If you also set an ARN in ``PreTokenGenerationConfig``, its value must be identical to ``PreTokenGeneration``. For new instances of pre token generation triggers, set the ``LambdaArn`` of ``PreTokenGenerationConfig``.

              
            

            - **UserMigration** *(string) --* 

              The configuration of a `migrate user Lambda trigger <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-migrate-user.html>`__ in a user pool. This trigger can create user profiles when users sign in or attempt to reset their password with credentials that don't exist yet.

              
            

            - **PreTokenGenerationConfig** *(dict) --* 

              The detailed configuration of a `pre token generation Lambda trigger <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-pre-token-generation.html>`__ in a user pool. If you also set an ARN in ``PreTokenGeneration``, its value must be identical to ``PreTokenGenerationConfig``.

              
              

              - **LambdaVersion** *(string) --* 

                The user pool trigger version of the request that Amazon Cognito sends to your Lambda function. Higher-numbered versions add fields that support new features.

                
              

              - **LambdaArn** *(string) --* 

                The Amazon Resource Name (ARN) of the function that you want to assign to your Lambda trigger.

                 

                This parameter and the ``PreTokenGeneration`` property of ``LambdaConfig`` have the same value. For new instances of pre token generation triggers, set ``LambdaArn``.

                
          
            

            - **CustomSMSSender** *(dict) --* 

              The configuration of a custom SMS sender Lambda trigger. This trigger routes all SMS notifications from a user pool to a Lambda function that delivers the message using custom logic.

              
              

              - **LambdaVersion** *(string) --* 

                The user pool trigger version of the request that Amazon Cognito sends to your Lambda function. Higher-numbered versions add fields that support new features.

                 

                You must use a ``LambdaVersion`` of ``V1_0`` with a custom sender function.

                
              

              - **LambdaArn** *(string) --* 

                The Amazon Resource Name (ARN) of the function that you want to assign to your Lambda trigger.

                
          
            

            - **CustomEmailSender** *(dict) --* 

              The configuration of a custom email sender Lambda trigger. This trigger routes all email notifications from a user pool to a Lambda function that delivers the message using custom logic.

              
              

              - **LambdaVersion** *(string) --* 

                The user pool trigger version of the request that Amazon Cognito sends to your Lambda function. Higher-numbered versions add fields that support new features.

                 

                You must use a ``LambdaVersion`` of ``V1_0`` with a custom sender function.

                
              

              - **LambdaArn** *(string) --* 

                The Amazon Resource Name (ARN) of the function that you want to assign to your Lambda trigger.

                
          
            

            - **KMSKeyID** *(string) --* 

              The ARN of an `KMS key <https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#master_keys>`__. Amazon Cognito uses the key to encrypt codes and temporary passwords sent to custom sender Lambda triggers.

              
            

            - **InboundFederation** *(dict) --* 

              The configuration of an inbound federation Lambda trigger. This trigger can transform federated user attributes during the authentication with external identity providers.

              
              

              - **LambdaVersion** *(string) --* 

                The user pool trigger version of the request that Amazon Cognito sends to your Lambda function. Higher-numbered versions add fields that support new features.

                 

                You must use a ``LambdaVersion`` of ``V1_0`` with an inbound federation function.

                
              

              - **LambdaArn** *(string) --* 

                The Amazon Resource Name (ARN) of the function that you want to assign to your Lambda trigger.

                
          
        
          

          - **Status** *(string) --* 

            The user pool status.

            
          

          - **LastModifiedDate** *(datetime) --* 

            The date and time when the item was modified. Amazon Cognito returns this timestamp in UNIX epoch time format. Your SDK might render the output in a human-readable format like ISO 8601 or a Java ``Date`` object.

            
          

          - **CreationDate** *(datetime) --* 

            The date and time when the item was created. Amazon Cognito returns this timestamp in UNIX epoch time format. Your SDK might render the output in a human-readable format like ISO 8601 or a Java ``Date`` object.

            
      
    
      

      - **NextToken** *(string) --* 

        The identifier that Amazon Cognito returned with the previous request to this operation. When you include a pagination token in your request, Amazon Cognito returns the next set of items in the list. By use of this token, you can paginate through the full list of items.

        
  
  **Exceptions**
  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.TooManyRequestsException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.NotAuthorizedException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InternalErrorException`

  