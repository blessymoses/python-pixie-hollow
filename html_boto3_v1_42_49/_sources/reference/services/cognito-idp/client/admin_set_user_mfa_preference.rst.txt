:doc:`CognitoIdentityProvider <../../cognito-idp>` / Client / admin_set_user_mfa_preference

*****************************
admin_set_user_mfa_preference
*****************************



.. py:method:: CognitoIdentityProvider.Client.admin_set_user_mfa_preference(**kwargs)

  

  Sets the user's multi-factor authentication (MFA) preference, including which MFA options are activated, and if any are preferred. Only one factor can be set as preferred. The preferred MFA factor will be used to authenticate a user if multiple factors are activated. If multiple options are activated and no preference is set, a challenge to choose an MFA option will be returned during sign-in.

   

  .. note::

    

    Amazon Cognito evaluates Identity and Access Management (IAM) policies in requests for this API operation. For this operation, you must use IAM credentials to authorize requests, and you must grant yourself the corresponding IAM permission in a policy.

     

    **Learn more**

     

    
    * `Signing Amazon Web Services API Requests <https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-signing.html>`__
     
    * `Using the Amazon Cognito user pools API and user pool endpoints <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pools-API-operations.html>`__
    

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/cognito-idp-2016-04-18/AdminSetUserMFAPreference>`_  


  **Request Syntax**
  ::

    response = client.admin_set_user_mfa_preference(
        SMSMfaSettings={
            'Enabled': True|False,
            'PreferredMfa': True|False
        },
        SoftwareTokenMfaSettings={
            'Enabled': True|False,
            'PreferredMfa': True|False
        },
        EmailMfaSettings={
            'Enabled': True|False,
            'PreferredMfa': True|False
        },
        Username='string',
        UserPoolId='string'
    )
    
  :type SMSMfaSettings: dict
  :param SMSMfaSettings: 

    User preferences for SMS message MFA. Activates or deactivates SMS MFA and sets it as the preferred MFA method when multiple methods are available.

    

  
    - **Enabled** *(boolean) --* 

      Specifies whether SMS message MFA is activated. If an MFA type is activated for a user, the user will be prompted for MFA during all sign-in attempts, unless device tracking is turned on and the device has been trusted.

      

    
    - **PreferredMfa** *(boolean) --* 

      Specifies whether SMS is the preferred MFA method. If true, your user pool prompts the specified user for a code delivered by SMS message after username-password sign-in succeeds.

      

    
  
  :type SoftwareTokenMfaSettings: dict
  :param SoftwareTokenMfaSettings: 

    User preferences for time-based one-time password (TOTP) MFA. Activates or deactivates TOTP MFA and sets it as the preferred MFA method when multiple methods are available. This operation can set TOTP as a user's preferred MFA method before they register a TOTP authenticator.

    

  
    - **Enabled** *(boolean) --* 

      Specifies whether software token MFA is activated. If an MFA type is activated for a user, the user will be prompted for MFA during all sign-in attempts, unless device tracking is turned on and the device has been trusted.

      

    
    - **PreferredMfa** *(boolean) --* 

      Specifies whether software token MFA is the preferred MFA method.

      

    
  
  :type EmailMfaSettings: dict
  :param EmailMfaSettings: 

    User preferences for email message MFA. Activates or deactivates email MFA and sets it as the preferred MFA method when multiple methods are available. To activate this setting, your user pool must be in the `Essentials tier <https://docs.aws.amazon.com/cognito/latest/developerguide/feature-plans-features-essentials.html>`__ or higher.

    

  
    - **Enabled** *(boolean) --* 

      Specifies whether email message MFA is active for a user. When the value of this parameter is ``Enabled``, the user will be prompted for MFA during all sign-in attempts, unless device tracking is turned on and the device has been trusted.

      

    
    - **PreferredMfa** *(boolean) --* 

      Specifies whether email message MFA is the user's preferred method.

      

    
  
  :type Username: string
  :param Username: **[REQUIRED]** 

    The name of the user that you want to query or modify. The value of this parameter is typically your user's username, but it can be any of their alias attributes. If ``username`` isn't an alias attribute in your user pool, this value must be the ``sub`` of a local user or the username of a user from a third-party IdP.

    

  
  :type UserPoolId: string
  :param UserPoolId: **[REQUIRED]** 

    The ID of the user pool where you want to set a user's MFA preferences.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {}
      
    **Response Structure**

    

    - *(dict) --* 
  
  **Exceptions**
  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.NotAuthorizedException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.PasswordResetRequiredException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.UserNotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.UserNotConfirmedException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InternalErrorException`

  