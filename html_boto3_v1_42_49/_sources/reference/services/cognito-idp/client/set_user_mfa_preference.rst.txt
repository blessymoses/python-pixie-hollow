:doc:`CognitoIdentityProvider <../../cognito-idp>` / Client / set_user_mfa_preference

***********************
set_user_mfa_preference
***********************



.. py:method:: CognitoIdentityProvider.Client.set_user_mfa_preference(**kwargs)

  

  Set the user's multi-factor authentication (MFA) method preference, including which MFA factors are activated and if any are preferred. Only one factor can be set as preferred. The preferred MFA factor will be used to authenticate a user if multiple factors are activated. If multiple options are activated and no preference is set, a challenge to choose an MFA option will be returned during sign-in. If an MFA type is activated for a user, the user will be prompted for MFA during all sign-in attempts unless device tracking is turned on and the device has been trusted. If you want MFA to be applied selectively based on the assessed risk level of sign-in attempts, deactivate MFA for users and turn on Adaptive Authentication for the user pool.

   

  Authorize this action with a signed-in user's access token. It must include the scope ``aws.cognito.signin.user.admin``.

   

  .. note::

    

    Amazon Cognito doesn't evaluate Identity and Access Management (IAM) policies in requests for this API operation. For this operation, you can't use IAM credentials to authorize requests, and you can't grant IAM permissions in policies. For more information about authorization models in Amazon Cognito, see `Using the Amazon Cognito user pools API and user pool endpoints <https://docs.aws.amazon.com/cognito/latest/developerguide/user-pools-API-operations.html>`__.

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/cognito-idp-2016-04-18/SetUserMFAPreference>`_  


  **Request Syntax**
  ::

    response = client.set_user_mfa_preference(
        SMSMfaSettings={
            'Enabled': True|False,
            'PreferredMfa': True|False
        },
        SoftwareTokenMfaSettings={
            'Enabled': True|False,
            'PreferredMfa': True|False
        },
        EmailMfaSettings={
            'Enabled': True|False,
            'PreferredMfa': True|False
        },
        AccessToken='string'
    )
    
  :type SMSMfaSettings: dict
  :param SMSMfaSettings: 

    User preferences for SMS message MFA. Activates or deactivates SMS MFA and sets it as the preferred MFA method when multiple methods are available.

    

  
    - **Enabled** *(boolean) --* 

      Specifies whether SMS message MFA is activated. If an MFA type is activated for a user, the user will be prompted for MFA during all sign-in attempts, unless device tracking is turned on and the device has been trusted.

      

    
    - **PreferredMfa** *(boolean) --* 

      Specifies whether SMS is the preferred MFA method. If true, your user pool prompts the specified user for a code delivered by SMS message after username-password sign-in succeeds.

      

    
  
  :type SoftwareTokenMfaSettings: dict
  :param SoftwareTokenMfaSettings: 

    User preferences for time-based one-time password (TOTP) MFA. Activates or deactivates TOTP MFA and sets it as the preferred MFA method when multiple methods are available. Users must register a TOTP authenticator before they set this as their preferred MFA method.

    

  
    - **Enabled** *(boolean) --* 

      Specifies whether software token MFA is activated. If an MFA type is activated for a user, the user will be prompted for MFA during all sign-in attempts, unless device tracking is turned on and the device has been trusted.

      

    
    - **PreferredMfa** *(boolean) --* 

      Specifies whether software token MFA is the preferred MFA method.

      

    
  
  :type EmailMfaSettings: dict
  :param EmailMfaSettings: 

    User preferences for email message MFA. Activates or deactivates email MFA and sets it as the preferred MFA method when multiple methods are available. To activate this setting, your user pool must be in the `Essentials tier <https://docs.aws.amazon.com/cognito/latest/developerguide/feature-plans-features-essentials.html>`__ or higher.

    

  
    - **Enabled** *(boolean) --* 

      Specifies whether email message MFA is active for a user. When the value of this parameter is ``Enabled``, the user will be prompted for MFA during all sign-in attempts, unless device tracking is turned on and the device has been trusted.

      

    
    - **PreferredMfa** *(boolean) --* 

      Specifies whether email message MFA is the user's preferred method.

      

    
  
  :type AccessToken: string
  :param AccessToken: **[REQUIRED]** 

    A valid access token that Amazon Cognito issued to the currently signed-in user. Must include a scope claim for ``aws.cognito.signin.user.admin``.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {}
      
    **Response Structure**

    

    - *(dict) --* 
  
  **Exceptions**
  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.NotAuthorizedException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.PasswordResetRequiredException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.UserNotFoundException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.UserNotConfirmedException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.InternalErrorException`

  
  *   :py:class:`CognitoIdentityProvider.Client.exceptions.ForbiddenException`

  