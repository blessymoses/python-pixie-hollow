:doc:`SSM <../../ssm>` / Client / put_resource_policy

*******************
put_resource_policy
*******************



.. py:method:: SSM.Client.put_resource_policy(**kwargs)

  

  Creates or updates a Systems Manager resource policy. A resource policy helps you to define the IAM entity (for example, an Amazon Web Services account) that can manage your Systems Manager resources. The following resources support Systems Manager resource policies.

   

  
  * ``OpsItemGroup`` - The resource policy for ``OpsItemGroup`` enables Amazon Web Services accounts to view and interact with OpsCenter operational work items (OpsItems).
   
  * ``Parameter`` - The resource policy is used to share a parameter with other accounts using Resource Access Manager (RAM). To share a parameter, it must be in the advanced parameter tier. For information about parameter tiers, see `Managing parameter tiers <https://docs.aws.amazon.com/systems-manager/latest/userguide/parameter-store-advanced-parameters.html>`__. For information about changing an existing standard parameter to an advanced parameter, see `Changing a standard parameter to an advanced parameter <https://docs.aws.amazon.com/systems-manager/latest/userguide/parameter-store-advanced-parameters.html#parameter-store-advanced-parameters-enabling>`__. To share a ``SecureString`` parameter, it must be encrypted with a customer managed key, and you must share the key separately through Key Management Service. Amazon Web Services managed keys cannot be shared. Parameters encrypted with the default Amazon Web Services managed key can be updated to use a customer managed key instead. For KMS key definitions, see `KMS concepts <https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html>`__ in the *Key Management Service Developer Guide*. 

  .. warning::

    While you can share a parameter using the Systems Manager ``PutResourcePolicy`` operation, we recommend using Resource Access Manager (RAM) instead. This is because using ``PutResourcePolicy`` requires the extra step of promoting the parameter to a standard RAM Resource Share using the RAM `PromoteResourceShareCreatedFromPolicy <https://docs.aws.amazon.com/ram/latest/APIReference/API_PromoteResourceShareCreatedFromPolicy.html>`__ API operation. Otherwise, the parameter won't be returned by the Systems Manager `DescribeParameters <https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DescribeParameters.html>`__ API operation using the ``--shared`` option. For more information, see `Sharing a parameter <https://docs.aws.amazon.com/systems-manager/latest/userguide/parameter-store-shared-parameters.html#share>`__ in the *Amazon Web Services Systems Manager User Guide*

  
  

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ssm-2014-11-06/PutResourcePolicy>`_  


  **Request Syntax**
  ::

    response = client.put_resource_policy(
        ResourceArn='string',
        Policy='string',
        PolicyId='string',
        PolicyHash='string'
    )
    
  :type ResourceArn: string
  :param ResourceArn: **[REQUIRED]** 

    Amazon Resource Name (ARN) of the resource to which you want to attach a policy.

    

  
  :type Policy: string
  :param Policy: **[REQUIRED]** 

    A policy you want to associate with a resource.

    

  
  :type PolicyId: string
  :param PolicyId: 

    The policy ID.

    

  
  :type PolicyHash: string
  :param PolicyHash: 

    ID of the current policy version. The hash helps to prevent a situation where multiple users attempt to overwrite a policy. You must provide this hash when updating or deleting a policy.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'PolicyId': 'string',
          'PolicyHash': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **PolicyId** *(string) --* 

        The policy ID. To update a policy, you must specify ``PolicyId`` and ``PolicyHash``.

        
      

      - **PolicyHash** *(string) --* 

        ID of the current policy version.

        
  
  **Exceptions**
  
  *   :py:class:`SSM.Client.exceptions.InternalServerError`

  
  *   :py:class:`SSM.Client.exceptions.ResourcePolicyInvalidParameterException`

  
  *   :py:class:`SSM.Client.exceptions.ResourcePolicyLimitExceededException`

  
  *   :py:class:`SSM.Client.exceptions.ResourcePolicyConflictException`

  
  *   :py:class:`SSM.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`SSM.Client.exceptions.MalformedResourcePolicyDocumentException`

  
  *   :py:class:`SSM.Client.exceptions.ResourcePolicyNotFoundException`

  