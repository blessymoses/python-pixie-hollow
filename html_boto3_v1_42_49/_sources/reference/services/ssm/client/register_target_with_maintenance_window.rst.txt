:doc:`SSM <../../ssm>` / Client / register_target_with_maintenance_window

***************************************
register_target_with_maintenance_window
***************************************



.. py:method:: SSM.Client.register_target_with_maintenance_window(**kwargs)

  

  Registers a target with a maintenance window.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ssm-2014-11-06/RegisterTargetWithMaintenanceWindow>`_  


  **Request Syntax**
  ::

    response = client.register_target_with_maintenance_window(
        WindowId='string',
        ResourceType='INSTANCE'|'RESOURCE_GROUP',
        Targets=[
            {
                'Key': 'string',
                'Values': [
                    'string',
                ]
            },
        ],
        OwnerInformation='string',
        Name='string',
        Description='string',
        ClientToken='string'
    )
    
  :type WindowId: string
  :param WindowId: **[REQUIRED]** 

    The ID of the maintenance window the target should be registered with.

    

  
  :type ResourceType: string
  :param ResourceType: **[REQUIRED]** 

    The type of target being registered with the maintenance window.

    

  
  :type Targets: list
  :param Targets: **[REQUIRED]** 

    The targets to register with the maintenance window. In other words, the managed nodes to run commands on when the maintenance window runs.

     

    .. note::

      

      If a single maintenance window task is registered with multiple targets, its task invocations occur sequentially and not in parallel. If your task must run on multiple targets at the same time, register a task for each target individually and assign each task the same priority level.

      

     

    You can specify targets using managed node IDs, resource group names, or tags that have been applied to managed nodes.

     

    **Example 1**: Specify managed node IDs

     

    ``Key=InstanceIds,Values=<instance-id-1>,<instance-id-2>,<instance-id-3>``

     

    **Example 2**: Use tag key-pairs applied to managed nodes

     

    ``Key=tag:<my-tag-key>,Values=<my-tag-value-1>,<my-tag-value-2>``

     

    **Example 3**: Use tag-keys applied to managed nodes

     

    ``Key=tag-key,Values=<my-tag-key-1>,<my-tag-key-2>``

     

    **Example 4**: Use resource group names

     

    ``Key=resource-groups:Name,Values=<resource-group-name>``

     

    **Example 5**: Use filters for resource group types

     

    ``Key=resource-groups:ResourceTypeFilters,Values=<resource-type-1>,<resource-type-2>``

     

    .. note::

      

      For ``Key=resource-groups:ResourceTypeFilters``, specify resource types in the following format

       

      ``Key=resource-groups:ResourceTypeFilters,Values=AWS::EC2::INSTANCE,AWS::EC2::VPC``

      

     

    For more information about these examples formats, including the best use case for each one, see `Examples\: Register targets with a maintenance window <https://docs.aws.amazon.com/systems-manager/latest/userguide/mw-cli-tutorial-targets-examples.html>`__ in the *Amazon Web Services Systems Manager User Guide*.

    

  
    - *(dict) --* 

      An array of search criteria that targets managed nodes using a key-value pair that you specify.

       

      .. note::

        

        One or more targets must be specified for maintenance window Run Command-type tasks. Depending on the task, targets are optional for other maintenance window task types (Automation, Lambda, and Step Functions). For more information about running tasks that don't specify targets, see `Registering maintenance window tasks without targets <https://docs.aws.amazon.com/systems-manager/latest/userguide/maintenance-windows-targetless-tasks.html>`__ in the *Amazon Web Services Systems Manager User Guide*.

        

       

      Supported formats include the following.

       

      **For all Systems Manager tools:**

       

      
      * ``Key=tag-key,Values=tag-value-1,tag-value-2``
      

       

      **For Automation and Change Manager:**

       

      
      * ``Key=tag:tag-key,Values=tag-value``
       
      * ``Key=ResourceGroup,Values=resource-group-name``
       
      * ``Key=ParameterValues,Values=value-1,value-2,value-3``
       
      * To target all instances in the Amazon Web Services Region: 

        
        * ``Key=AWS::EC2::Instance,Values=*``
         
        * ``Key=InstanceIds,Values=*``
        

      
      

       

      **For Run Command and Maintenance Windows:**

       

      
      * ``Key=InstanceIds,Values=instance-id-1,instance-id-2,instance-id-3``
       
      * ``Key=tag:tag-key,Values=tag-value-1,tag-value-2``
       
      * ``Key=resource-groups:Name,Values=resource-group-name``
       
      * Additionally, Maintenance Windows support targeting resource types: 

        
        * ``Key=resource-groups:ResourceTypeFilters,Values=resource-type-1,resource-type-2``
        

      
      

       

      **For State Manager:**

       

      
      * ``Key=InstanceIds,Values=instance-id-1,instance-id-2,instance-id-3``
       
      * ``Key=tag:tag-key,Values=tag-value-1,tag-value-2``
       
      * To target all instances in the Amazon Web Services Region: 

        
        * ``Key=InstanceIds,Values=*``
        

      
      

       

      For more information about how to send commands that target managed nodes using ``Key,Value`` parameters, see `Targeting multiple managed nodes <https://docs.aws.amazon.com/systems-manager/latest/userguide/send-commands-multiple.html#send-commands-targeting>`__ in the *Amazon Web Services Systems Manager User Guide*.

      

    
      - **Key** *(string) --* 

        User-defined criteria for sending commands that target managed nodes that meet the criteria.

        

      
      - **Values** *(list) --* 

        User-defined criteria that maps to ``Key``. For example, if you specified ``tag:ServerRole``, you could specify ``value:WebServer`` to run a command on instances that include EC2 tags of ``ServerRole,WebServer``.

         

        Depending on the type of target, the maximum number of values for a key might be lower than the global maximum of 50.

        

      
        - *(string) --* 

        
    
    

  :type OwnerInformation: string
  :param OwnerInformation: 

    User-provided value that will be included in any Amazon CloudWatch Events events raised while running tasks for these targets in this maintenance window.

    

  
  :type Name: string
  :param Name: 

    An optional name for the target.

    

  
  :type Description: string
  :param Description: 

    An optional description for the target.

    

  
  :type ClientToken: string
  :param ClientToken: 

    User-provided idempotency token.

    This field is autopopulated if not provided.

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'WindowTargetId': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **WindowTargetId** *(string) --* 

        The ID of the target definition in this maintenance window.

        
  
  **Exceptions**
  
  *   :py:class:`SSM.Client.exceptions.IdempotentParameterMismatch`

  
  *   :py:class:`SSM.Client.exceptions.DoesNotExistException`

  
  *   :py:class:`SSM.Client.exceptions.ResourceLimitExceededException`

  
  *   :py:class:`SSM.Client.exceptions.InternalServerError`

  