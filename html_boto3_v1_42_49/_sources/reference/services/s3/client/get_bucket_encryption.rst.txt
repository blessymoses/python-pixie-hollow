:doc:`S3 <../../s3>` / Client / get_bucket_encryption

*********************
get_bucket_encryption
*********************



.. py:method:: S3.Client.get_bucket_encryption(**kwargs)

  

  Returns the default encryption configuration for an Amazon S3 bucket. By default, all buckets have a default encryption configuration that uses server-side encryption with Amazon S3 managed keys (SSE-S3). This operation also returns the `BucketKeyEnabled <https://docs.aws.amazon.com/AmazonS3/latest/API/API_ServerSideEncryptionRule.html#AmazonS3-Type-ServerSideEncryptionRule-BucketKeyEnabled>`__ and `BlockedEncryptionTypes <https://docs.aws.amazon.com/AmazonS3/latest/API/API_ServerSideEncryptionRule.html#AmazonS3-Type-ServerSideEncryptionRule-BlockedEncryptionTypes>`__ statuses.

   

  .. note::

    

    
    * **General purpose buckets** - For information about the bucket default encryption feature, see `Amazon S3 Bucket Default Encryption <https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucket-encryption.html>`__ in the *Amazon S3 User Guide*.
     
    * **Directory buckets** - For directory buckets, there are only two supported options for server-side encryption: SSE-S3 and SSE-KMS. For information about the default encryption configuration in directory buckets, see `Setting default server-side encryption behavior for directory buckets <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-express-bucket-encryption.html>`__.
    

    

    Permissions  

  
  * **General purpose bucket permissions** - The ``s3:GetEncryptionConfiguration`` permission is required in a policy. The bucket owner has this permission by default. The bucket owner can grant this permission to others. For more information about permissions, see `Permissions Related to Bucket Operations <https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-with-s3-actions.html#using-with-s3-actions-related-to-bucket-subresources>`__ and `Managing Access Permissions to Your Amazon S3 Resources <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-access-control.html>`__.
   
  * **Directory bucket permissions** - To grant access to this API operation, you must have the ``s3express:GetEncryptionConfiguration`` permission in an IAM identity-based policy instead of a bucket policy. Cross-account access to this API operation isn't supported. This operation can only be performed by the Amazon Web Services account that owns the resource. For more information about directory bucket policies and permissions, see `Amazon Web Services Identity and Access Management (IAM) for S3 Express One Zone <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-express-security-iam.html>`__ in the *Amazon S3 User Guide*.
  

    HTTP Host header syntax  

  **Directory buckets** - The HTTP Host header syntax is ``s3express-control.region-code.amazonaws.com``.

     

  The following operations are related to ``GetBucketEncryption``:

   

  
  * `PutBucketEncryption <https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutBucketEncryption.html>`__
   
  * `DeleteBucketEncryption <https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteBucketEncryption.html>`__
  

   

  .. warning::

     

    You must URL encode any signed header values that contain spaces. For example, if your header value is ``my file.txt``, containing two spaces after ``my``, you must URL encode this value to ``my%20%20file.txt``.

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/s3-2006-03-01/GetBucketEncryption>`_  


  **Request Syntax**
  ::

    response = client.get_bucket_encryption(
        Bucket='string',
        ExpectedBucketOwner='string'
    )
    
  :type Bucket: string
  :param Bucket: **[REQUIRED]** 

    The name of the bucket from which the server-side encryption configuration is retrieved.

     

    **Directory buckets** - When you use this operation with a directory bucket, you must use path-style requests in the format ``https://s3express-control.region-code.amazonaws.com/bucket-name ``. Virtual-hosted-style requests aren't supported. Directory bucket names must be unique in the chosen Zone (Availability Zone or Local Zone). Bucket names must also follow the format ``bucket-base-name--zone-id--x-s3`` (for example, ``DOC-EXAMPLE-BUCKET--usw2-az1--x-s3``). For information about bucket naming restrictions, see `Directory bucket naming rules <https://docs.aws.amazon.com/AmazonS3/latest/userguide/directory-bucket-naming-rules.html>`__ in the *Amazon S3 User Guide*

    

  
  :type ExpectedBucketOwner: string
  :param ExpectedBucketOwner: 

    The account ID of the expected bucket owner. If the account ID that you provide does not match the actual owner of the bucket, the request fails with the HTTP status code ``403 Forbidden`` (access denied).

     

    .. note::

      

      For directory buckets, this header is not supported in this API operation. If you specify this header, the request fails with the HTTP status code ``501 Not Implemented``.

      

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'ServerSideEncryptionConfiguration': {
              'Rules': [
                  {
                      'ApplyServerSideEncryptionByDefault': {
                          'SSEAlgorithm': 'AES256'|'aws:fsx'|'aws:kms'|'aws:kms:dsse',
                          'KMSMasterKeyID': 'string'
                      },
                      'BucketKeyEnabled': True|False,
                      'BlockedEncryptionTypes': {
                          'EncryptionType': [
                              'NONE'|'SSE-C',
                          ]
                      }
                  },
              ]
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **ServerSideEncryptionConfiguration** *(dict) --* 

        Specifies the default server-side-encryption configuration.

        
        

        - **Rules** *(list) --* 

          Container for information about a particular server-side encryption configuration rule.

          
          

          - *(dict) --* 

            Specifies the default server-side encryption configuration.

             

            .. note::

              

              
              * **General purpose buckets** - If you're specifying a customer managed KMS key, we recommend using a fully qualified KMS key ARN. If you use a KMS key alias instead, then KMS resolves the key within the requester’s account. This behavior can result in data that's encrypted with a KMS key that belongs to the requester, and not the bucket owner.
               
              * **Directory buckets** - When you specify an `KMS customer managed key <https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#customer-cmk>`__ for encryption in your directory bucket, only use the key ID or key ARN. The key alias format of the KMS key isn't supported.
              

              

            
            

            - **ApplyServerSideEncryptionByDefault** *(dict) --* 

              Specifies the default server-side encryption to apply to new objects in the bucket. If a PUT Object request doesn't specify any server-side encryption, this default encryption will be applied.

              
              

              - **SSEAlgorithm** *(string) --* 

                Server-side encryption algorithm to use for the default encryption.

                 

                .. note::

                  

                  For directory buckets, there are only two supported values for server-side encryption: ``AES256`` and ``aws:kms``.

                  

                
              

              - **KMSMasterKeyID** *(string) --* 

                Amazon Web Services Key Management Service (KMS) customer managed key ID to use for the default encryption.

                 

                .. note::

                  

                  
                  * **General purpose buckets** - This parameter is allowed if and only if ``SSEAlgorithm`` is set to ``aws:kms`` or ``aws:kms:dsse``.
                   
                  * **Directory buckets** - This parameter is allowed if and only if ``SSEAlgorithm`` is set to ``aws:kms``.
                  

                  

                 

                You can specify the key ID, key alias, or the Amazon Resource Name (ARN) of the KMS key.

                 

                
                * Key ID: ``1234abcd-12ab-34cd-56ef-1234567890ab``
                 
                * Key ARN: ``arn:aws:kms:us-east-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab``
                 
                * Key Alias: ``alias/alias-name``
                

                 

                If you are using encryption with cross-account or Amazon Web Services service operations, you must use a fully qualified KMS key ARN. For more information, see `Using encryption for cross-account operations <https://docs.aws.amazon.com/AmazonS3/latest/dev/bucket-encryption.html#bucket-encryption-update-bucket-policy>`__.

                 

                .. note::

                  

                  
                  * **General purpose buckets** - If you're specifying a customer managed KMS key, we recommend using a fully qualified KMS key ARN. If you use a KMS key alias instead, then KMS resolves the key within the requester’s account. This behavior can result in data that's encrypted with a KMS key that belongs to the requester, and not the bucket owner. Also, if you use a key ID, you can run into a LogDestination undeliverable error when creating a VPC flow log.
                   
                  * **Directory buckets** - When you specify an `KMS customer managed key <https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#customer-cmk>`__ for encryption in your directory bucket, only use the key ID or key ARN. The key alias format of the KMS key isn't supported.
                  

                  

                 

                .. warning::

                   

                  Amazon S3 only supports symmetric encryption KMS keys. For more information, see `Asymmetric keys in Amazon Web Services KMS <https://docs.aws.amazon.com/kms/latest/developerguide/symmetric-asymmetric.html>`__ in the *Amazon Web Services Key Management Service Developer Guide*.

                  

                
          
            

            - **BucketKeyEnabled** *(boolean) --* 

              Specifies whether Amazon S3 should use an S3 Bucket Key with server-side encryption using KMS (SSE-KMS) for new objects in the bucket. Existing objects are not affected. Setting the ``BucketKeyEnabled`` element to ``true`` causes Amazon S3 to use an S3 Bucket Key.

               

              .. note::

                

                
                * **General purpose buckets** - By default, S3 Bucket Key is not enabled. For more information, see `Amazon S3 Bucket Keys <https://docs.aws.amazon.com/AmazonS3/latest/dev/bucket-key.html>`__ in the *Amazon S3 User Guide*.
                 
                * **Directory buckets** - S3 Bucket Keys are always enabled for ``GET`` and ``PUT`` operations in a directory bucket and can’t be disabled. S3 Bucket Keys aren't supported, when you copy SSE-KMS encrypted objects from general purpose buckets to directory buckets, from directory buckets to general purpose buckets, or between directory buckets, through `CopyObject <https://docs.aws.amazon.com/AmazonS3/latest/API/API_CopyObject.html>`__, `UploadPartCopy <https://docs.aws.amazon.com/AmazonS3/latest/API/API_UploadPartCopy.html>`__, `the Copy operation in Batch Operations <https://docs.aws.amazon.com/AmazonS3/latest/userguide/directory-buckets-objects-Batch-Ops>`__, or `the import jobs <https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-import-job>`__. In this case, Amazon S3 makes a call to KMS every time a copy request is made for a KMS-encrypted object.
                

                

              
            

            - **BlockedEncryptionTypes** *(dict) --* 

              A bucket-level setting for Amazon S3 general purpose buckets used to prevent the upload of new objects encrypted with the specified server-side encryption type. For example, blocking an encryption type will block ``PutObject``, ``CopyObject``, ``PostObject``, multipart upload, and replication requests to the bucket for objects with the specified encryption type. However, you can continue to read and list any pre-existing objects already encrypted with the specified encryption type. For more information, see `Blocking or unblocking SSE-C for a general purpose bucket <https://docs.aws.amazon.com/AmazonS3/latest/userguide/blocking-unblocking-s3-c-encryption-gpb.html>`__.

               

              .. note::

                

                Currently, this parameter only supports blocking or unblocking server-side encryption with customer-provided keys (SSE-C). For more information about SSE-C, see `Using server-side encryption with customer-provided keys (SSE-C) <https://docs.aws.amazon.com/AmazonS3/latest/userguide/ServerSideEncryptionCustomerKeys.html>`__.

                

              
              

              - **EncryptionType** *(list) --* 

                The object encryption type that you want to block or unblock for an Amazon S3 general purpose bucket.

                 

                .. note::

                  

                  Currently, this parameter only supports blocking or unblocking server side encryption with customer-provided keys (SSE-C). For more information about SSE-C, see `Using server-side encryption with customer-provided keys (SSE-C) <https://docs.aws.amazon.com/AmazonS3/latest/userguide/ServerSideEncryptionCustomerKeys.html>`__.

                  

                
                

                - *(string) --* 
            
          
        
      
    
  