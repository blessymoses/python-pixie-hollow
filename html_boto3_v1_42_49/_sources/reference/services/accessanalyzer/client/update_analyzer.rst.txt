:doc:`AccessAnalyzer <../../accessanalyzer>` / Client / update_analyzer

***************
update_analyzer
***************



.. py:method:: AccessAnalyzer.Client.update_analyzer(**kwargs)

  

  Modifies the configuration of an existing analyzer.

   

  .. note::

    

    This action is not supported for external access analyzers.

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/accessanalyzer-2019-11-01/UpdateAnalyzer>`_  


  **Request Syntax**
  ::

    response = client.update_analyzer(
        analyzerName='string',
        configuration={
            'unusedAccess': {
                'unusedAccessAge': 123,
                'analysisRule': {
                    'exclusions': [
                        {
                            'accountIds': [
                                'string',
                            ],
                            'resourceTags': [
                                {
                                    'string': 'string'
                                },
                            ]
                        },
                    ]
                }
            },
            'internalAccess': {
                'analysisRule': {
                    'inclusions': [
                        {
                            'accountIds': [
                                'string',
                            ],
                            'resourceTypes': [
                                'AWS::S3::Bucket'|'AWS::IAM::Role'|'AWS::SQS::Queue'|'AWS::Lambda::Function'|'AWS::Lambda::LayerVersion'|'AWS::KMS::Key'|'AWS::SecretsManager::Secret'|'AWS::EFS::FileSystem'|'AWS::EC2::Snapshot'|'AWS::ECR::Repository'|'AWS::RDS::DBSnapshot'|'AWS::RDS::DBClusterSnapshot'|'AWS::SNS::Topic'|'AWS::S3Express::DirectoryBucket'|'AWS::DynamoDB::Table'|'AWS::DynamoDB::Stream'|'AWS::IAM::User',
                            ],
                            'resourceArns': [
                                'string',
                            ]
                        },
                    ]
                }
            }
        }
    )
    
  :type analyzerName: string
  :param analyzerName: **[REQUIRED]** 

    The name of the analyzer to modify.

    

  
  :type configuration: dict
  :param configuration: 

    Contains information about the configuration of an analyzer for an Amazon Web Services organization or account.

    .. note::    This is a Tagged Union structure. Only one of the     following top level keys can be set: ``unusedAccess``, ``internalAccess``. 

  
    - **unusedAccess** *(dict) --* 

      Specifies the configuration of an unused access analyzer for an Amazon Web Services organization or account.

      

    
      - **unusedAccessAge** *(integer) --* 

        The specified access age in days for which to generate findings for unused access. For example, if you specify 90 days, the analyzer will generate findings for IAM entities within the accounts of the selected organization for any access that hasn't been used in 90 or more days since the analyzer's last scan. You can choose a value between 1 and 365 days.

        

      
      - **analysisRule** *(dict) --* 

        Contains information about analysis rules for the analyzer. Analysis rules determine which entities will generate findings based on the criteria you define when you create the rule.

        

      
        - **exclusions** *(list) --* 

          A list of rules for the analyzer containing criteria to exclude from analysis. Entities that meet the rule criteria will not generate findings.

          

        
          - *(dict) --* 

            The criteria for an analysis rule for an analyzer. The criteria determine which entities will generate findings.

            

          
            - **accountIds** *(list) --* 

              A list of Amazon Web Services account IDs to apply to the analysis rule criteria. The accounts cannot include the organization analyzer owner account. Account IDs can only be applied to the analysis rule criteria for organization-level analyzers. The list cannot include more than 2,000 account IDs.

              

            
              - *(string) --* 

              
          
            - **resourceTags** *(list) --* 

              An array of key-value pairs to match for your resources. You can use the set of Unicode letters, digits, whitespace, ``_``, ``.``, ``/``, ``=``, ``+``, and ``-``.

               

              For the tag key, you can specify a value that is 1 to 128 characters in length and cannot be prefixed with ``aws:``.

               

              For the tag value, you can specify a value that is 0 to 256 characters in length. If the specified tag value is 0 characters, the rule is applied to all principals with the specified tag key.

              

            
              - *(dict) --* 

              
                - *(string) --* 

                
                  - *(string) --* 

                  
            
          
          
          
      
      
    
    - **internalAccess** *(dict) --* 

      Specifies the configuration of an internal access analyzer for an Amazon Web Services organization or account. This configuration determines how the analyzer evaluates access within your Amazon Web Services environment.

      

    
      - **analysisRule** *(dict) --* 

        Contains information about analysis rules for the internal access analyzer. These rules determine which resources and access patterns will be analyzed.

        

      
        - **inclusions** *(list) --* 

          A list of rules for the internal access analyzer containing criteria to include in analysis. Only resources that meet the rule criteria will generate findings.

          

        
          - *(dict) --* 

            The criteria for an analysis rule for an internal access analyzer.

            

          
            - **accountIds** *(list) --* 

              A list of Amazon Web Services account IDs to apply to the internal access analysis rule criteria. Account IDs can only be applied to the analysis rule criteria for organization-level analyzers.

              

            
              - *(string) --* 

              
          
            - **resourceTypes** *(list) --* 

              A list of resource types to apply to the internal access analysis rule criteria. The analyzer will only generate findings for resources of these types. These resource types are currently supported for internal access analyzers:

               

              
              * ``AWS::S3::Bucket``
               
              * ``AWS::RDS::DBSnapshot``
               
              * ``AWS::RDS::DBClusterSnapshot``
               
              * ``AWS::S3Express::DirectoryBucket``
               
              * ``AWS::DynamoDB::Table``
               
              * ``AWS::DynamoDB::Stream``
              

              

            
              - *(string) --* 

              
          
            - **resourceArns** *(list) --* 

              A list of resource ARNs to apply to the internal access analysis rule criteria. The analyzer will only generate findings for resources that match these ARNs.

              

            
              - *(string) --* 

              
          
          
      
      
    
  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'configuration': {
              'unusedAccess': {
                  'unusedAccessAge': 123,
                  'analysisRule': {
                      'exclusions': [
                          {
                              'accountIds': [
                                  'string',
                              ],
                              'resourceTags': [
                                  {
                                      'string': 'string'
                                  },
                              ]
                          },
                      ]
                  }
              },
              'internalAccess': {
                  'analysisRule': {
                      'inclusions': [
                          {
                              'accountIds': [
                                  'string',
                              ],
                              'resourceTypes': [
                                  'AWS::S3::Bucket'|'AWS::IAM::Role'|'AWS::SQS::Queue'|'AWS::Lambda::Function'|'AWS::Lambda::LayerVersion'|'AWS::KMS::Key'|'AWS::SecretsManager::Secret'|'AWS::EFS::FileSystem'|'AWS::EC2::Snapshot'|'AWS::ECR::Repository'|'AWS::RDS::DBSnapshot'|'AWS::RDS::DBClusterSnapshot'|'AWS::SNS::Topic'|'AWS::S3Express::DirectoryBucket'|'AWS::DynamoDB::Table'|'AWS::DynamoDB::Stream'|'AWS::IAM::User',
                              ],
                              'resourceArns': [
                                  'string',
                              ]
                          },
                      ]
                  }
              }
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **configuration** *(dict) --* 

        Contains information about the configuration of an analyzer for an Amazon Web Services organization or account.

        .. note::    This is a Tagged Union structure. Only one of the     following top level keys will be set: ``unusedAccess``, ``internalAccess``.     If a client receives an unknown member it will     set ``SDK_UNKNOWN_MEMBER`` as the top level key,     which maps to the name or tag of the unknown     member. The structure of ``SDK_UNKNOWN_MEMBER`` is     as follows::

                'SDK_UNKNOWN_MEMBER': {'name': 'UnknownMemberName'}


      
        

        - **unusedAccess** *(dict) --* 

          Specifies the configuration of an unused access analyzer for an Amazon Web Services organization or account.

          
          

          - **unusedAccessAge** *(integer) --* 

            The specified access age in days for which to generate findings for unused access. For example, if you specify 90 days, the analyzer will generate findings for IAM entities within the accounts of the selected organization for any access that hasn't been used in 90 or more days since the analyzer's last scan. You can choose a value between 1 and 365 days.

            
          

          - **analysisRule** *(dict) --* 

            Contains information about analysis rules for the analyzer. Analysis rules determine which entities will generate findings based on the criteria you define when you create the rule.

            
            

            - **exclusions** *(list) --* 

              A list of rules for the analyzer containing criteria to exclude from analysis. Entities that meet the rule criteria will not generate findings.

              
              

              - *(dict) --* 

                The criteria for an analysis rule for an analyzer. The criteria determine which entities will generate findings.

                
                

                - **accountIds** *(list) --* 

                  A list of Amazon Web Services account IDs to apply to the analysis rule criteria. The accounts cannot include the organization analyzer owner account. Account IDs can only be applied to the analysis rule criteria for organization-level analyzers. The list cannot include more than 2,000 account IDs.

                  
                  

                  - *(string) --* 
              
                

                - **resourceTags** *(list) --* 

                  An array of key-value pairs to match for your resources. You can use the set of Unicode letters, digits, whitespace, ``_``, ``.``, ``/``, ``=``, ``+``, and ``-``.

                   

                  For the tag key, you can specify a value that is 1 to 128 characters in length and cannot be prefixed with ``aws:``.

                   

                  For the tag value, you can specify a value that is 0 to 256 characters in length. If the specified tag value is 0 characters, the rule is applied to all principals with the specified tag key.

                  
                  

                  - *(dict) --* 
                    

                    - *(string) --* 
                      

                      - *(string) --* 
                
              
              
            
          
        
      
        

        - **internalAccess** *(dict) --* 

          Specifies the configuration of an internal access analyzer for an Amazon Web Services organization or account. This configuration determines how the analyzer evaluates access within your Amazon Web Services environment.

          
          

          - **analysisRule** *(dict) --* 

            Contains information about analysis rules for the internal access analyzer. These rules determine which resources and access patterns will be analyzed.

            
            

            - **inclusions** *(list) --* 

              A list of rules for the internal access analyzer containing criteria to include in analysis. Only resources that meet the rule criteria will generate findings.

              
              

              - *(dict) --* 

                The criteria for an analysis rule for an internal access analyzer.

                
                

                - **accountIds** *(list) --* 

                  A list of Amazon Web Services account IDs to apply to the internal access analysis rule criteria. Account IDs can only be applied to the analysis rule criteria for organization-level analyzers.

                  
                  

                  - *(string) --* 
              
                

                - **resourceTypes** *(list) --* 

                  A list of resource types to apply to the internal access analysis rule criteria. The analyzer will only generate findings for resources of these types. These resource types are currently supported for internal access analyzers:

                   

                  
                  * ``AWS::S3::Bucket``
                   
                  * ``AWS::RDS::DBSnapshot``
                   
                  * ``AWS::RDS::DBClusterSnapshot``
                   
                  * ``AWS::S3Express::DirectoryBucket``
                   
                  * ``AWS::DynamoDB::Table``
                   
                  * ``AWS::DynamoDB::Stream``
                  

                  
                  

                  - *(string) --* 
              
                

                - **resourceArns** *(list) --* 

                  A list of resource ARNs to apply to the internal access analysis rule criteria. The analyzer will only generate findings for resources that match these ARNs.

                  
                  

                  - *(string) --* 
              
            
          
        
      
    
  
  **Exceptions**
  
  *   :py:class:`AccessAnalyzer.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`AccessAnalyzer.Client.exceptions.ConflictException`

  
  *   :py:class:`AccessAnalyzer.Client.exceptions.ValidationException`

  
  *   :py:class:`AccessAnalyzer.Client.exceptions.InternalServerException`

  
  *   :py:class:`AccessAnalyzer.Client.exceptions.ThrottlingException`

  
  *   :py:class:`AccessAnalyzer.Client.exceptions.AccessDeniedException`

  