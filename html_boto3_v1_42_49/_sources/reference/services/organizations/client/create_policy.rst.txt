:doc:`Organizations <../../organizations>` / Client / create_policy

*************
create_policy
*************



.. py:method:: Organizations.Client.create_policy(**kwargs)

  

  Creates a policy of a specified type that you can attach to a root, an organizational unit (OU), or an individual Amazon Web Services account.

   

  For more information about policies and their use, see `Managing Organizations policies <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies.html>`__.

   

  If the request includes tags, then the requester must have the ``organizations:TagResource`` permission.

   

  You can only call this operation from the management account or a member account that is a delegated administrator.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/organizations-2016-11-28/CreatePolicy>`_  


  **Request Syntax**
  ::

    response = client.create_policy(
        Content='string',
        Description='string',
        Name='string',
        Type='SERVICE_CONTROL_POLICY'|'RESOURCE_CONTROL_POLICY'|'TAG_POLICY'|'BACKUP_POLICY'|'AISERVICES_OPT_OUT_POLICY'|'CHATBOT_POLICY'|'DECLARATIVE_POLICY_EC2'|'SECURITYHUB_POLICY'|'INSPECTOR_POLICY'|'UPGRADE_ROLLOUT_POLICY'|'BEDROCK_POLICY'|'S3_POLICY'|'NETWORK_SECURITY_DIRECTOR_POLICY',
        Tags=[
            {
                'Key': 'string',
                'Value': 'string'
            },
        ]
    )
    
  :type Content: string
  :param Content: **[REQUIRED]** 

    The policy text content to add to the new policy. The text that you supply must adhere to the rules of the policy type you specify in the ``Type`` parameter.

     

    The maximum size of a policy document depends on the policy's type. For more information, see `Maximum and minimum values <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_reference_limits.html#min-max-values>`__ in the *Organizations User Guide*.

    

  
  :type Description: string
  :param Description: **[REQUIRED]** 

    An optional description to assign to the policy.

    

  
  :type Name: string
  :param Name: **[REQUIRED]** 

    The friendly name to assign to the policy.

     

    The `regex pattern <http://wikipedia.org/wiki/regex>`__ that is used to validate this parameter is a string of any of the characters in the ASCII character range.

    

  
  :type Type: string
  :param Type: **[REQUIRED]** 

    The type of policy to create. You can specify one of the following values:

     

    
    * `SERVICE_CONTROL_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scp.html>`__
     
    * `RESOURCE_CONTROL_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html>`__
     
    * `DECLARATIVE_POLICY_EC2 <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html>`__
     
    * `BACKUP_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_backup.html>`__
     
    * `TAG_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_tag-policies.html>`__
     
    * `CHATBOT_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_chatbot.html>`__
     
    * `AISERVICES_OPT_OUT_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_ai-opt-out.html>`__
     
    * `SECURITYHUB_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_security_hub.html>`__
     
    * `UPGRADE_ROLLOUT_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_upgrade_rollout.html>`__
     
    * `INSPECTOR_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_inspector.html>`__
     
    * `BEDROCK_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_bedrock.html>`__
     
    * `S3_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_s3.html>`__
     
    * `NETWORK_SECURITY_DIRECTOR_POLICY <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_network_security_director.html>`__
    

    

  
  :type Tags: list
  :param Tags: 

    A list of tags that you want to attach to the newly created policy. For each tag in the list, you must specify both a tag key and a value. You can set the value to an empty string, but you can't set it to ``null``. For more information about tagging, see `Tagging Organizations resources <https://docs.aws.amazon.com/organizations/latest/userguide/orgs_tagging.html>`__ in the Organizations User Guide.

     

    .. note::

      

      If any one of the tags is not valid or if you exceed the allowed number of tags for a policy, then the entire request fails and the policy is not created.

      

    

  
    - *(dict) --* 

      A custom key-value pair associated with a resource within your organization.

       

      You can attach tags to any of the following organization resources.

       

      
      * Amazon Web Services account
       
      * Organizational unit (OU)
       
      * Organization root
       
      * Policy
      

      

    
      - **Key** *(string) --* **[REQUIRED]** 

        The key identifier, or name, of the tag.

        

      
      - **Value** *(string) --* **[REQUIRED]** 

        The string value that's associated with the key of the tag. You can set the value of a tag to an empty string, but you can't set the value of a tag to null.

        

      
    

  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'Policy': {
              'PolicySummary': {
                  'Id': 'string',
                  'Arn': 'string',
                  'Name': 'string',
                  'Description': 'string',
                  'Type': 'SERVICE_CONTROL_POLICY'|'RESOURCE_CONTROL_POLICY'|'TAG_POLICY'|'BACKUP_POLICY'|'AISERVICES_OPT_OUT_POLICY'|'CHATBOT_POLICY'|'DECLARATIVE_POLICY_EC2'|'SECURITYHUB_POLICY'|'INSPECTOR_POLICY'|'UPGRADE_ROLLOUT_POLICY'|'BEDROCK_POLICY'|'S3_POLICY'|'NETWORK_SECURITY_DIRECTOR_POLICY',
                  'AwsManaged': True|False
              },
              'Content': 'string'
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **Policy** *(dict) --* 

        A structure that contains details about the newly created policy.

        
        

        - **PolicySummary** *(dict) --* 

          A structure that contains additional details about the policy.

          
          

          - **Id** *(string) --* 

            The unique identifier (ID) of the policy.

             

            The `regex pattern <http://wikipedia.org/wiki/regex>`__ for a policy ID string requires "p-" followed by from 8 to 128 lowercase or uppercase letters, digits, or the underscore character (_).

            
          

          - **Arn** *(string) --* 

            The Amazon Resource Name (ARN) of the policy.

             

            For more information about ARNs in Organizations, see `ARN Formats Supported by Organizations <https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsorganizations.html#awsorganizations-resources-for-iam-policies>`__ in the *Amazon Web Services Service Authorization Reference*.

            
          

          - **Name** *(string) --* 

            The friendly name of the policy.

             

            The `regex pattern <http://wikipedia.org/wiki/regex>`__ that is used to validate this parameter is a string of any of the characters in the ASCII character range.

            
          

          - **Description** *(string) --* 

            The description of the policy.

            
          

          - **Type** *(string) --* 

            The type of policy.

            
          

          - **AwsManaged** *(boolean) --* 

            A boolean value that indicates whether the specified policy is an Amazon Web Services managed policy. If true, then you can attach the policy to roots, OUs, or accounts, but you cannot edit it.

            
      
        

        - **Content** *(string) --* 

          The text content of the policy.

          
    
  
  **Exceptions**
  
  *   :py:class:`Organizations.Client.exceptions.AccessDeniedException`

  
  *   :py:class:`Organizations.Client.exceptions.AWSOrganizationsNotInUseException`

  
  *   :py:class:`Organizations.Client.exceptions.ConcurrentModificationException`

  
  *   :py:class:`Organizations.Client.exceptions.ConstraintViolationException`

  
  *   :py:class:`Organizations.Client.exceptions.DuplicatePolicyException`

  
  *   :py:class:`Organizations.Client.exceptions.InvalidInputException`

  
  *   :py:class:`Organizations.Client.exceptions.MalformedPolicyDocumentException`

  
  *   :py:class:`Organizations.Client.exceptions.PolicyTypeNotAvailableForOrganizationException`

  
  *   :py:class:`Organizations.Client.exceptions.ServiceException`

  
  *   :py:class:`Organizations.Client.exceptions.TooManyRequestsException`

  
  *   :py:class:`Organizations.Client.exceptions.UnsupportedAPIEndpointException`

  

  **Examples**

  The following example shows how to create a service control policy (SCP) that is named AllowAllS3Actions. The JSON string in the content parameter specifies the content in the policy. The parameter string is escaped with backslashes to ensure that the embedded double quotes in the JSON policy are treated as literals in the parameter, which itself is surrounded by double quotes:


  ::

    response = client.create_policy(
        Content='{\"Version\":\"2012-10-17\",\"Statement\":{\"Effect\":\"Allow\",\"Action\":\"s3:*\"}}',
        Description='Enables admins of attached accounts to delegate all S3 permissions',
        Name='AllowAllS3Actions',
        Type='SERVICE_CONTROL_POLICY',
    )
    
    print(response)

  
  Expected Output:
  ::

    {
        'Policy': {
            'Content': '{"Version":"2012-10-17","Statement":{"Effect":"Allow","Action":"s3:*"}}',
            'PolicySummary': {
                'Arn': 'arn:aws:organizations::111111111111:policy/o-exampleorgid/service_control_policy/p-examplepolicyid111',
                'Description': 'Allows delegation of all S3 actions',
                'Name': 'AllowAllS3Actions',
                'Type': 'SERVICE_CONTROL_POLICY',
            },
        },
        'ResponseMetadata': {
            '...': '...',
        },
    }

  