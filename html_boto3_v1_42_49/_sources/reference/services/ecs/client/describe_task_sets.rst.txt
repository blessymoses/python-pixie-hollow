:doc:`ECS <../../ecs>` / Client / describe_task_sets

******************
describe_task_sets
******************



.. py:method:: ECS.Client.describe_task_sets(**kwargs)

  

  Describes the task sets in the specified cluster and service. This is used when a service uses the ``EXTERNAL`` deployment controller type. For more information, see `Amazon ECS Deployment Types <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/deployment-types.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ecs-2014-11-13/DescribeTaskSets>`_  


  **Request Syntax**
  ::

    response = client.describe_task_sets(
        cluster='string',
        service='string',
        taskSets=[
            'string',
        ],
        include=[
            'TAGS',
        ]
    )
    
  :type cluster: string
  :param cluster: **[REQUIRED]** 

    The short name or full Amazon Resource Name (ARN) of the cluster that hosts the service that the task sets exist in.

    

  
  :type service: string
  :param service: **[REQUIRED]** 

    The short name or full Amazon Resource Name (ARN) of the service that the task sets exist in.

    

  
  :type taskSets: list
  :param taskSets: 

    The ID or full Amazon Resource Name (ARN) of task sets to describe.

    

  
    - *(string) --* 

    

  :type include: list
  :param include: 

    Specifies whether to see the resource tags for the task set. If ``TAGS`` is specified, the tags are included in the response. If this field is omitted, tags aren't included in the response.

    

  
    - *(string) --* 

    

  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'taskSets': [
              {
                  'id': 'string',
                  'taskSetArn': 'string',
                  'serviceArn': 'string',
                  'clusterArn': 'string',
                  'startedBy': 'string',
                  'externalId': 'string',
                  'status': 'string',
                  'taskDefinition': 'string',
                  'computedDesiredCount': 123,
                  'pendingCount': 123,
                  'runningCount': 123,
                  'createdAt': datetime(2015, 1, 1),
                  'updatedAt': datetime(2015, 1, 1),
                  'launchType': 'EC2'|'FARGATE'|'EXTERNAL'|'MANAGED_INSTANCES',
                  'capacityProviderStrategy': [
                      {
                          'capacityProvider': 'string',
                          'weight': 123,
                          'base': 123
                      },
                  ],
                  'platformVersion': 'string',
                  'platformFamily': 'string',
                  'networkConfiguration': {
                      'awsvpcConfiguration': {
                          'subnets': [
                              'string',
                          ],
                          'securityGroups': [
                              'string',
                          ],
                          'assignPublicIp': 'ENABLED'|'DISABLED'
                      }
                  },
                  'loadBalancers': [
                      {
                          'targetGroupArn': 'string',
                          'loadBalancerName': 'string',
                          'containerName': 'string',
                          'containerPort': 123,
                          'advancedConfiguration': {
                              'alternateTargetGroupArn': 'string',
                              'productionListenerRule': 'string',
                              'testListenerRule': 'string',
                              'roleArn': 'string'
                          }
                      },
                  ],
                  'serviceRegistries': [
                      {
                          'registryArn': 'string',
                          'port': 123,
                          'containerName': 'string',
                          'containerPort': 123
                      },
                  ],
                  'scale': {
                      'value': 123.0,
                      'unit': 'PERCENT'
                  },
                  'stabilityStatus': 'STEADY_STATE'|'STABILIZING',
                  'stabilityStatusAt': datetime(2015, 1, 1),
                  'tags': [
                      {
                          'key': 'string',
                          'value': 'string'
                      },
                  ],
                  'fargateEphemeralStorage': {
                      'kmsKeyId': 'string'
                  }
              },
          ],
          'failures': [
              {
                  'arn': 'string',
                  'reason': 'string',
                  'detail': 'string'
              },
          ]
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **taskSets** *(list) --* 

        The list of task sets described.

        
        

        - *(dict) --* 

          Information about a set of Amazon ECS tasks in either an CodeDeploy or an ``EXTERNAL`` deployment. An Amazon ECS task set includes details such as the desired number of tasks, how many tasks are running, and whether the task set serves production traffic.

          
          

          - **id** *(string) --* 

            The ID of the task set.

            
          

          - **taskSetArn** *(string) --* 

            The Amazon Resource Name (ARN) of the task set.

            
          

          - **serviceArn** *(string) --* 

            The Amazon Resource Name (ARN) of the service the task set exists in.

            
          

          - **clusterArn** *(string) --* 

            The Amazon Resource Name (ARN) of the cluster that the service that hosts the task set exists in.

            
          

          - **startedBy** *(string) --* 

            The tag specified when a task set is started. If an CodeDeploy deployment created the task set, the ``startedBy`` parameter is ``CODE_DEPLOY``. If an external deployment created the task set, the ``startedBy`` field isn't used.

            
          

          - **externalId** *(string) --* 

            The external ID associated with the task set.

             

            If an CodeDeploy deployment created a task set, the ``externalId`` parameter contains the CodeDeploy deployment ID.

             

            If a task set is created for an external deployment and is associated with a service discovery registry, the ``externalId`` parameter contains the ``ECS_TASK_SET_EXTERNAL_ID`` Cloud Map attribute.

            
          

          - **status** *(string) --* 

            The status of the task set. The following describes each state.

              PRIMARY  

            The task set is serving production traffic.

              ACTIVE  

            The task set isn't serving production traffic.

              DRAINING  

            The tasks in the task set are being stopped, and their corresponding targets are being deregistered from their target group.

            
          

          - **taskDefinition** *(string) --* 

            The task definition that the task set is using.

            
          

          - **computedDesiredCount** *(integer) --* 

            The computed desired count for the task set. This is calculated by multiplying the service's ``desiredCount`` by the task set's ``scale`` percentage. The result is always rounded up. For example, if the computed desired count is 1.2, it rounds up to 2 tasks.

            
          

          - **pendingCount** *(integer) --* 

            The number of tasks in the task set that are in the ``PENDING`` status during a deployment. A task in the ``PENDING`` state is preparing to enter the ``RUNNING`` state. A task set enters the ``PENDING`` status when it launches for the first time or when it's restarted after being in the ``STOPPED`` state.

            
          

          - **runningCount** *(integer) --* 

            The number of tasks in the task set that are in the ``RUNNING`` status during a deployment. A task in the ``RUNNING`` state is running and ready for use.

            
          

          - **createdAt** *(datetime) --* 

            The Unix timestamp for the time when the task set was created.

            
          

          - **updatedAt** *(datetime) --* 

            The Unix timestamp for the time when the task set was last updated.

            
          

          - **launchType** *(string) --* 

            The launch type the tasks in the task set are using. For more information, see `Amazon ECS launch types <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

            
          

          - **capacityProviderStrategy** *(list) --* 

            The capacity provider strategy that are associated with the task set.

            
            

            - *(dict) --* 

              The details of a capacity provider strategy. A capacity provider strategy can be set when using the `RunTask <https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_RunTask.html>`__or `CreateCluster <https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_CreateCluster.html>`__ APIs or as the default capacity provider strategy for a cluster with the ``CreateCluster`` API.

               

              Only capacity providers that are already associated with a cluster and have an ``ACTIVE`` or ``UPDATING`` status can be used in a capacity provider strategy. The `PutClusterCapacityProviders <https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_PutClusterCapacityProviders.html>`__ API is used to associate a capacity provider with a cluster.

               

              If specifying a capacity provider that uses an Auto Scaling group, the capacity provider must already be created. New Auto Scaling group capacity providers can be created with the `CreateClusterCapacityProvider <https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_CreateClusterCapacityProvider.html>`__ API operation.

               

              To use a Fargate capacity provider, specify either the ``FARGATE`` or ``FARGATE_SPOT`` capacity providers. The Fargate capacity providers are available to all accounts and only need to be associated with a cluster to be used in a capacity provider strategy.

               

              With ``FARGATE_SPOT``, you can run interruption tolerant tasks at a rate that's discounted compared to the ``FARGATE`` price. ``FARGATE_SPOT`` runs tasks on spare compute capacity. When Amazon Web Services needs the capacity back, your tasks are interrupted with a two-minute warning. ``FARGATE_SPOT`` supports Linux tasks with the X86_64 architecture on platform version 1.3.0 or later. ``FARGATE_SPOT`` supports Linux tasks with the ARM64 architecture on platform version 1.4.0 or later.

               

              A capacity provider strategy can contain a maximum of 20 capacity providers.

              
              

              - **capacityProvider** *(string) --* 

                The short name of the capacity provider.

                
              

              - **weight** *(integer) --* 

                The *weight* value designates the relative percentage of the total number of tasks launched that should use the specified capacity provider. The ``weight`` value is taken into consideration after the ``base`` value, if defined, is satisfied.

                 

                If no ``weight`` value is specified, the default value of ``0`` is used. When multiple capacity providers are specified within a capacity provider strategy, at least one of the capacity providers must have a weight value greater than zero and any capacity providers with a weight of ``0`` can't be used to place tasks. If you specify multiple capacity providers in a strategy that all have a weight of ``0``, any ``RunTask`` or ``CreateService`` actions using the capacity provider strategy will fail.

                 

                Weight value characteristics:

                 

                
                * Weight is considered after the base value is satisfied
                 
                * The default value is ``0`` if not specified
                 
                * The valid range is 0 to 1,000
                 
                * At least one capacity provider must have a weight greater than zero
                 
                * Capacity providers with weight of ``0`` cannot place tasks
                

                 

                Task distribution logic:

                 

                 
                * Base satisfaction: The minimum number of tasks specified by the base value are placed on that capacity provider
                 
                * Weight distribution: After base requirements are met, additional tasks are distributed according to weight ratios
                 

                 

                Examples:

                 

                Equal Distribution: Two capacity providers both with weight ``1`` will split tasks evenly after base requirements are met.

                 

                Weighted Distribution: If capacityProviderA has weight ``1`` and capacityProviderB has weight ``4``, then for every 1 task on A, 4 tasks will run on B.

                
              

              - **base** *(integer) --* 

                The *base* value designates how many tasks, at a minimum, to run on the specified capacity provider for each service. Only one capacity provider in a capacity provider strategy can have a *base* defined. If no value is specified, the default value of ``0`` is used.

                 

                Base value characteristics:

                 

                
                * Only one capacity provider in a strategy can have a base defined
                 
                * The default value is ``0`` if not specified
                 
                * The valid range is 0 to 100,000
                 
                * Base requirements are satisfied first before weight distribution
                

                
          
        
          

          - **platformVersion** *(string) --* 

            The Fargate platform version where the tasks in the task set are running. A platform version is only specified for tasks run on Fargate. For more information, see `Fargate platform versions <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/platform_versions.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

            
          

          - **platformFamily** *(string) --* 

            The operating system that your tasks in the set are running on. A platform family is specified only for tasks that use the Fargate launch type.

             

            All tasks in the set must have the same value.

            
          

          - **networkConfiguration** *(dict) --* 

            The network configuration for the task set.

            
            

            - **awsvpcConfiguration** *(dict) --* 

              The VPC subnets and security groups that are associated with a task.

               

              .. note::

                

                All specified subnets and security groups must be from the same VPC.

                

              
              

              - **subnets** *(list) --* 

                The IDs of the subnets associated with the task or service. There's a limit of 16 subnets that can be specified.

                 

                .. note::

                  

                  All specified subnets must be from the same VPC.

                  

                
                

                - *(string) --* 
            
              

              - **securityGroups** *(list) --* 

                The IDs of the security groups associated with the task or service. If you don't specify a security group, the default security group for the VPC is used. There's a limit of 5 security groups that can be specified.

                 

                .. note::

                  

                  All specified security groups must be from the same VPC.

                  

                
                

                - *(string) --* 
            
              

              - **assignPublicIp** *(string) --* 

                Whether the task's elastic network interface receives a public IP address.

                 

                Consider the following when you set this value:

                 

                
                * When you use ``create-service`` or ``update-service``, the default is ``DISABLED``.
                 
                * When the service ``deploymentController`` is ``ECS``, the value must be ``DISABLED``.
                

                
          
        
          

          - **loadBalancers** *(list) --* 

            Details on a load balancer that are used with a task set.

            
            

            - *(dict) --* 

              The load balancer configuration to use with a service or task set.

               

              When you add, update, or remove a load balancer configuration, Amazon ECS starts a new deployment with the updated Elastic Load Balancing configuration. This causes tasks to register to and deregister from load balancers.

               

              We recommend that you verify this on a test environment before you update the Elastic Load Balancing configuration.

               

              A service-linked role is required for services that use multiple target groups. For more information, see `Using service-linked roles <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using-service-linked-roles.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

              
              

              - **targetGroupArn** *(string) --* 

                The full Amazon Resource Name (ARN) of the Elastic Load Balancing target group or groups associated with a service or task set.

                 

                A target group ARN is only specified when using an Application Load Balancer or Network Load Balancer.

                 

                For services using the ``ECS`` deployment controller, you can specify one or multiple target groups. For more information, see `Registering multiple target groups with a service <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/register-multiple-targetgroups.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

                 

                For services using the ``CODE_DEPLOY`` deployment controller, you're required to define two target groups for the load balancer. For more information, see `Blue/green deployment with CodeDeploy <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/deployment-type-bluegreen.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

                 

                .. warning::

                   

                  If your service's task definition uses the ``awsvpc`` network mode, you must choose ``ip`` as the target type, not ``instance``. Do this when creating your target groups because tasks that use the ``awsvpc`` network mode are associated with an elastic network interface, not an Amazon EC2 instance. This network mode is required for the Fargate launch type.

                  

                
              

              - **loadBalancerName** *(string) --* 

                The name of the load balancer to associate with the Amazon ECS service or task set.

                 

                If you are using an Application Load Balancer or a Network Load Balancer the load balancer name parameter should be omitted.

                
              

              - **containerName** *(string) --* 

                The name of the container (as it appears in a container definition) to associate with the load balancer.

                 

                You need to specify the container name when configuring the target group for an Amazon ECS load balancer.

                
              

              - **containerPort** *(integer) --* 

                The port on the container to associate with the load balancer. This port must correspond to a ``containerPort`` in the task definition the tasks in the service are using. For tasks that use the EC2 launch type, the container instance they're launched on must allow ingress traffic on the ``hostPort`` of the port mapping.

                
              

              - **advancedConfiguration** *(dict) --* 

                The advanced settings for the load balancer used in blue/green deployments. Specify the alternate target group, listener rules, and IAM role required for traffic shifting during blue/green deployments.

                
                

                - **alternateTargetGroupArn** *(string) --* 

                  The Amazon Resource Name (ARN) of the alternate target group for Amazon ECS blue/green deployments.

                  
                

                - **productionListenerRule** *(string) --* 

                  The Amazon Resource Name (ARN) that that identifies the production listener rule (in the case of an Application Load Balancer) or listener (in the case for an Network Load Balancer) for routing production traffic.

                  
                

                - **testListenerRule** *(string) --* 

                  The Amazon Resource Name (ARN) that identifies ) that identifies the test listener rule (in the case of an Application Load Balancer) or listener (in the case for an Network Load Balancer) for routing test traffic.

                  
                

                - **roleArn** *(string) --* 

                  The Amazon Resource Name (ARN) of the IAM role that grants Amazon ECS permission to call the Elastic Load Balancing APIs for you.

                  
            
          
        
          

          - **serviceRegistries** *(list) --* 

            The details for the service discovery registries to assign to this task set. For more information, see `Service discovery <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/service-discovery.html>`__.

            
            

            - *(dict) --* 

              The details for the service registry.

               

              Each service may be associated with one service registry. Multiple service registries for each service are not supported.

               

              When you add, update, or remove the service registries configuration, Amazon ECS starts a new deployment. New tasks are registered and deregistered to the updated service registry configuration.

              
              

              - **registryArn** *(string) --* 

                The Amazon Resource Name (ARN) of the service registry. The currently supported service registry is Cloud Map. For more information, see `CreateService <https://docs.aws.amazon.com/cloud-map/latest/api/API_CreateService.html>`__.

                
              

              - **port** *(integer) --* 

                The port value used if your service discovery service specified an SRV record. This field might be used if both the ``awsvpc`` network mode and SRV records are used.

                
              

              - **containerName** *(string) --* 

                The container name value to be used for your service discovery service. It's already specified in the task definition. If the task definition that your service task specifies uses the ``bridge`` or ``host`` network mode, you must specify a ``containerName`` and ``containerPort`` combination from the task definition. If the task definition that your service task specifies uses the ``awsvpc`` network mode and a type SRV DNS record is used, you must specify either a ``containerName`` and ``containerPort`` combination or a ``port`` value. However, you can't specify both.

                
              

              - **containerPort** *(integer) --* 

                The port value to be used for your service discovery service. It's already specified in the task definition. If the task definition your service task specifies uses the ``bridge`` or ``host`` network mode, you must specify a ``containerName`` and ``containerPort`` combination from the task definition. If the task definition your service task specifies uses the ``awsvpc`` network mode and a type SRV DNS record is used, you must specify either a ``containerName`` and ``containerPort`` combination or a ``port`` value. However, you can't specify both.

                
          
        
          

          - **scale** *(dict) --* 

            A floating-point percentage of your desired number of tasks to place and keep running in the task set.

            
            

            - **value** *(float) --* 

              The value, specified as a percent total of a service's ``desiredCount``, to scale the task set. Accepted values are numbers between 0 and 100.

              
            

            - **unit** *(string) --* 

              The unit of measure for the scale value.

              
        
          

          - **stabilityStatus** *(string) --* 

            The stability status. This indicates whether the task set has reached a steady state. If the following conditions are met, the task set are in ``STEADY_STATE``:

             

            
            * The task ``runningCount`` is equal to the ``computedDesiredCount``.
             
            * The ``pendingCount`` is ``0``.
             
            * There are no tasks that are running on container instances in the ``DRAINING`` status.
             
            * All tasks are reporting a healthy status from the load balancers, service discovery, and container health checks.
            

             

            If any of those conditions aren't met, the stability status returns ``STABILIZING``.

            
          

          - **stabilityStatusAt** *(datetime) --* 

            The Unix timestamp for the time when the task set stability status was retrieved.

            
          

          - **tags** *(list) --* 

            The metadata that you apply to the task set to help you categorize and organize them. Each tag consists of a key and an optional value. You define both.

             

            The following basic restrictions apply to tags:

             

            
            * Maximum number of tags per resource - 50
             
            * For each resource, each tag key must be unique, and each tag key can have only one value.
             
            * Maximum key length - 128 Unicode characters in UTF-8
             
            * Maximum value length - 256 Unicode characters in UTF-8
             
            * If your tagging schema is used across multiple services and resources, remember that other services may have restrictions on allowed characters. Generally allowed characters are: letters, numbers, and spaces representable in UTF-8, and the following characters: + - = . _ : / @.
             
            * Tag keys and values are case-sensitive.
             
            * Do not use ``aws:``, ``AWS:``, or any upper or lowercase combination of such as a prefix for either keys or values as it is reserved for Amazon Web Services use. You cannot edit or delete tag keys or values with this prefix. Tags with this prefix do not count against your tags per resource limit.
            

            
            

            - *(dict) --* 

              The metadata that you apply to a resource to help you categorize and organize them. Each tag consists of a key and an optional value. You define them.

               

              The following basic restrictions apply to tags:

               

              
              * Maximum number of tags per resource - 50
               
              * For each resource, each tag key must be unique, and each tag key can have only one value.
               
              * Maximum key length - 128 Unicode characters in UTF-8
               
              * Maximum value length - 256 Unicode characters in UTF-8
               
              * If your tagging schema is used across multiple services and resources, remember that other services may have restrictions on allowed characters. Generally allowed characters are: letters, numbers, and spaces representable in UTF-8, and the following characters: + - = . _ : / @.
               
              * Tag keys and values are case-sensitive.
               
              * Do not use ``aws:``, ``AWS:``, or any upper or lowercase combination of such as a prefix for either keys or values as it is reserved for Amazon Web Services use. You cannot edit or delete tag keys or values with this prefix. Tags with this prefix do not count against your tags per resource limit.
              

              
              

              - **key** *(string) --* 

                One part of a key-value pair that make up a tag. A ``key`` is a general label that acts like a category for more specific tag values.

                
              

              - **value** *(string) --* 

                The optional part of a key-value pair that make up a tag. A ``value`` acts as a descriptor within a tag category (key).

                
          
        
          

          - **fargateEphemeralStorage** *(dict) --* 

            The Fargate ephemeral storage settings for the task set.

            
            

            - **kmsKeyId** *(string) --* 

              Specify an Key Management Service key ID to encrypt the ephemeral storage for deployment.

              
        
      
    
      

      - **failures** *(list) --* 

        Any failures associated with the call.

        
        

        - *(dict) --* 

          A failed resource. For a list of common causes, see `API failure reasons <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/api_failures_messages.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

          
          

          - **arn** *(string) --* 

            The Amazon Resource Name (ARN) of the failed resource.

            
          

          - **reason** *(string) --* 

            The reason for the failure.

            
          

          - **detail** *(string) --* 

            The details of the failure.

            
      
    
  
  **Exceptions**
  
  *   :py:class:`ECS.Client.exceptions.ServerException`

  
  *   :py:class:`ECS.Client.exceptions.ClientException`

  
  *   :py:class:`ECS.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`ECS.Client.exceptions.ClusterNotFoundException`

  
  *   :py:class:`ECS.Client.exceptions.UnsupportedFeatureException`

  
  *   :py:class:`ECS.Client.exceptions.AccessDeniedException`

  
  *   :py:class:`ECS.Client.exceptions.ServiceNotFoundException`

  
  *   :py:class:`ECS.Client.exceptions.ServiceNotActiveException`

  