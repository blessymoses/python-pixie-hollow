:doc:`ECS <../../ecs>` / Client / create_express_gateway_service

******************************
create_express_gateway_service
******************************



.. py:method:: ECS.Client.create_express_gateway_service(**kwargs)

  

  Creates an Express service that simplifies deploying containerized web applications on Amazon ECS with managed Amazon Web Services infrastructure. This operation provisions and configures Application Load Balancers, target groups, security groups, and auto-scaling policies automatically.

   

  Specify a primary container configuration with your application image and basic settings. Amazon ECS creates the necessary Amazon Web Services resources for traffic distribution, health monitoring, network access control, and capacity management.

   

  Provide an execution role for task operations and an infrastructure role for managing Amazon Web Services resources on your behalf.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ecs-2014-11-13/CreateExpressGatewayService>`_  


  **Request Syntax**
  ::

    response = client.create_express_gateway_service(
        executionRoleArn='string',
        infrastructureRoleArn='string',
        serviceName='string',
        cluster='string',
        healthCheckPath='string',
        primaryContainer={
            'image': 'string',
            'containerPort': 123,
            'awsLogsConfiguration': {
                'logGroup': 'string',
                'logStreamPrefix': 'string'
            },
            'repositoryCredentials': {
                'credentialsParameter': 'string'
            },
            'command': [
                'string',
            ],
            'environment': [
                {
                    'name': 'string',
                    'value': 'string'
                },
            ],
            'secrets': [
                {
                    'name': 'string',
                    'valueFrom': 'string'
                },
            ]
        },
        taskRoleArn='string',
        networkConfiguration={
            'securityGroups': [
                'string',
            ],
            'subnets': [
                'string',
            ]
        },
        cpu='string',
        memory='string',
        scalingTarget={
            'minTaskCount': 123,
            'maxTaskCount': 123,
            'autoScalingMetric': 'AVERAGE_CPU'|'AVERAGE_MEMORY'|'REQUEST_COUNT_PER_TARGET',
            'autoScalingTargetValue': 123
        },
        tags=[
            {
                'key': 'string',
                'value': 'string'
            },
        ]
    )
    
  :type executionRoleArn: string
  :param executionRoleArn: **[REQUIRED]** 

    The Amazon Resource Name (ARN) of the task execution role that grants the Amazon ECS container agent permission to make Amazon Web Services API calls on your behalf. This role is required for Amazon ECS to pull container images from Amazon ECR, send container logs to Amazon CloudWatch Logs, and retrieve sensitive data from Amazon Web Services Systems Manager Parameter Store or Amazon Web Services Secrets Manager.

     

    The execution role must include the ``AmazonECSTaskExecutionRolePolicy`` managed policy or equivalent permissions. For Express services, this role is used during task startup and runtime for container management operations.

    

  
  :type infrastructureRoleArn: string
  :param infrastructureRoleArn: **[REQUIRED]** 

    The Amazon Resource Name (ARN) of the infrastructure role that grants Amazon ECS permission to create and manage Amazon Web Services resources on your behalf for the Express service. This role is used to provision and manage Application Load Balancers, target groups, security groups, auto-scaling policies, and other Amazon Web Services infrastructure components.

     

    The infrastructure role must include permissions for Elastic Load Balancing, Application Auto Scaling, Amazon EC2 (for security groups), and other services required for managed infrastructure. This role is only used during Express service creation, updates, and deletion operations.

    

  
  :type serviceName: string
  :param serviceName: 

    The name of the Express service. This name must be unique within the specified cluster and can contain up to 255 letters (uppercase and lowercase), numbers, underscores, and hyphens. The name is used to identify the service in the Amazon ECS console and API operations.

     

    If you don't specify a service name, Amazon ECS generates a unique name for the service. The service name becomes part of the service ARN and cannot be changed after the service is created.

    

  
  :type cluster: string
  :param cluster: 

    The short name or full Amazon Resource Name (ARN) of the cluster on which to create the Express service. If you do not specify a cluster, the ``default`` cluster is assumed.

    

  
  :type healthCheckPath: string
  :param healthCheckPath: 

    The path on the container that the Application Load Balancer uses for health checks. This should be a valid HTTP endpoint that returns a successful response (HTTP 200) when the application is healthy.

     

    If not specified, the default health check path is ``/ping``. The health check path must start with a forward slash and can include query parameters. Examples: ``/health``, ``/api/status``, ``/ping?format=json``.

    

  
  :type primaryContainer: dict
  :param primaryContainer: **[REQUIRED]** 

    The primary container configuration for the Express service. This defines the main application container that will receive traffic from the Application Load Balancer.

     

    The primary container must specify at minimum a container image. You can also configure the container port (defaults to 80), logging configuration, environment variables, secrets, and startup commands. The container image can be from Amazon ECR, Docker Hub, or any other container registry accessible to your execution role.

    

  
    - **image** *(string) --* **[REQUIRED]** 

      The image used to start a container. This string is passed directly to the Docker daemon. Images in the Docker Hub registry are available by default. Other repositories are specified with either ``repository-url/image:tag`` or ``repository-url/image@digest``.

       

      For Express services, the image typically contains a web application that listens on the specified container port. The image can be stored in Amazon ECR, Docker Hub, or any other container registry accessible to your execution role.

      

    
    - **containerPort** *(integer) --* 

      The port number on the container that receives traffic from the load balancer. Default is 80.

      

    
    - **awsLogsConfiguration** *(dict) --* 

      The log configuration for the container.

      

    
      - **logGroup** *(string) --* **[REQUIRED]** 

        The name of the CloudWatch Logs log group to send container logs to.

        

      
      - **logStreamPrefix** *(string) --* **[REQUIRED]** 

        The prefix for the CloudWatch Logs log stream names. The default for an Express service is ``ecs``.

        

      
    
    - **repositoryCredentials** *(dict) --* 

      The configuration for repository credentials for private registry authentication.

      

    
      - **credentialsParameter** *(string) --* 

        The Amazon Resource Name (ARN) of the secret containing the private repository credentials.

        

      
    
    - **command** *(list) --* 

      The command that is passed to the container.

      

    
      - *(string) --* 

      
  
    - **environment** *(list) --* 

      The environment variables to pass to the container.

      

    
      - *(dict) --* 

        A key-value pair object.

        

      
        - **name** *(string) --* 

          The name of the key-value pair. For environment variables, this is the name of the environment variable.

          

        
        - **value** *(string) --* 

          The value of the key-value pair. For environment variables, this is the value of the environment variable.

          

        
      
  
    - **secrets** *(list) --* 

      The secrets to pass to the container.

      

    
      - *(dict) --* 

        An object representing the secret to expose to your container. Secrets can be exposed to a container in the following ways:

         

        
        * To inject sensitive data into your containers as environment variables, use the ``secrets`` container definition parameter.
         
        * To reference sensitive information in the log configuration of a container, use the ``secretOptions`` container definition parameter.
        

         

        For more information, see `Specifying sensitive data <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

        

      
        - **name** *(string) --* **[REQUIRED]** 

          The name of the secret.

          

        
        - **valueFrom** *(string) --* **[REQUIRED]** 

          The secret to expose to the container. The supported values are either the full ARN of the Secrets Manager secret or the full ARN of the parameter in the SSM Parameter Store.

           

          For information about the require Identity and Access Management permissions, see `Required IAM permissions for Amazon ECS secrets <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data-secrets.html#secrets-iam>`__ (for Secrets Manager) or `Required IAM permissions for Amazon ECS secrets <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data-parameters.html>`__ (for Systems Manager Parameter store) in the *Amazon Elastic Container Service Developer Guide*.

           

          .. note::

            

            If the SSM Parameter Store parameter exists in the same Region as the task you're launching, then you can use either the full ARN or name of the parameter. If the parameter exists in a different Region, then the full ARN must be specified.

            

          

        
      
  
  
  :type taskRoleArn: string
  :param taskRoleArn: 

    The Amazon Resource Name (ARN) of the IAM role that containers in this task can assume. This role allows your application code to access other Amazon Web Services services securely.

     

    The task role is different from the execution role. While the execution role is used by the Amazon ECS agent to set up the task, the task role is used by your application code running inside the container to make Amazon Web Services API calls. If your application doesn't need to access Amazon Web Services services, you can omit this parameter.

    

  
  :type networkConfiguration: dict
  :param networkConfiguration: 

    The network configuration for the Express service tasks. This specifies the VPC subnets and security groups for the tasks.

     

    For Express services, you can specify custom security groups and subnets. If not provided, Amazon ECS will use the default VPC configuration and create appropriate security groups automatically. The network configuration determines how your service integrates with your VPC and what network access it has.

    

  
    - **securityGroups** *(list) --* 

      The IDs of the security groups associated with the Express service.

      

    
      - *(string) --* 

      
  
    - **subnets** *(list) --* 

      The IDs of the subnets associated with the Express service.

      

    
      - *(string) --* 

      
  
  
  :type cpu: string
  :param cpu: 

    The number of CPU units used by the task. This parameter determines the CPU allocation for each task in the Express service. The default value for an Express service is 256 (.25 vCPU).

    

  
  :type memory: string
  :param memory: 

    The amount of memory (in MiB) used by the task. This parameter determines the memory allocation for each task in the Express service. The default value for an express service is 512 MiB.

    

  
  :type scalingTarget: dict
  :param scalingTarget: 

    The auto-scaling configuration for the Express service. This defines how the service automatically adjusts the number of running tasks based on demand.

     

    You can specify the minimum and maximum number of tasks, the scaling metric (CPU utilization, memory utilization, or request count per target), and the target value for the metric. If not specified, the default target value for an Express service is 60.

    

  
    - **minTaskCount** *(integer) --* 

      The minimum number of tasks to run in the Express service.

      

    
    - **maxTaskCount** *(integer) --* 

      The maximum number of tasks to run in the Express service.

      

    
    - **autoScalingMetric** *(string) --* 

      The metric used for auto-scaling decisions. The default metric used for an Express service is ``CPUUtilization``.

      

    
    - **autoScalingTargetValue** *(integer) --* 

      The target value for the auto-scaling metric. The default value for an Express service is 60.

      

    
  
  :type tags: list
  :param tags: 

    The metadata that you apply to the Express service to help categorize and organize it. Each tag consists of a key and an optional value. You can apply up to 50 tags to a service.

    

  
    - *(dict) --* 

      The metadata that you apply to a resource to help you categorize and organize them. Each tag consists of a key and an optional value. You define them.

       

      The following basic restrictions apply to tags:

       

      
      * Maximum number of tags per resource - 50
       
      * For each resource, each tag key must be unique, and each tag key can have only one value.
       
      * Maximum key length - 128 Unicode characters in UTF-8
       
      * Maximum value length - 256 Unicode characters in UTF-8
       
      * If your tagging schema is used across multiple services and resources, remember that other services may have restrictions on allowed characters. Generally allowed characters are: letters, numbers, and spaces representable in UTF-8, and the following characters: + - = . _ : / @.
       
      * Tag keys and values are case-sensitive.
       
      * Do not use ``aws:``, ``AWS:``, or any upper or lowercase combination of such as a prefix for either keys or values as it is reserved for Amazon Web Services use. You cannot edit or delete tag keys or values with this prefix. Tags with this prefix do not count against your tags per resource limit.
      

      

    
      - **key** *(string) --* 

        One part of a key-value pair that make up a tag. A ``key`` is a general label that acts like a category for more specific tag values.

        

      
      - **value** *(string) --* 

        The optional part of a key-value pair that make up a tag. A ``value`` acts as a descriptor within a tag category (key).

        

      
    

  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'service': {
              'cluster': 'string',
              'serviceName': 'string',
              'serviceArn': 'string',
              'infrastructureRoleArn': 'string',
              'status': {
                  'statusCode': 'ACTIVE'|'DRAINING'|'INACTIVE',
                  'statusReason': 'string'
              },
              'currentDeployment': 'string',
              'activeConfigurations': [
                  {
                      'serviceRevisionArn': 'string',
                      'executionRoleArn': 'string',
                      'taskRoleArn': 'string',
                      'cpu': 'string',
                      'memory': 'string',
                      'networkConfiguration': {
                          'securityGroups': [
                              'string',
                          ],
                          'subnets': [
                              'string',
                          ]
                      },
                      'healthCheckPath': 'string',
                      'primaryContainer': {
                          'image': 'string',
                          'containerPort': 123,
                          'awsLogsConfiguration': {
                              'logGroup': 'string',
                              'logStreamPrefix': 'string'
                          },
                          'repositoryCredentials': {
                              'credentialsParameter': 'string'
                          },
                          'command': [
                              'string',
                          ],
                          'environment': [
                              {
                                  'name': 'string',
                                  'value': 'string'
                              },
                          ],
                          'secrets': [
                              {
                                  'name': 'string',
                                  'valueFrom': 'string'
                              },
                          ]
                      },
                      'scalingTarget': {
                          'minTaskCount': 123,
                          'maxTaskCount': 123,
                          'autoScalingMetric': 'AVERAGE_CPU'|'AVERAGE_MEMORY'|'REQUEST_COUNT_PER_TARGET',
                          'autoScalingTargetValue': 123
                      },
                      'ingressPaths': [
                          {
                              'accessType': 'PUBLIC'|'PRIVATE',
                              'endpoint': 'string'
                          },
                      ],
                      'createdAt': datetime(2015, 1, 1)
                  },
              ],
              'tags': [
                  {
                      'key': 'string',
                      'value': 'string'
                  },
              ],
              'createdAt': datetime(2015, 1, 1),
              'updatedAt': datetime(2015, 1, 1)
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **service** *(dict) --* 

        The full description of your Express service following the create operation.

        
        

        - **cluster** *(string) --* 

          The short name or full ARN of the cluster that hosts the Express service.

          
        

        - **serviceName** *(string) --* 

          The name of the Express service.

          
        

        - **serviceArn** *(string) --* 

          The ARN that identifies the Express service.

          
        

        - **infrastructureRoleArn** *(string) --* 

          The ARN of the infrastructure role that manages Amazon Web Services resources for the Express service.

          
        

        - **status** *(dict) --* 

          The current status of the Express service.

          
          

          - **statusCode** *(string) --* 

            The status of the Express service.

            
          

          - **statusReason** *(string) --* 

            Information about why the Express service is in the current status.

            
      
        

        - **currentDeployment** *(string) --* 

          The current deployment configuration for the Express service.

          
        

        - **activeConfigurations** *(list) --* 

          The list of active service configurations for the Express service.

          
          

          - *(dict) --* 

            Represents a specific configuration revision of an Express service, containing all the settings and parameters for that revision.

            
            

            - **serviceRevisionArn** *(string) --* 

              The ARN of the service revision.

              
            

            - **executionRoleArn** *(string) --* 

              The ARN of the task execution role for the service revision.

              
            

            - **taskRoleArn** *(string) --* 

              The ARN of the task role for the service revision.

              
            

            - **cpu** *(string) --* 

              The CPU allocation for tasks in this service revision.

              
            

            - **memory** *(string) --* 

              The memory allocation for tasks in this service revision.

              
            

            - **networkConfiguration** *(dict) --* 

              The network configuration for tasks in this service revision.

              
              

              - **securityGroups** *(list) --* 

                The IDs of the security groups associated with the Express service.

                
                

                - *(string) --* 
            
              

              - **subnets** *(list) --* 

                The IDs of the subnets associated with the Express service.

                
                

                - *(string) --* 
            
          
            

            - **healthCheckPath** *(string) --* 

              The health check path for this service revision.

              
            

            - **primaryContainer** *(dict) --* 

              The primary container configuration for this service revision.

              
              

              - **image** *(string) --* 

                The image used to start a container. This string is passed directly to the Docker daemon. Images in the Docker Hub registry are available by default. Other repositories are specified with either ``repository-url/image:tag`` or ``repository-url/image@digest``.

                 

                For Express services, the image typically contains a web application that listens on the specified container port. The image can be stored in Amazon ECR, Docker Hub, or any other container registry accessible to your execution role.

                
              

              - **containerPort** *(integer) --* 

                The port number on the container that receives traffic from the load balancer. Default is 80.

                
              

              - **awsLogsConfiguration** *(dict) --* 

                The log configuration for the container.

                
                

                - **logGroup** *(string) --* 

                  The name of the CloudWatch Logs log group to send container logs to.

                  
                

                - **logStreamPrefix** *(string) --* 

                  The prefix for the CloudWatch Logs log stream names. The default for an Express service is ``ecs``.

                  
            
              

              - **repositoryCredentials** *(dict) --* 

                The configuration for repository credentials for private registry authentication.

                
                

                - **credentialsParameter** *(string) --* 

                  The Amazon Resource Name (ARN) of the secret containing the private repository credentials.

                  
            
              

              - **command** *(list) --* 

                The command that is passed to the container.

                
                

                - *(string) --* 
            
              

              - **environment** *(list) --* 

                The environment variables to pass to the container.

                
                

                - *(dict) --* 

                  A key-value pair object.

                  
                  

                  - **name** *(string) --* 

                    The name of the key-value pair. For environment variables, this is the name of the environment variable.

                    
                  

                  - **value** *(string) --* 

                    The value of the key-value pair. For environment variables, this is the value of the environment variable.

                    
              
            
              

              - **secrets** *(list) --* 

                The secrets to pass to the container.

                
                

                - *(dict) --* 

                  An object representing the secret to expose to your container. Secrets can be exposed to a container in the following ways:

                   

                  
                  * To inject sensitive data into your containers as environment variables, use the ``secrets`` container definition parameter.
                   
                  * To reference sensitive information in the log configuration of a container, use the ``secretOptions`` container definition parameter.
                  

                   

                  For more information, see `Specifying sensitive data <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data.html>`__ in the *Amazon Elastic Container Service Developer Guide*.

                  
                  

                  - **name** *(string) --* 

                    The name of the secret.

                    
                  

                  - **valueFrom** *(string) --* 

                    The secret to expose to the container. The supported values are either the full ARN of the Secrets Manager secret or the full ARN of the parameter in the SSM Parameter Store.

                     

                    For information about the require Identity and Access Management permissions, see `Required IAM permissions for Amazon ECS secrets <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data-secrets.html#secrets-iam>`__ (for Secrets Manager) or `Required IAM permissions for Amazon ECS secrets <https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data-parameters.html>`__ (for Systems Manager Parameter store) in the *Amazon Elastic Container Service Developer Guide*.

                     

                    .. note::

                      

                      If the SSM Parameter Store parameter exists in the same Region as the task you're launching, then you can use either the full ARN or name of the parameter. If the parameter exists in a different Region, then the full ARN must be specified.

                      

                    
              
            
          
            

            - **scalingTarget** *(dict) --* 

              The auto-scaling configuration for this service revision.

              
              

              - **minTaskCount** *(integer) --* 

                The minimum number of tasks to run in the Express service.

                
              

              - **maxTaskCount** *(integer) --* 

                The maximum number of tasks to run in the Express service.

                
              

              - **autoScalingMetric** *(string) --* 

                The metric used for auto-scaling decisions. The default metric used for an Express service is ``CPUUtilization``.

                
              

              - **autoScalingTargetValue** *(integer) --* 

                The target value for the auto-scaling metric. The default value for an Express service is 60.

                
          
            

            - **ingressPaths** *(list) --* 

              The entry point into this service revision.

              
              

              - *(dict) --* 

                The entry point into an Express service.

                
                

                - **accessType** *(string) --* 

                  The type of access to the endpoint for the Express service.

                  
                

                - **endpoint** *(string) --* 

                  The endpoint for access to the service.

                  
            
          
            

            - **createdAt** *(datetime) --* 

              The Unix timestamp for when this service revision was created.

              
        
      
        

        - **tags** *(list) --* 

          The metadata applied to the Express service.

          
          

          - *(dict) --* 

            The metadata that you apply to a resource to help you categorize and organize them. Each tag consists of a key and an optional value. You define them.

             

            The following basic restrictions apply to tags:

             

            
            * Maximum number of tags per resource - 50
             
            * For each resource, each tag key must be unique, and each tag key can have only one value.
             
            * Maximum key length - 128 Unicode characters in UTF-8
             
            * Maximum value length - 256 Unicode characters in UTF-8
             
            * If your tagging schema is used across multiple services and resources, remember that other services may have restrictions on allowed characters. Generally allowed characters are: letters, numbers, and spaces representable in UTF-8, and the following characters: + - = . _ : / @.
             
            * Tag keys and values are case-sensitive.
             
            * Do not use ``aws:``, ``AWS:``, or any upper or lowercase combination of such as a prefix for either keys or values as it is reserved for Amazon Web Services use. You cannot edit or delete tag keys or values with this prefix. Tags with this prefix do not count against your tags per resource limit.
            

            
            

            - **key** *(string) --* 

              One part of a key-value pair that make up a tag. A ``key`` is a general label that acts like a category for more specific tag values.

              
            

            - **value** *(string) --* 

              The optional part of a key-value pair that make up a tag. A ``value`` acts as a descriptor within a tag category (key).

              
        
      
        

        - **createdAt** *(datetime) --* 

          The Unix timestamp for when the Express service was created.

          
        

        - **updatedAt** *(datetime) --* 

          The Unix timestamp for when the Express service was last updated.

          
    
  
  **Exceptions**
  
  *   :py:class:`ECS.Client.exceptions.AccessDeniedException`

  
  *   :py:class:`ECS.Client.exceptions.ClientException`

  
  *   :py:class:`ECS.Client.exceptions.ClusterNotFoundException`

  
  *   :py:class:`ECS.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`ECS.Client.exceptions.PlatformUnknownException`

  
  *   :py:class:`ECS.Client.exceptions.PlatformTaskDefinitionIncompatibilityException`

  
  *   :py:class:`ECS.Client.exceptions.ServerException`

  
  *   :py:class:`ECS.Client.exceptions.UnsupportedFeatureException`

  