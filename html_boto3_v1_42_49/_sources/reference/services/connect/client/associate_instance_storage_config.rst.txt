:doc:`Connect <../../connect>` / Client / associate_instance_storage_config

*********************************
associate_instance_storage_config
*********************************



.. py:method:: Connect.Client.associate_instance_storage_config(**kwargs)

  

  This API is in preview release for Amazon Connect and is subject to change.

   

  Associates a storage resource type for the first time. You can only associate one type of storage configuration in a single call. This means, for example, that you can't define an instance with multiple S3 buckets for storing chat transcripts.

   

  This API does not create a resource that doesn't exist. It only associates it to the instance. Ensure that the resource being specified in the storage configuration, like an S3 bucket, exists when being used for association.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/connect-2017-08-08/AssociateInstanceStorageConfig>`_  


  **Request Syntax**
  ::

    response = client.associate_instance_storage_config(
        InstanceId='string',
        ResourceType='CHAT_TRANSCRIPTS'|'CALL_RECORDINGS'|'SCHEDULED_REPORTS'|'MEDIA_STREAMS'|'CONTACT_TRACE_RECORDS'|'AGENT_EVENTS'|'REAL_TIME_CONTACT_ANALYSIS_SEGMENTS'|'ATTACHMENTS'|'CONTACT_EVALUATIONS'|'SCREEN_RECORDINGS'|'REAL_TIME_CONTACT_ANALYSIS_CHAT_SEGMENTS'|'REAL_TIME_CONTACT_ANALYSIS_VOICE_SEGMENTS'|'EMAIL_MESSAGES',
        StorageConfig={
            'AssociationId': 'string',
            'StorageType': 'S3'|'KINESIS_VIDEO_STREAM'|'KINESIS_STREAM'|'KINESIS_FIREHOSE',
            'S3Config': {
                'BucketName': 'string',
                'BucketPrefix': 'string',
                'EncryptionConfig': {
                    'EncryptionType': 'KMS',
                    'KeyId': 'string'
                }
            },
            'KinesisVideoStreamConfig': {
                'Prefix': 'string',
                'RetentionPeriodHours': 123,
                'EncryptionConfig': {
                    'EncryptionType': 'KMS',
                    'KeyId': 'string'
                }
            },
            'KinesisStreamConfig': {
                'StreamArn': 'string'
            },
            'KinesisFirehoseConfig': {
                'FirehoseArn': 'string'
            }
        },
        ClientToken='string'
    )
    
  :type InstanceId: string
  :param InstanceId: **[REQUIRED]** 

    The identifier of the Amazon Connect instance. You can `find the instance ID <https://docs.aws.amazon.com/connect/latest/adminguide/find-instance-arn.html>`__ in the Amazon Resource Name (ARN) of the instance.

    

  
  :type ResourceType: string
  :param ResourceType: **[REQUIRED]** 

    A valid resource type. To `enable streaming for real-time analysis of contacts <https://docs.aws.amazon.com/connect/latest/adminguide/enable-contact-analysis-segment-streams.html>`__, use the following types:

     

    
    * For chat contacts, use ``REAL_TIME_CONTACT_ANALYSIS_CHAT_SEGMENTS``.
     
    * For voice contacts, use ``REAL_TIME_CONTACT_ANALYSIS_VOICE_SEGMENTS``.
    

     

    .. note::

      

      ``REAL_TIME_CONTACT_ANALYSIS_SEGMENTS`` is deprecated, but it is still supported and will apply only to VOICE channel contacts. Use ``REAL_TIME_CONTACT_ANALYSIS_VOICE_SEGMENTS`` for voice contacts moving forward.

       

      If you have previously associated a stream with ``REAL_TIME_CONTACT_ANALYSIS_SEGMENTS``, no action is needed to update the stream to ``REAL_TIME_CONTACT_ANALYSIS_VOICE_SEGMENTS``.

      

    

  
  :type StorageConfig: dict
  :param StorageConfig: **[REQUIRED]** 

    A valid storage type.

    

  
    - **AssociationId** *(string) --* 

      The existing association identifier that uniquely identifies the resource type and storage config for the given instance ID.

      

    
    - **StorageType** *(string) --* **[REQUIRED]** 

      A valid storage type.

      

    
    - **S3Config** *(dict) --* 

      The S3 bucket configuration.

      

    
      - **BucketName** *(string) --* **[REQUIRED]** 

        The S3 bucket name.

        

      
      - **BucketPrefix** *(string) --* **[REQUIRED]** 

        The S3 bucket prefix.

        

      
      - **EncryptionConfig** *(dict) --* 

        The Amazon S3 encryption configuration.

        

      
        - **EncryptionType** *(string) --* **[REQUIRED]** 

          The type of encryption.

          

        
        - **KeyId** *(string) --* **[REQUIRED]** 

          The full ARN of the encryption key.

           

          .. note::

            

            Be sure to provide the full ARN of the encryption key, not just the ID.

             

            Amazon Connect supports only KMS keys with the default key spec of `SYMMETRIC_DEFAULT <https://docs.aws.amazon.com/kms/latest/developerguide/asymmetric-key-specs.html#key-spec-symmetric-default>`__.

            

          

        
      
    
    - **KinesisVideoStreamConfig** *(dict) --* 

      The configuration of the Kinesis video stream.

      

    
      - **Prefix** *(string) --* **[REQUIRED]** 

        The prefix of the video stream.

        

      
      - **RetentionPeriodHours** *(integer) --* **[REQUIRED]** 

        The number of hours data is retained in the stream. Kinesis Video Streams retains the data in a data store that is associated with the stream.

         

        The default value is 0, indicating that the stream does not persist data.

        

      
      - **EncryptionConfig** *(dict) --* **[REQUIRED]** 

        The encryption configuration.

        

      
        - **EncryptionType** *(string) --* **[REQUIRED]** 

          The type of encryption.

          

        
        - **KeyId** *(string) --* **[REQUIRED]** 

          The full ARN of the encryption key.

           

          .. note::

            

            Be sure to provide the full ARN of the encryption key, not just the ID.

             

            Amazon Connect supports only KMS keys with the default key spec of `SYMMETRIC_DEFAULT <https://docs.aws.amazon.com/kms/latest/developerguide/asymmetric-key-specs.html#key-spec-symmetric-default>`__.

            

          

        
      
    
    - **KinesisStreamConfig** *(dict) --* 

      The configuration of the Kinesis data stream.

      

    
      - **StreamArn** *(string) --* **[REQUIRED]** 

        The Amazon Resource Name (ARN) of the data stream.

        

      
    
    - **KinesisFirehoseConfig** *(dict) --* 

      The configuration of the Kinesis Firehose delivery stream.

      

    
      - **FirehoseArn** *(string) --* **[REQUIRED]** 

        The Amazon Resource Name (ARN) of the delivery stream.

        

      
    
  
  :type ClientToken: string
  :param ClientToken: 

    A unique, case-sensitive identifier that you provide to ensure the idempotency of the request. If not provided, the Amazon Web Services SDK populates this field. For more information about idempotency, see `Making retries safe with idempotent APIs <https://aws.amazon.com/builders-library/making-retries-safe-with-idempotent-APIs/>`__.

    This field is autopopulated if not provided.

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'AssociationId': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **AssociationId** *(string) --* 

        The existing association identifier that uniquely identifies the resource type and storage config for the given instance ID.

        
  
  **Exceptions**
  
  *   :py:class:`Connect.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`Connect.Client.exceptions.ResourceConflictException`

  
  *   :py:class:`Connect.Client.exceptions.InternalServiceException`

  
  *   :py:class:`Connect.Client.exceptions.InvalidRequestException`

  
  *   :py:class:`Connect.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`Connect.Client.exceptions.ThrottlingException`

  