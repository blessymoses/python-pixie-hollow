:doc:`CloudWatchRUM <../../rum>` / Client / update_rum_metric_definition

****************************
update_rum_metric_definition
****************************



.. py:method:: CloudWatchRUM.Client.update_rum_metric_definition(**kwargs)

  

  Modifies one existing metric definition for CloudWatch RUM extended metrics. For more information about extended metrics, see `BatchCreateRumMetricsDefinitions <https://docs.aws.amazon.com/cloudwatchrum/latest/APIReference/API_BatchCreateRumMetricsDefinitions.html>`__.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/rum-2018-05-10/UpdateRumMetricDefinition>`_  


  **Request Syntax**
  ::

    response = client.update_rum_metric_definition(
        AppMonitorName='string',
        Destination='CloudWatch'|'Evidently',
        DestinationArn='string',
        MetricDefinition={
            'Name': 'string',
            'ValueKey': 'string',
            'UnitLabel': 'string',
            'DimensionKeys': {
                'string': 'string'
            },
            'EventPattern': 'string',
            'Namespace': 'string'
        },
        MetricDefinitionId='string'
    )
    
  :type AppMonitorName: string
  :param AppMonitorName: **[REQUIRED]** 

    The name of the CloudWatch RUM app monitor that sends these metrics.

    

  
  :type Destination: string
  :param Destination: **[REQUIRED]** 

    The destination to send the metrics to. Valid values are ``CloudWatch`` and ``Evidently``. If you specify ``Evidently``, you must also specify the ARN of the CloudWatchEvidently experiment that will receive the metrics and an IAM role that has permission to write to the experiment.

    

  
  :type DestinationArn: string
  :param DestinationArn: 

    This parameter is required if ``Destination`` is ``Evidently``. If ``Destination`` is ``CloudWatch``, do not use this parameter.

     

    This parameter specifies the ARN of the Evidently experiment that is to receive the metrics. You must have already defined this experiment as a valid destination. For more information, see `PutRumMetricsDestination <https://docs.aws.amazon.com/cloudwatchrum/latest/APIReference/API_PutRumMetricsDestination.html>`__.

    

  
  :type MetricDefinition: dict
  :param MetricDefinition: **[REQUIRED]** 

    A structure that contains the new definition that you want to use for this metric.

    

  
    - **Name** *(string) --* **[REQUIRED]** 

      The name for the metric that is defined in this structure. For custom metrics, you can specify any name that you like. For extended metrics, valid values are the following:

       

      
      * ``PerformanceNavigationDuration``
       
      * ``PerformanceResourceDuration``
       
      * ``NavigationSatisfiedTransaction``
       
      * ``NavigationToleratedTransaction``
       
      * ``NavigationFrustratedTransaction``
       
      * ``WebVitalsCumulativeLayoutShift``
       
      * ``WebVitalsFirstInputDelay``
       
      * ``WebVitalsLargestContentfulPaint``
       
      * ``JsErrorCount``
       
      * ``HttpErrorCount``
       
      * ``SessionCount``
      

      

    
    - **ValueKey** *(string) --* 

      The field within the event object that the metric value is sourced from.

       

      If you omit this field, a hardcoded value of 1 is pushed as the metric value. This is useful if you want to count the number of events that the filter catches.

       

      If this metric is sent to CloudWatch Evidently, this field will be passed to Evidently raw. Evidently will handle data extraction from the event.

      

    
    - **UnitLabel** *(string) --* 

      The CloudWatch metric unit to use for this metric. If you omit this field, the metric is recorded with no unit.

      

    
    - **DimensionKeys** *(dict) --* 

      Use this field only if you are sending the metric to CloudWatch.

       

      This field is a map of field paths to dimension names. It defines the dimensions to associate with this metric in CloudWatch. For extended metrics, valid values for the entries in this field are the following:

       

      
      * ``"metadata.pageId": "PageId"``
       
      * ``"metadata.browserName": "BrowserName"``
       
      * ``"metadata.deviceType": "DeviceType"``
       
      * ``"metadata.osName": "OSName"``
       
      * ``"metadata.countryCode": "CountryCode"``
       
      * ``"event_details.fileType": "FileType"``
      

       

      For both extended metrics and custom metrics, all dimensions listed in this field must also be included in ``EventPattern``.

      

    
      - *(string) --* 

      
        - *(string) --* 

        
  

    - **EventPattern** *(string) --* 

      The pattern that defines the metric, specified as a JSON object. RUM checks events that happen in a user's session against the pattern, and events that match the pattern are sent to the metric destination.

       

      When you define extended metrics, the metric definition is not valid if ``EventPattern`` is omitted.

       

      Example event patterns:

       

      
      * ``'{ "event_type": ["com.amazon.rum.js_error_event"], "metadata": { "browserName": [ "Chrome", "Safari" ], } }'``
       
      * ``'{ "event_type": ["com.amazon.rum.performance_navigation_event"], "metadata": { "browserName": [ "Chrome", "Firefox" ] }, "event_details": { "duration": [{ "numeric": [ "<", 2000 ] }] } }'``
       
      * ``'{ "event_type": ["com.amazon.rum.performance_navigation_event"], "metadata": { "browserName": [ "Chrome", "Safari" ], "countryCode": [ "US" ] }, "event_details": { "duration": [{ "numeric": [ ">=", 2000, "<", 8000 ] }] } }'``
      

       

      If the metrics destination is ``CloudWatch`` and the event also matches a value in ``DimensionKeys``, then the metric is published with the specified dimensions.

      

    
    - **Namespace** *(string) --* 

      If this structure is for a custom metric instead of an extended metrics, use this parameter to define the metric namespace for that custom metric. Do not specify this parameter if this structure is for an extended metric.

       

      You cannot use any string that starts with ``AWS/`` for your namespace.

      

    
  
  :type MetricDefinitionId: string
  :param MetricDefinitionId: **[REQUIRED]** 

    The ID of the metric definition to update.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {}
      
    **Response Structure**

    

    - *(dict) --* 
  
  **Exceptions**
  
  *   :py:class:`CloudWatchRUM.Client.exceptions.ConflictException`

  
  *   :py:class:`CloudWatchRUM.Client.exceptions.ServiceQuotaExceededException`

  
  *   :py:class:`CloudWatchRUM.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`CloudWatchRUM.Client.exceptions.InternalServerException`

  
  *   :py:class:`CloudWatchRUM.Client.exceptions.ValidationException`

  
  *   :py:class:`CloudWatchRUM.Client.exceptions.ThrottlingException`

  
  *   :py:class:`CloudWatchRUM.Client.exceptions.AccessDeniedException`

  