:doc:`Budgets <../../budgets>` / Client / update_budget

*************
update_budget
*************



.. py:method:: Budgets.Client.update_budget(**kwargs)

  

  Updates a budget. You can change every part of a budget except for the ``budgetName`` and the ``calculatedSpend``. When you modify a budget, the ``calculatedSpend`` drops to zero until Amazon Web Services has new usage data to use for forecasting.

   

  .. warning::

     

    Only one of ``BudgetLimit`` or ``PlannedBudgetLimits`` can be present in the syntax at one time. Use the syntax that matches your case. The Request Syntax section shows the ``BudgetLimit`` syntax. For ``PlannedBudgetLimits``, see the `Examples <https://docs.aws.amazon.com/aws-cost-management/latest/APIReference/API_budgets_UpdateBudget.html#API_UpdateBudget_Examples>`__ section.

     

    Similarly, only one set of filter and metric selections can be present in the syntax at one time. Either ``FilterExpression`` and ``Metrics`` or ``CostFilters`` and ``CostTypes``, not both or a different combination. We recommend using ``FilterExpression`` and ``Metrics`` as they provide more flexible and powerful filtering capabilities. The Request Syntax section shows the ``FilterExpression``/ ``Metrics`` syntax.

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/budgets-2016-10-20/UpdateBudget>`_  


  **Request Syntax**
  ::

    response = client.update_budget(
        AccountId='string',
        NewBudget={
            'BudgetName': 'string',
            'BudgetLimit': {
                'Amount': 'string',
                'Unit': 'string'
            },
            'PlannedBudgetLimits': {
                'string': {
                    'Amount': 'string',
                    'Unit': 'string'
                }
            },
            'CostFilters': {
                'string': [
                    'string',
                ]
            },
            'CostTypes': {
                'IncludeTax': True|False,
                'IncludeSubscription': True|False,
                'UseBlended': True|False,
                'IncludeRefund': True|False,
                'IncludeCredit': True|False,
                'IncludeUpfront': True|False,
                'IncludeRecurring': True|False,
                'IncludeOtherSubscription': True|False,
                'IncludeSupport': True|False,
                'IncludeDiscount': True|False,
                'UseAmortized': True|False
            },
            'TimeUnit': 'DAILY'|'MONTHLY'|'QUARTERLY'|'ANNUALLY'|'CUSTOM',
            'TimePeriod': {
                'Start': datetime(2015, 1, 1),
                'End': datetime(2015, 1, 1)
            },
            'CalculatedSpend': {
                'ActualSpend': {
                    'Amount': 'string',
                    'Unit': 'string'
                },
                'ForecastedSpend': {
                    'Amount': 'string',
                    'Unit': 'string'
                }
            },
            'BudgetType': 'USAGE'|'COST'|'RI_UTILIZATION'|'RI_COVERAGE'|'SAVINGS_PLANS_UTILIZATION'|'SAVINGS_PLANS_COVERAGE',
            'LastUpdatedTime': datetime(2015, 1, 1),
            'AutoAdjustData': {
                'AutoAdjustType': 'HISTORICAL'|'FORECAST',
                'HistoricalOptions': {
                    'BudgetAdjustmentPeriod': 123,
                    'LookBackAvailablePeriods': 123
                },
                'LastAutoAdjustTime': datetime(2015, 1, 1)
            },
            'FilterExpression': {
                'Or': [
                    {'... recursive ...'},
                ],
                'And': [
                    {'... recursive ...'},
                ],
                'Not': {'... recursive ...'},
                'Dimensions': {
                    'Key': 'AZ'|'INSTANCE_TYPE'|'LINKED_ACCOUNT'|'LINKED_ACCOUNT_NAME'|'OPERATION'|'PURCHASE_TYPE'|'REGION'|'SERVICE'|'SERVICE_CODE'|'USAGE_TYPE'|'USAGE_TYPE_GROUP'|'RECORD_TYPE'|'OPERATING_SYSTEM'|'TENANCY'|'SCOPE'|'PLATFORM'|'SUBSCRIPTION_ID'|'LEGAL_ENTITY_NAME'|'INVOICING_ENTITY'|'DEPLOYMENT_OPTION'|'DATABASE_ENGINE'|'CACHE_ENGINE'|'INSTANCE_TYPE_FAMILY'|'BILLING_ENTITY'|'RESERVATION_ID'|'RESOURCE_ID'|'RIGHTSIZING_TYPE'|'SAVINGS_PLANS_TYPE'|'SAVINGS_PLAN_ARN'|'PAYMENT_OPTION'|'RESERVATION_MODIFIED'|'TAG_KEY'|'COST_CATEGORY_NAME',
                    'Values': [
                        'string',
                    ],
                    'MatchOptions': [
                        'EQUALS'|'ABSENT'|'STARTS_WITH'|'ENDS_WITH'|'CONTAINS'|'GREATER_THAN_OR_EQUAL'|'CASE_SENSITIVE'|'CASE_INSENSITIVE',
                    ]
                },
                'Tags': {
                    'Key': 'string',
                    'Values': [
                        'string',
                    ],
                    'MatchOptions': [
                        'EQUALS'|'ABSENT'|'STARTS_WITH'|'ENDS_WITH'|'CONTAINS'|'GREATER_THAN_OR_EQUAL'|'CASE_SENSITIVE'|'CASE_INSENSITIVE',
                    ]
                },
                'CostCategories': {
                    'Key': 'string',
                    'Values': [
                        'string',
                    ],
                    'MatchOptions': [
                        'EQUALS'|'ABSENT'|'STARTS_WITH'|'ENDS_WITH'|'CONTAINS'|'GREATER_THAN_OR_EQUAL'|'CASE_SENSITIVE'|'CASE_INSENSITIVE',
                    ]
                }
            },
            'Metrics': [
                'BlendedCost'|'UnblendedCost'|'AmortizedCost'|'NetUnblendedCost'|'NetAmortizedCost'|'UsageQuantity'|'NormalizedUsageAmount'|'Hours',
            ],
            'BillingViewArn': 'string',
            'HealthStatus': {
                'Status': 'HEALTHY'|'UNHEALTHY',
                'StatusReason': 'BILLING_VIEW_NO_ACCESS'|'BILLING_VIEW_UNHEALTHY'|'FILTER_INVALID'|'MULTI_YEAR_HISTORICAL_DATA_DISABLED',
                'LastUpdatedTime': datetime(2015, 1, 1)
            }
        }
    )
    
  :type AccountId: string
  :param AccountId: **[REQUIRED]** 

    The ``accountId`` that is associated with the budget that you want to update.

    

  
  :type NewBudget: dict
  :param NewBudget: **[REQUIRED]** 

    The budget that you want to update your budget to.

    

  
    - **BudgetName** *(string) --* **[REQUIRED]** 

      The name of a budget. The name must be unique within an account. The ``:`` and ``\`` characters, and the "/action/" substring, aren't allowed in ``BudgetName``.

      

    
    - **BudgetLimit** *(dict) --* 

      The total amount of cost, usage, RI utilization, RI coverage, Savings Plans utilization, or Savings Plans coverage that you want to track with your budget.

       

      ``BudgetLimit`` is required for cost or usage budgets, but optional for RI or Savings Plans utilization or coverage budgets. RI and Savings Plans utilization or coverage budgets default to ``100``. This is the only valid value for RI or Savings Plans utilization or coverage budgets. You can't use ``BudgetLimit`` with ``PlannedBudgetLimits`` for ``CreateBudget`` and ``UpdateBudget`` actions.

      

    
      - **Amount** *(string) --* **[REQUIRED]** 

        The cost or usage amount that's associated with a budget forecast, actual spend, or budget threshold.

        

      
      - **Unit** *(string) --* **[REQUIRED]** 

        The unit of measurement that's used for the budget forecast, actual spend, or budget threshold.

        

      
    
    - **PlannedBudgetLimits** *(dict) --* 

      A map containing multiple ``BudgetLimit``, including current or future limits.

       

      ``PlannedBudgetLimits`` is available for cost or usage budget and supports both monthly and quarterly ``TimeUnit``.

       

      For monthly budgets, provide 12 months of ``PlannedBudgetLimits`` values. This must start from the current month and include the next 11 months. The ``key`` is the start of the month, ``UTC`` in epoch seconds.

       

      For quarterly budgets, provide four quarters of ``PlannedBudgetLimits`` value entries in standard calendar quarter increments. This must start from the current quarter and include the next three quarters. The ``key`` is the start of the quarter, ``UTC`` in epoch seconds.

       

      If the planned budget expires before 12 months for monthly or four quarters for quarterly, provide the ``PlannedBudgetLimits`` values only for the remaining periods.

       

      If the budget begins at a date in the future, provide ``PlannedBudgetLimits`` values from the start date of the budget.

       

      After all of the ``BudgetLimit`` values in ``PlannedBudgetLimits`` are used, the budget continues to use the last limit as the ``BudgetLimit``. At that point, the planned budget provides the same experience as a fixed budget.

       

      ``DescribeBudget`` and ``DescribeBudgets`` response along with ``PlannedBudgetLimits`` also contain ``BudgetLimit`` representing the current month or quarter limit present in ``PlannedBudgetLimits``. This only applies to budgets that are created with ``PlannedBudgetLimits``. Budgets that are created without ``PlannedBudgetLimits`` only contain ``BudgetLimit``. They don't contain ``PlannedBudgetLimits``.

      

    
      - *(string) --* 

        A generic string.

        

      
        - *(dict) --* 

          The amount of cost or usage that's measured for a budget.

           

          *Cost example:* A ``Spend`` for ``3 USD`` of costs has the following parameters:

           

          
          * An ``Amount`` of ``3``
           
          * A ``Unit`` of ``USD``
          

           

          *Usage example:* A ``Spend`` for ``3 GB`` of S3 usage has the following parameters:

           

          
          * An ``Amount`` of ``3``
           
          * A ``Unit`` of ``GB``
          

          

        
          - **Amount** *(string) --* **[REQUIRED]** 

            The cost or usage amount that's associated with a budget forecast, actual spend, or budget threshold.

            

          
          - **Unit** *(string) --* **[REQUIRED]** 

            The unit of measurement that's used for the budget forecast, actual spend, or budget threshold.

            

          
        
  

    - **CostFilters** *(dict) --* 

      The cost filters, such as ``Region``, ``Service``, ``LinkedAccount``, ``Tag``, or ``CostCategory``, that are applied to a budget.

       

      Amazon Web Services Budgets supports the following services as a ``Service`` filter for RI budgets:

       

      
      * Amazon EC2
       
      * Amazon Redshift
       
      * Amazon Relational Database Service
       
      * Amazon ElastiCache
       
      * Amazon OpenSearch Service
      

      

    
      - *(string) --* 

        A generic string.

        

      
        - *(list) --* 

        
          - *(string) --* 

          
      
  

    - **CostTypes** *(dict) --* 

      The types of costs that are included in this ``COST`` budget.

       

      ``USAGE``, ``RI_UTILIZATION``, ``RI_COVERAGE``, ``SAVINGS_PLANS_UTILIZATION``, and ``SAVINGS_PLANS_COVERAGE`` budgets do not have ``CostTypes``.

      

    
      - **IncludeTax** *(boolean) --* 

        Specifies whether a budget includes taxes.

         

        The default value is ``true``.

        

      
      - **IncludeSubscription** *(boolean) --* 

        Specifies whether a budget includes subscriptions.

         

        The default value is ``true``.

        

      
      - **UseBlended** *(boolean) --* 

        Specifies whether a budget uses a blended rate.

         

        The default value is ``false``.

        

      
      - **IncludeRefund** *(boolean) --* 

        Specifies whether a budget includes refunds.

         

        The default value is ``true``.

        

      
      - **IncludeCredit** *(boolean) --* 

        Specifies whether a budget includes credits.

         

        The default value is ``true``.

        

      
      - **IncludeUpfront** *(boolean) --* 

        Specifies whether a budget includes upfront RI costs.

         

        The default value is ``true``.

        

      
      - **IncludeRecurring** *(boolean) --* 

        Specifies whether a budget includes recurring fees such as monthly RI fees.

         

        The default value is ``true``.

        

      
      - **IncludeOtherSubscription** *(boolean) --* 

        Specifies whether a budget includes non-RI subscription costs.

         

        The default value is ``true``.

        

      
      - **IncludeSupport** *(boolean) --* 

        Specifies whether a budget includes support subscription fees.

         

        The default value is ``true``.

        

      
      - **IncludeDiscount** *(boolean) --* 

        Specifies whether a budget includes discounts.

         

        The default value is ``true``.

        

      
      - **UseAmortized** *(boolean) --* 

        Specifies whether a budget uses the amortized rate.

         

        The default value is ``false``.

        

      
    
    - **TimeUnit** *(string) --* **[REQUIRED]** 

      The length of time until a budget resets the actual and forecasted spend.

      

    
    - **TimePeriod** *(dict) --* 

      The period of time that's covered by a budget. You set the start date and end date. The start date must come before the end date. The end date must come before ``06/15/87 00:00 UTC``.

       

      If you create your budget and don't specify a start date, Amazon Web Services defaults to the start of your chosen time period (DAILY, MONTHLY, QUARTERLY, ANNUALLY, or CUSTOM). For example, if you created your budget on January 24, 2018, chose ``DAILY``, and didn't set a start date, Amazon Web Services set your start date to ``01/24/18 00:00 UTC``. If you chose ``MONTHLY``, Amazon Web Services set your start date to ``01/01/18 00:00 UTC``. If you didn't specify an end date, Amazon Web Services set your end date to ``06/15/87 00:00 UTC``. The defaults are the same for the Billing and Cost Management console and the API.

       

      You can change either date with the ``UpdateBudget`` operation.

       

      After the end date, Amazon Web Services deletes the budget and all the associated notifications and subscribers.

      

    
      - **Start** *(datetime) --* 

        The start date for a budget. If you created your budget and didn't specify a start date, Amazon Web Services defaults to the start of your chosen time period (DAILY, MONTHLY, QUARTERLY, ANNUALLY, or CUSTOM). For example, if you created your budget on January 24, 2018, chose ``DAILY``, and didn't set a start date, Amazon Web Services set your start date to ``01/24/18 00:00 UTC``. If you chose ``MONTHLY``, Amazon Web Services set your start date to ``01/01/18 00:00 UTC``. The defaults are the same for the Billing and Cost Management console and the API.

         

        You can change your start date with the ``UpdateBudget`` operation.

        

      
      - **End** *(datetime) --* 

        The end date for a budget. If you didn't specify an end date, Amazon Web Services set your end date to ``06/15/87 00:00 UTC``. The defaults are the same for the Billing and Cost Management console and the API.

         

        After the end date, Amazon Web Services deletes the budget and all the associated notifications and subscribers. You can change your end date with the ``UpdateBudget`` operation.

        

      
    
    - **CalculatedSpend** *(dict) --* 

      The actual and forecasted cost or usage that the budget tracks.

      

    
      - **ActualSpend** *(dict) --* **[REQUIRED]** 

        The amount of cost, usage, RI units, or Savings Plans units that you used.

        

      
        - **Amount** *(string) --* **[REQUIRED]** 

          The cost or usage amount that's associated with a budget forecast, actual spend, or budget threshold.

          

        
        - **Unit** *(string) --* **[REQUIRED]** 

          The unit of measurement that's used for the budget forecast, actual spend, or budget threshold.

          

        
      
      - **ForecastedSpend** *(dict) --* 

        The amount of cost, usage, RI units, or Savings Plans units that you're forecasted to use.

        

      
        - **Amount** *(string) --* **[REQUIRED]** 

          The cost or usage amount that's associated with a budget forecast, actual spend, or budget threshold.

          

        
        - **Unit** *(string) --* **[REQUIRED]** 

          The unit of measurement that's used for the budget forecast, actual spend, or budget threshold.

          

        
      
    
    - **BudgetType** *(string) --* **[REQUIRED]** 

      Specifies whether this budget tracks costs, usage, RI utilization, RI coverage, Savings Plans utilization, or Savings Plans coverage.

      

    
    - **LastUpdatedTime** *(datetime) --* 

      The last time that you updated this budget.

      

    
    - **AutoAdjustData** *(dict) --* 

      The parameters that determine the budget amount for an auto-adjusting budget.

      

    
      - **AutoAdjustType** *(string) --* **[REQUIRED]** 

        The string that defines whether your budget auto-adjusts based on historical or forecasted data.

        

      
      - **HistoricalOptions** *(dict) --* 

        The parameters that define or describe the historical data that your auto-adjusting budget is based on.

        

      
        - **BudgetAdjustmentPeriod** *(integer) --* **[REQUIRED]** 

          The number of budget periods included in the moving-average calculation that determines your auto-adjusted budget amount. The maximum value depends on the ``TimeUnit`` granularity of the budget:

           

          
          * For the ``DAILY`` granularity, the maximum value is ``60``.
           
          * For the ``MONTHLY`` granularity, the maximum value is ``12``.
           
          * For the ``QUARTERLY`` granularity, the maximum value is ``4``.
           
          * For the ``ANNUALLY`` granularity, the maximum value is ``1``.
          

          

        
        - **LookBackAvailablePeriods** *(integer) --* 

          The integer that describes how many budget periods in your ``BudgetAdjustmentPeriod`` are included in the calculation of your current ``BudgetLimit``. If the first budget period in your ``BudgetAdjustmentPeriod`` has no cost data, then that budget period isn’t included in the average that determines your budget limit.

           

          For example, if you set ``BudgetAdjustmentPeriod`` as ``4`` quarters, but your account had no cost data in the first quarter, then only the last three quarters are included in the calculation. In this scenario, ``LookBackAvailablePeriods`` returns ``3``.

           

          You can’t set your own ``LookBackAvailablePeriods``. The value is automatically calculated from the ``BudgetAdjustmentPeriod`` and your historical cost data.

          

        
      
      - **LastAutoAdjustTime** *(datetime) --* 

        The last time that your budget was auto-adjusted.

        

      
    
    - **FilterExpression** *(dict) --* 

      The filtering dimensions for the budget and their corresponding values.

      

    
      - **Or** *(list) --* 

        Return results that match either Dimension object.

        

      
        - *(dict) --* 

          Use Expression to filter in various Budgets APIs.

          

        
    
      - **And** *(list) --* 

        Return results that match both Dimension objects.

        

      
        - *(dict) --* 

          Use Expression to filter in various Budgets APIs.

          

        
    
      - **Not** *(dict) --* 

        Return results that don't match a Dimension object.

        

      
      - **Dimensions** *(dict) --* 

        The specific Dimension to use for Expression.

        

      
        - **Key** *(string) --* **[REQUIRED]** 

          The name of the dimension that you want to filter on.

          

        
        - **Values** *(list) --* **[REQUIRED]** 

          The metadata values you can specify to filter upon, so that the results all match at least one of the specified values.

          

        
          - *(string) --* 

          
      
        - **MatchOptions** *(list) --* 

          The match options that you can use to filter your results. You can specify only one of these values in the array.

          

        
          - *(string) --* 

          
      
      
      - **Tags** *(dict) --* 

        The specific Tag to use for Expression.

        

      
        - **Key** *(string) --* 

          The key for the tag.

          

        
        - **Values** *(list) --* 

          The specific value of the tag.

          

        
          - *(string) --* 

          
      
        - **MatchOptions** *(list) --* 

          The match options that you can use to filter your results.

          

        
          - *(string) --* 

          
      
      
      - **CostCategories** *(dict) --* 

        The filter that's based on CostCategoryValues.

        

      
        - **Key** *(string) --* 

          The unique name of the cost category.

          

        
        - **Values** *(list) --* 

          The specific value of the cost category.

          

        
          - *(string) --* 

          
      
        - **MatchOptions** *(list) --* 

          The match options that you can use to filter your results.

          

        
          - *(string) --* 

          
      
      
    
    - **Metrics** *(list) --* 

      The definition for how the budget data is aggregated.

      

    
      - *(string) --* 

      
  
    - **BillingViewArn** *(string) --* 

      The Amazon Resource Name (ARN) that uniquely identifies a specific billing view. The ARN is used to specify which particular billing view you want to interact with or retrieve information from when making API calls related to Amazon Web Services Billing and Cost Management features. The BillingViewArn can be retrieved by calling the ListBillingViews API.

      

    
    - **HealthStatus** *(dict) --* 

      The current operational state of a Billing View derived resource.

      

    
      - **Status** *(string) --* 

        The current status of the billing view resource.

        

      
      - **StatusReason** *(string) --* 

        The reason for the current status.

         

        
        * ``BILLING_VIEW_NO_ACCESS``: The billing view resource does not grant ``billing:GetBillingViewData`` permission to this account.
         
        * ``BILLING_VIEW_UNHEALTHY``: The billing view associated with the budget is unhealthy.
         
        * ``FILTER_INVALID``: The filter contains reference to an account you do not have access to.
         
        * ``MULTI_YEAR_HISTORICAL_DATA_DISABLED``: The budget is not being updated. Enable multi-year historical data in your Cost Management preferences.
        

        

      
      - **LastUpdatedTime** *(datetime) --* 

        A generic time stamp. In Java, it's transformed to a ``Date`` object.

        

      
    
  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {}
      
    **Response Structure**

    

    - *(dict) --* 

      Response of UpdateBudget

      
  
  **Exceptions**
  
  *   :py:class:`Budgets.Client.exceptions.InternalErrorException`

  
  *   :py:class:`Budgets.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`Budgets.Client.exceptions.BillingViewHealthStatusException`

  
  *   :py:class:`Budgets.Client.exceptions.NotFoundException`

  
  *   :py:class:`Budgets.Client.exceptions.AccessDeniedException`

  
  *   :py:class:`Budgets.Client.exceptions.ThrottlingException`

  
  *   :py:class:`Budgets.Client.exceptions.ServiceQuotaExceededException`

  