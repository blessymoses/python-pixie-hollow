:doc:`KMS <../../kms>` / Client / enable_key_rotation

*******************
enable_key_rotation
*******************



.. py:method:: KMS.Client.enable_key_rotation(**kwargs)

  

  Enables `automatic rotation of the key material <https://docs.aws.amazon.com/kms/latest/developerguide/rotating-keys-enable-disable.html>`__ of the specified symmetric encryption KMS key.

   

  By default, when you enable automatic rotation of a `customer managed KMS key <https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#customer-mgn-key>`__, KMS rotates the key material of the KMS key one year (approximately 365 days) from the enable date and every year thereafter. You can use the optional ``RotationPeriodInDays`` parameter to specify a custom rotation period when you enable key rotation, or you can use ``RotationPeriodInDays`` to modify the rotation period of a key that you previously enabled automatic key rotation on.

   

  You can monitor rotation of the key material for your KMS keys in CloudTrail and Amazon CloudWatch. To disable rotation of the key material in a customer managed KMS key, use the  DisableKeyRotation operation. You can use the  GetKeyRotationStatus operation to identify any in progress rotations. You can use the  ListKeyRotations operation to view the details of completed rotations.

   

  Automatic key rotation is supported only on symmetric encryption KMS keys. You cannot enable automatic rotation of `asymmetric KMS keys <https://docs.aws.amazon.com/kms/latest/developerguide/symmetric-asymmetric.html>`__, `HMAC KMS keys <https://docs.aws.amazon.com/kms/latest/developerguide/hmac.html>`__, KMS keys with `imported key material <https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html>`__, or KMS keys in a `custom key store <https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html>`__. To enable or disable automatic rotation of a set of related `multi-Region keys <https://docs.aws.amazon.com/kms/latest/developerguide/rotate-keys.html#multi-region-rotate>`__, set the property on the primary key.

   

  You cannot enable or disable automatic rotation of `Amazon Web Services managed KMS keys <https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#aws-managed-key>`__. KMS always rotates the key material of Amazon Web Services managed keys every year. Rotation of `Amazon Web Services owned KMS keys <https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#aws-owned-key>`__ is managed by the Amazon Web Services service that owns the key.

   

  .. note::

    

    In May 2022, KMS changed the rotation schedule for Amazon Web Services managed keys from every three years (approximately 1,095 days) to every year (approximately 365 days).

     

    New Amazon Web Services managed keys are automatically rotated one year after they are created, and approximately every year thereafter.

     

    Existing Amazon Web Services managed keys are automatically rotated one year after their most recent rotation, and every year thereafter.

    

   

  The KMS key that you use for this operation must be in a compatible key state. For details, see `Key states of KMS keys <https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html>`__ in the *Key Management Service Developer Guide*.

   

  **Cross-account use**: No. You cannot perform this operation on a KMS key in a different Amazon Web Services account.

   

  **Required permissions**: `kms\:EnableKeyRotation <https://docs.aws.amazon.com/kms/latest/developerguide/kms-api-permissions-reference.html>`__ (key policy)

   

  **Related operations:**

   

  
  *  DisableKeyRotation
   
  *  GetKeyRotationStatus
   
  *  ListKeyRotations
   
  *  RotateKeyOnDemand 

  .. note::

    You can perform on-demand (  RotateKeyOnDemand) rotation of the key material in customer managed KMS keys, regardless of whether or not automatic key rotation is enabled.

  
  

   

  **Eventual consistency**: The KMS API follows an eventual consistency model. For more information, see `KMS eventual consistency <https://docs.aws.amazon.com/kms/latest/developerguide/accessing-kms.html#programming-eventual-consistency>`__.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/kms-2014-11-01/EnableKeyRotation>`_  


  **Request Syntax**
  ::

    response = client.enable_key_rotation(
        KeyId='string',
        RotationPeriodInDays=123
    )
    
  :type KeyId: string
  :param KeyId: **[REQUIRED]** 

    Identifies a symmetric encryption KMS key. You cannot enable automatic rotation of `asymmetric KMS keys <https://docs.aws.amazon.com/kms/latest/developerguide/symmetric-asymmetric.html>`__, `HMAC KMS keys <https://docs.aws.amazon.com/kms/latest/developerguide/hmac.html>`__, KMS keys with `imported key material <https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html>`__, or KMS keys in a `custom key store <https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html>`__. To enable or disable automatic rotation of a set of related `multi-Region keys <https://docs.aws.amazon.com/kms/latest/developerguide/rotate-keys.html#multi-region-rotate>`__, set the property on the primary key.

     

    Specify the key ID or key ARN of the KMS key.

     

    For example:

     

    
    * Key ID: ``1234abcd-12ab-34cd-56ef-1234567890ab``
     
    * Key ARN: ``arn:aws:kms:us-east-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab``
    

     

    To get the key ID and key ARN for a KMS key, use  ListKeys or  DescribeKey.

    

  
  :type RotationPeriodInDays: integer
  :param RotationPeriodInDays: 

    Use this parameter to specify a custom period of time between each rotation date. If no value is specified, the default value is 365 days.

     

    The rotation period defines the number of days after you enable automatic key rotation that KMS will rotate your key material, and the number of days between each automatic rotation thereafter.

     

    You can use the `kms\:RotationPeriodInDays <https://docs.aws.amazon.com/kms/latest/developerguide/conditions-kms.html#conditions-kms-rotation-period-in-days>`__ condition key to further constrain the values that principals can specify in the ``RotationPeriodInDays`` parameter.

    

  
  
  :returns: None
  **Exceptions**
  
  *   :py:class:`KMS.Client.exceptions.NotFoundException`

  
  *   :py:class:`KMS.Client.exceptions.DisabledException`

  
  *   :py:class:`KMS.Client.exceptions.InvalidArnException`

  
  *   :py:class:`KMS.Client.exceptions.DependencyTimeoutException`

  
  *   :py:class:`KMS.Client.exceptions.KMSInternalException`

  
  *   :py:class:`KMS.Client.exceptions.KMSInvalidStateException`

  
  *   :py:class:`KMS.Client.exceptions.UnsupportedOperationException`

  

  **Examples**

  The following example enables automatic annual rotation of the key material for the specified KMS key.
  ::

    response = client.enable_key_rotation(
        # The identifier of the KMS key whose key material will be rotated annually. You can use the key ID or the Amazon Resource Name (ARN) of the KMS key.
        KeyId='1234abcd-12ab-34cd-56ef-1234567890ab',
    )
    
    print(response)

  
  Expected Output:
  ::

    {
        'ResponseMetadata': {
            '...': '...',
        },
    }

  