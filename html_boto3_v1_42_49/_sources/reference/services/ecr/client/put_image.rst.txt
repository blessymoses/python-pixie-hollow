:doc:`ECR <../../ecr>` / Client / put_image

*********
put_image
*********



.. py:method:: ECR.Client.put_image(**kwargs)

  

  Creates or updates the image manifest and tags associated with an image.

   

  When an image is pushed and all new image layers have been uploaded, the PutImage API is called once to create or update the image manifest and the tags associated with the image.

   

  .. note::

    

    This operation is used by the Amazon ECR proxy and is not generally used by customers for pulling and pushing images. In most cases, you should use the ``docker`` CLI to pull, tag, and push images.

    

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ecr-2015-09-21/PutImage>`_  


  **Request Syntax**
  ::

    response = client.put_image(
        registryId='string',
        repositoryName='string',
        imageManifest='string',
        imageManifestMediaType='string',
        imageTag='string',
        imageDigest='string'
    )
    
  :type registryId: string
  :param registryId: 

    The Amazon Web Services account ID associated with the registry that contains the repository in which to put the image. If you do not specify a registry, the default registry is assumed.

    

  
  :type repositoryName: string
  :param repositoryName: **[REQUIRED]** 

    The name of the repository in which to put the image.

    

  
  :type imageManifest: string
  :param imageManifest: **[REQUIRED]** 

    The image manifest corresponding to the image to be uploaded.

    

  
  :type imageManifestMediaType: string
  :param imageManifestMediaType: 

    The media type of the image manifest. If you push an image manifest that does not contain the ``mediaType`` field, you must specify the ``imageManifestMediaType`` in the request.

    

  
  :type imageTag: string
  :param imageTag: 

    The tag to associate with the image. This parameter is optional.

    

  
  :type imageDigest: string
  :param imageDigest: 

    The image digest of the image manifest corresponding to the image.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'image': {
              'registryId': 'string',
              'repositoryName': 'string',
              'imageId': {
                  'imageDigest': 'string',
                  'imageTag': 'string'
              },
              'imageManifest': 'string',
              'imageManifestMediaType': 'string'
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **image** *(dict) --* 

        Details of the image uploaded.

        
        

        - **registryId** *(string) --* 

          The Amazon Web Services account ID associated with the registry containing the image.

          
        

        - **repositoryName** *(string) --* 

          The name of the repository associated with the image.

          
        

        - **imageId** *(dict) --* 

          An object containing the image tag and image digest associated with an image.

          
          

          - **imageDigest** *(string) --* 

            The ``sha256`` digest of the image manifest.

            
          

          - **imageTag** *(string) --* 

            The tag used for the image.

            
      
        

        - **imageManifest** *(string) --* 

          The image manifest associated with the image.

          
        

        - **imageManifestMediaType** *(string) --* 

          The manifest media type of the image.

          
    
  
  **Exceptions**
  
  *   :py:class:`ECR.Client.exceptions.ServerException`

  
  *   :py:class:`ECR.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`ECR.Client.exceptions.RepositoryNotFoundException`

  
  *   :py:class:`ECR.Client.exceptions.ImageAlreadyExistsException`

  
  *   :py:class:`ECR.Client.exceptions.LayersNotFoundException`

  
  *   :py:class:`ECR.Client.exceptions.ReferencedImagesNotFoundException`

  
  *   :py:class:`ECR.Client.exceptions.LimitExceededException`

  
  *   :py:class:`ECR.Client.exceptions.ImageTagAlreadyExistsException`

  
  *   :py:class:`ECR.Client.exceptions.ImageDigestDoesNotMatchException`

  
  *   :py:class:`ECR.Client.exceptions.KmsException`

  