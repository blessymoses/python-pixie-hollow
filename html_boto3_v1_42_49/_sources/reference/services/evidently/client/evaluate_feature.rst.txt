:doc:`CloudWatchEvidently <../../evidently>` / Client / evaluate_feature

****************
evaluate_feature
****************



.. py:method:: CloudWatchEvidently.Client.evaluate_feature(**kwargs)

  

  This operation assigns a feature variation to one given user session. You pass in an ``entityID`` that represents the user. Evidently then checks the evaluation rules and assigns the variation.

   

  The first rules that are evaluated are the override rules. If the user's ``entityID`` matches an override rule, the user is served the variation specified by that rule.

   

  If there is a current launch with this feature that uses segment overrides, and if the user session's ``evaluationContext`` matches a segment rule defined in a segment override, the configuration in the segment overrides is used. For more information about segments, see `CreateSegment <https://docs.aws.amazon.com/cloudwatchevidently/latest/APIReference/API_CreateSegment.html>`__ and `Use segments to focus your audience <https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Evidently-segments.html>`__.

   

  If there is a launch with no segment overrides, the user might be assigned to a variation in the launch. The chance of this depends on the percentage of users that are allocated to that launch. If the user is enrolled in the launch, the variation they are served depends on the allocation of the various feature variations used for the launch.

   

  If the user is not assigned to a launch, and there is an ongoing experiment for this feature, the user might be assigned to a variation in the experiment. The chance of this depends on the percentage of users that are allocated to that experiment.

   

  If the experiment uses a segment, then only user sessions with ``evaluationContext`` values that match the segment rule are used in the experiment.

   

  If the user is enrolled in the experiment, the variation they are served depends on the allocation of the various feature variations used for the experiment.

   

  If the user is not assigned to a launch or experiment, they are served the default variation.

  

  .. danger::

        This operation is deprecated and may not function as expected. This operation should not be used going forward and is only kept for the purpose of backwards compatiblity.


  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/evidently-2021-02-01/EvaluateFeature>`_  


  **Request Syntax**
  ::

    response = client.evaluate_feature(
        entityId='string',
        evaluationContext='string',
        feature='string',
        project='string'
    )
    
  :type entityId: string
  :param entityId: **[REQUIRED]** 

    An internal ID that represents a unique user of the application. This ``entityID`` is checked against any override rules assigned for this feature.

    

  
  :type evaluationContext: string
  :param evaluationContext: 

    A JSON object of attributes that you can optionally pass in as part of the evaluation event sent to Evidently from the user session. Evidently can use this value to match user sessions with defined audience segments. For more information, see `Use segments to focus your audience <https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Evidently-segments.html>`__.

     

    If you include this parameter, the value must be a JSON object. A JSON array is not supported.

    

  
  :type feature: string
  :param feature: **[REQUIRED]** 

    The name of the feature being evaluated.

    

  
  :type project: string
  :param project: **[REQUIRED]** 

    The name or ARN of the project that contains this feature.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'details': 'string',
          'reason': 'string',
          'value': {
              'boolValue': True|False,
              'doubleValue': 123.0,
              'longValue': 123,
              'stringValue': 'string'
          },
          'variation': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **details** *(string) --* 

        If this user was assigned to a launch or experiment, this field lists the launch or experiment name.

        
      

      - **reason** *(string) --* 

        Specifies the reason that the user session was assigned this variation. Possible values include ``DEFAULT``, meaning the user was served the default variation; ``LAUNCH_RULE_MATCH``, if the user session was enrolled in a launch; ``EXPERIMENT_RULE_MATCH``, if the user session was enrolled in an experiment; or ``ENTITY_OVERRIDES_MATCH``, if the user's ``entityId`` matches an override rule.

        
      

      - **value** *(dict) --* 

        The value assigned to this variation to differentiate it from the other variations of this feature.

        .. note::    This is a Tagged Union structure. Only one of the     following top level keys will be set: ``boolValue``, ``doubleValue``, ``longValue``, ``stringValue``.     If a client receives an unknown member it will     set ``SDK_UNKNOWN_MEMBER`` as the top level key,     which maps to the name or tag of the unknown     member. The structure of ``SDK_UNKNOWN_MEMBER`` is     as follows::

                'SDK_UNKNOWN_MEMBER': {'name': 'UnknownMemberName'}


      
        

        - **boolValue** *(boolean) --* 

          If this feature uses the Boolean variation type, this field contains the Boolean value of this variation.

          
        

        - **doubleValue** *(float) --* 

          If this feature uses the double integer variation type, this field contains the double integer value of this variation.

          
        

        - **longValue** *(integer) --* 

          If this feature uses the long variation type, this field contains the long value of this variation.

          
        

        - **stringValue** *(string) --* 

          If this feature uses the string variation type, this field contains the string value of this variation.

          
    
      

      - **variation** *(string) --* 

        The name of the variation that was served to the user session.

        
  
  **Exceptions**
  
  *   :py:class:`CloudWatchEvidently.Client.exceptions.ThrottlingException`

  
  *   :py:class:`CloudWatchEvidently.Client.exceptions.ValidationException`

  
  *   :py:class:`CloudWatchEvidently.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`CloudWatchEvidently.Client.exceptions.AccessDeniedException`

  