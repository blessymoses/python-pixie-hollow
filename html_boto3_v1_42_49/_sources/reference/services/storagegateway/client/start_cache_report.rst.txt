:doc:`StorageGateway <../../storagegateway>` / Client / start_cache_report

******************
start_cache_report
******************



.. py:method:: StorageGateway.Client.start_cache_report(**kwargs)

  

  Starts generating a report of the file metadata currently cached by an S3 File Gateway for a specific file share. You can use this report to identify and resolve issues if you have files failing upload from your gateway to Amazon S3. The report is a CSV file containing a list of files which match the set of filter parameters you specify in the request.

   

  .. note::

    

    The **Files Failing Upload** flag is reset every 24 hours and during gateway reboot. If this report captures the files after the reset, but before they become flagged again, they will not be reported as **Files Failing Upload**.

    

   

  The following requirements must be met to successfully generate a cache report:

   

  
  * You must have ``s3:PutObject`` and ``s3:AbortMultipartUpload`` permissions for the Amazon S3 bucket where you want to store the cache report.
   
  * No other cache reports can currently be in-progress for the specified file share.
   
  * There must be fewer than 10 existing cache reports for the specified file share.
   
  * The gateway must be online and connected to Amazon Web Services.
   
  * The root disk must have at least 20GB of free space when report generation starts.
   
  * You must specify at least one value for ``InclusionFilters`` or ``ExclusionFilters`` in the request.
  

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/storagegateway-2013-06-30/StartCacheReport>`_  


  **Request Syntax**
  ::

    response = client.start_cache_report(
        FileShareARN='string',
        Role='string',
        LocationARN='string',
        BucketRegion='string',
        VPCEndpointDNSName='string',
        InclusionFilters=[
            {
                'Name': 'UploadState'|'UploadFailureReason',
                'Values': [
                    'string',
                ]
            },
        ],
        ExclusionFilters=[
            {
                'Name': 'UploadState'|'UploadFailureReason',
                'Values': [
                    'string',
                ]
            },
        ],
        ClientToken='string',
        Tags=[
            {
                'Key': 'string',
                'Value': 'string'
            },
        ]
    )
    
  :type FileShareARN: string
  :param FileShareARN: **[REQUIRED]** 

    The Amazon Resource Name (ARN) of the file share.

    

  
  :type Role: string
  :param Role: **[REQUIRED]** 

    The ARN of the IAM role used when saving the cache report to Amazon S3.

    

  
  :type LocationARN: string
  :param LocationARN: **[REQUIRED]** 

    The ARN of the Amazon S3 bucket where you want to save the cache report.

     

    .. note::

      

      We do not recommend saving the cache report to the same Amazon S3 bucket for which you are generating the report.

       

      This field does not accept access point ARNs.

      

    

  
  :type BucketRegion: string
  :param BucketRegion: **[REQUIRED]** 

    The Amazon Web Services Region of the Amazon S3 bucket where you want to save the cache report.

    

  
  :type VPCEndpointDNSName: string
  :param VPCEndpointDNSName: 

    The DNS name of the VPC endpoint associated with the Amazon S3 where you want to save the cache report. Optional.

    

  
  :type InclusionFilters: list
  :param InclusionFilters: 

    The list of filters and parameters that determine which files are included in the report. You must specify at least one value for ``InclusionFilters`` or ``ExclusionFilters`` in a ``StartCacheReport`` request.

    

  
    - *(dict) --* 

      A list of filter parameters and associated values that determine which files are included or excluded from a cache report created by a ``StartCacheReport`` request. Multiple instances of the same filter parameter are combined with an OR operation, while different parameters are combined with an AND operation.

      

    
      - **Name** *(string) --* **[REQUIRED]** 

        The parameter name for a filter that determines which files are included or excluded from a cache report.

         

        **Valid Names:**

         

        UploadFailureReason | UploadState

        

      
      - **Values** *(list) --* **[REQUIRED]** 

        The parameter value for a filter that determines which files are included or excluded from a cache report.

         

        Valid ``UploadFailureReason`` Values:

         

        ``InaccessibleStorageClass`` | ``InvalidObjectState`` | ``ObjectMissing`` | ``S3AccessDenied``

         

        Valid ``UploadState`` Values:

         

        ``FailingUpload``

        

      
        - *(string) --* 

        
    
    

  :type ExclusionFilters: list
  :param ExclusionFilters: 

    The list of filters and parameters that determine which files are excluded from the report. You must specify at least one value for ``InclusionFilters`` or ``ExclusionFilters`` in a ``StartCacheReport`` request.

    

  
    - *(dict) --* 

      A list of filter parameters and associated values that determine which files are included or excluded from a cache report created by a ``StartCacheReport`` request. Multiple instances of the same filter parameter are combined with an OR operation, while different parameters are combined with an AND operation.

      

    
      - **Name** *(string) --* **[REQUIRED]** 

        The parameter name for a filter that determines which files are included or excluded from a cache report.

         

        **Valid Names:**

         

        UploadFailureReason | UploadState

        

      
      - **Values** *(list) --* **[REQUIRED]** 

        The parameter value for a filter that determines which files are included or excluded from a cache report.

         

        Valid ``UploadFailureReason`` Values:

         

        ``InaccessibleStorageClass`` | ``InvalidObjectState`` | ``ObjectMissing`` | ``S3AccessDenied``

         

        Valid ``UploadState`` Values:

         

        ``FailingUpload``

        

      
        - *(string) --* 

        
    
    

  :type ClientToken: string
  :param ClientToken: **[REQUIRED]** 

    A unique identifier that you use to ensure idempotent report generation if you need to retry an unsuccessful ``StartCacheReport`` request. If you retry a request, use the same ``ClientToken`` you specified in the initial request.

    

  
  :type Tags: list
  :param Tags: 

    A list of up to 50 key/value tags that you can assign to the cache report. Using tags can help you categorize your reports and more easily locate them in search results.

    

  
    - *(dict) --* 

      A key-value pair that helps you manage, filter, and search for your resource. Allowed characters: letters, white space, and numbers, representable in UTF-8, and the following characters: + - = . _ : /.

      

    
      - **Key** *(string) --* **[REQUIRED]** 

        Tag key. The key can't start with aws:.

        

      
      - **Value** *(string) --* **[REQUIRED]** 

        Value of the tag key.

        

      
    

  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'CacheReportARN': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **CacheReportARN** *(string) --* 

        The Amazon Resource Name (ARN) of the cache report generated by the ``StartCacheReport`` request.

        
  
  **Exceptions**
  
  *   :py:class:`StorageGateway.Client.exceptions.InvalidGatewayRequestException`

  
  *   :py:class:`StorageGateway.Client.exceptions.InternalServerError`

  