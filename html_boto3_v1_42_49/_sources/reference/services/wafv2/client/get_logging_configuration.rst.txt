:doc:`WAFV2 <../../wafv2>` / Client / get_logging_configuration

*************************
get_logging_configuration
*************************



.. py:method:: WAFV2.Client.get_logging_configuration(**kwargs)

  

  Returns the  LoggingConfiguration for the specified web ACL.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/wafv2-2019-07-29/GetLoggingConfiguration>`_  


  **Request Syntax**
  ::

    response = client.get_logging_configuration(
        ResourceArn='string',
        LogType='WAF_LOGS',
        LogScope='CUSTOMER'|'SECURITY_LAKE'|'CLOUDWATCH_TELEMETRY_RULE_MANAGED'
    )
    
  :type ResourceArn: string
  :param ResourceArn: **[REQUIRED]** 

    The Amazon Resource Name (ARN) of the web ACL for which you want to get the  LoggingConfiguration.

    

  
  :type LogType: string
  :param LogType: 

    Used to distinguish between various logging options. Currently, there is one option.

     

    Default: ``WAF_LOGS``

    

  
  :type LogScope: string
  :param LogScope: 

    The owner of the logging configuration, which must be set to ``CUSTOMER`` for the configurations that you manage.

     

    The log scope ``SECURITY_LAKE`` indicates a configuration that is managed through Amazon Security Lake. You can use Security Lake to collect log and event data from various sources for normalization, analysis, and management. For information, see `Collecting data from Amazon Web Services services <https://docs.aws.amazon.com/security-lake/latest/userguide/internal-sources.html>`__ in the *Amazon Security Lake user guide*.

     

    The log scope ``CLOUDWATCH_TELEMETRY_RULE_MANAGED`` indicates a configuration that is managed through Amazon CloudWatch Logs for telemetry data collection and analysis. For information, see `What is Amazon CloudWatch Logs ? <https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html>`__ in the *Amazon CloudWatch Logs user guide*.

     

    Default: ``CUSTOMER``

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'LoggingConfiguration': {
              'ResourceArn': 'string',
              'LogDestinationConfigs': [
                  'string',
              ],
              'RedactedFields': [
                  {
                      'SingleHeader': {
                          'Name': 'string'
                      },
                      'SingleQueryArgument': {
                          'Name': 'string'
                      },
                      'AllQueryArguments': {},
                      'UriPath': {},
                      'QueryString': {},
                      'Body': {
                          'OversizeHandling': 'CONTINUE'|'MATCH'|'NO_MATCH'
                      },
                      'Method': {},
                      'JsonBody': {
                          'MatchPattern': {
                              'All': {},
                              'IncludedPaths': [
                                  'string',
                              ]
                          },
                          'MatchScope': 'ALL'|'KEY'|'VALUE',
                          'InvalidFallbackBehavior': 'MATCH'|'NO_MATCH'|'EVALUATE_AS_STRING',
                          'OversizeHandling': 'CONTINUE'|'MATCH'|'NO_MATCH'
                      },
                      'Headers': {
                          'MatchPattern': {
                              'All': {},
                              'IncludedHeaders': [
                                  'string',
                              ],
                              'ExcludedHeaders': [
                                  'string',
                              ]
                          },
                          'MatchScope': 'ALL'|'KEY'|'VALUE',
                          'OversizeHandling': 'CONTINUE'|'MATCH'|'NO_MATCH'
                      },
                      'Cookies': {
                          'MatchPattern': {
                              'All': {},
                              'IncludedCookies': [
                                  'string',
                              ],
                              'ExcludedCookies': [
                                  'string',
                              ]
                          },
                          'MatchScope': 'ALL'|'KEY'|'VALUE',
                          'OversizeHandling': 'CONTINUE'|'MATCH'|'NO_MATCH'
                      },
                      'HeaderOrder': {
                          'OversizeHandling': 'CONTINUE'|'MATCH'|'NO_MATCH'
                      },
                      'JA3Fingerprint': {
                          'FallbackBehavior': 'MATCH'|'NO_MATCH'
                      },
                      'JA4Fingerprint': {
                          'FallbackBehavior': 'MATCH'|'NO_MATCH'
                      },
                      'UriFragment': {
                          'FallbackBehavior': 'MATCH'|'NO_MATCH'
                      }
                  },
              ],
              'ManagedByFirewallManager': True|False,
              'LoggingFilter': {
                  'Filters': [
                      {
                          'Behavior': 'KEEP'|'DROP',
                          'Requirement': 'MEETS_ALL'|'MEETS_ANY',
                          'Conditions': [
                              {
                                  'ActionCondition': {
                                      'Action': 'ALLOW'|'BLOCK'|'COUNT'|'CAPTCHA'|'CHALLENGE'|'EXCLUDED_AS_COUNT'
                                  },
                                  'LabelNameCondition': {
                                      'LabelName': 'string'
                                  }
                              },
                          ]
                      },
                  ],
                  'DefaultBehavior': 'KEEP'|'DROP'
              },
              'LogType': 'WAF_LOGS',
              'LogScope': 'CUSTOMER'|'SECURITY_LAKE'|'CLOUDWATCH_TELEMETRY_RULE_MANAGED'
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **LoggingConfiguration** *(dict) --* 

        The  LoggingConfiguration for the specified web ACL.

        
        

        - **ResourceArn** *(string) --* 

          The Amazon Resource Name (ARN) of the web ACL that you want to associate with ``LogDestinationConfigs``.

          
        

        - **LogDestinationConfigs** *(list) --* 

          The logging destination configuration that you want to associate with the web ACL.

           

          .. note::

            

            You can associate one logging destination to a web ACL.

            

          
          

          - *(string) --* 
      
        

        - **RedactedFields** *(list) --* 

          The parts of the request that you want to keep out of the logs.

           

          For example, if you redact the ``SingleHeader`` field, the ``HEADER`` field in the logs will be ``REDACTED`` for all rules that use the ``SingleHeader`` ``FieldToMatch`` setting.

           

          If you configure data protection for the web ACL, the protection applies to the data that WAF sends to the logs.

           

          Redaction applies only to the component that's specified in the rule's ``FieldToMatch`` setting, so the ``SingleHeader`` redaction doesn't apply to rules that use the ``Headers`` ``FieldToMatch``.

           

          .. note::

            

            You can specify only the following fields for redaction: ``UriPath``, ``QueryString``, ``SingleHeader``, and ``Method``.

            

           

          .. note::

            

            This setting has no impact on request sampling. You can only exclude fields from request sampling by disabling sampling in the web ACL visibility configuration or by configuring data protection for the web ACL.

            

          
          

          - *(dict) --* 

            Specifies a web request component to be used in a rule match statement or in a logging configuration.

             

            
            * In a rule statement, this is the part of the web request that you want WAF to inspect. Include the single ``FieldToMatch`` type that you want to inspect, with additional specifications as needed, according to the type. You specify a single request component in ``FieldToMatch`` for each rule statement that requires it. To inspect more than one component of the web request, create a separate rule statement for each component. Example JSON for a ``QueryString`` field to match: ``"FieldToMatch": { "QueryString": {} }`` Example JSON for a ``Method`` field to match specification: ``"FieldToMatch": { "Method": { "Name": "DELETE" } }``
             
            * In a logging configuration, this is used in the ``RedactedFields`` property to specify a field to redact from the logging records. For this use case, note the following: 

              
              * Even though all ``FieldToMatch`` settings are available, the only valid settings for field redaction are ``UriPath``, ``QueryString``, ``SingleHeader``, and ``Method``.
               
              * In this documentation, the descriptions of the individual fields talk about specifying the web request component to inspect, but for field redaction, you are specifying the component type to redact from the logs.
               
              * If you have request sampling enabled, the redacted fields configuration for logging has no impact on sampling. You can only exclude fields from request sampling by disabling sampling in the web ACL visibility configuration or by configuring data protection for the web ACL.
              

            
            

            
            

            - **SingleHeader** *(dict) --* 

              Inspect a single header. Provide the name of the header to inspect, for example, ``User-Agent`` or ``Referer``. This setting isn't case sensitive.

               

              Example JSON: ``"SingleHeader": { "Name": "haystack" }``

               

              Alternately, you can filter and inspect all headers with the ``Headers`` ``FieldToMatch`` setting.

              
              

              - **Name** *(string) --* 

                The name of the query header to inspect.

                
          
            

            - **SingleQueryArgument** *(dict) --* 

              Inspect a single query argument. Provide the name of the query argument to inspect, such as *UserName* or *SalesRegion*. The name can be up to 30 characters long and isn't case sensitive.

               

              Example JSON: ``"SingleQueryArgument": { "Name": "myArgument" }``

              
              

              - **Name** *(string) --* 

                The name of the query argument to inspect.

                
          
            

            - **AllQueryArguments** *(dict) --* 

              Inspect all query arguments.

              
          
            

            - **UriPath** *(dict) --* 

              Inspect the request URI path. This is the part of the web request that identifies a resource, for example, ``/images/daily-ad.jpg``.

              
          
            

            - **QueryString** *(dict) --* 

              Inspect the query string. This is the part of a URL that appears after a ``?`` character, if any.

              
          
            

            - **Body** *(dict) --* 

              Inspect the request body as plain text. The request body immediately follows the request headers. This is the part of a request that contains any additional data that you want to send to your web server as the HTTP request body, such as data from a form.

               

              WAF does not support inspecting the entire contents of the web request body if the body exceeds the limit for the resource type. When a web request body is larger than the limit, the underlying host service only forwards the contents that are within the limit to WAF for inspection.

               

              
              * For Application Load Balancer and AppSync, the limit is fixed at 8 KB (8,192 bytes).
               
              * For CloudFront, API Gateway, Amazon Cognito, App Runner, and Verified Access, the default limit is 16 KB (16,384 bytes), and you can increase the limit for each resource type in the web ACL ``AssociationConfig``, for additional processing fees.
               
              * For Amplify, use the CloudFront limit.
              

               

              For information about how to handle oversized request bodies, see the ``Body`` object configuration.

              
              

              - **OversizeHandling** *(string) --* 

                What WAF should do if the body is larger than WAF can inspect.

                 

                WAF does not support inspecting the entire contents of the web request body if the body exceeds the limit for the resource type. When a web request body is larger than the limit, the underlying host service only forwards the contents that are within the limit to WAF for inspection.

                 

                
                * For Application Load Balancer and AppSync, the limit is fixed at 8 KB (8,192 bytes).
                 
                * For CloudFront, API Gateway, Amazon Cognito, App Runner, and Verified Access, the default limit is 16 KB (16,384 bytes), and you can increase the limit for each resource type in the web ACL ``AssociationConfig``, for additional processing fees.
                 
                * For Amplify, use the CloudFront limit.
                

                 

                The options for oversize handling are the following:

                 

                
                * ``CONTINUE`` - Inspect the available body contents normally, according to the rule inspection criteria.
                 
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                 

                You can combine the ``MATCH`` or ``NO_MATCH`` settings for oversize handling with your rule and web ACL action settings, so that you block any request whose body is over the limit.

                 

                Default: ``CONTINUE``

                
          
            

            - **Method** *(dict) --* 

              Inspect the HTTP method. The method indicates the type of operation that the request is asking the origin to perform.

              
          
            

            - **JsonBody** *(dict) --* 

              Inspect the request body as JSON. The request body immediately follows the request headers. This is the part of a request that contains any additional data that you want to send to your web server as the HTTP request body, such as data from a form.

               

              WAF does not support inspecting the entire contents of the web request body if the body exceeds the limit for the resource type. When a web request body is larger than the limit, the underlying host service only forwards the contents that are within the limit to WAF for inspection.

               

              
              * For Application Load Balancer and AppSync, the limit is fixed at 8 KB (8,192 bytes).
               
              * For CloudFront, API Gateway, Amazon Cognito, App Runner, and Verified Access, the default limit is 16 KB (16,384 bytes), and you can increase the limit for each resource type in the web ACL ``AssociationConfig``, for additional processing fees.
               
              * For Amplify, use the CloudFront limit.
              

               

              For information about how to handle oversized request bodies, see the ``JsonBody`` object configuration.

              
              

              - **MatchPattern** *(dict) --* 

                The patterns to look for in the JSON body. WAF inspects the results of these pattern matches against the rule inspection criteria.

                
                

                - **All** *(dict) --* 

                  Match all of the elements. See also ``MatchScope`` in  JsonBody.

                   

                  You must specify either this setting or the ``IncludedPaths`` setting, but not both.

                  
              
                

                - **IncludedPaths** *(list) --* 

                  Match only the specified include paths. See also ``MatchScope`` in  JsonBody.

                   

                  Provide the include paths using JSON Pointer syntax. For example, ``"IncludedPaths": ["/dogs/0/name", "/dogs/1/name"]``. For information about this syntax, see the Internet Engineering Task Force (IETF) documentation `JavaScript Object Notation (JSON) Pointer <https://tools.ietf.org/html/rfc6901>`__.

                   

                  You must specify either this setting or the ``All`` setting, but not both.

                   

                  .. note::

                    

                    Don't use this option to include all paths. Instead, use the ``All`` setting.

                    

                  
                  

                  - *(string) --* 
              
            
              

              - **MatchScope** *(string) --* 

                The parts of the JSON to match against using the ``MatchPattern``. If you specify ``ALL``, WAF matches against keys and values.

                 

                ``All`` does not require a match to be found in the keys and a match to be found in the values. It requires a match to be found in the keys or the values or both. To require a match in the keys and in the values, use a logical ``AND`` statement to combine two match rules, one that inspects the keys and another that inspects the values.

                
              

              - **InvalidFallbackBehavior** *(string) --* 

                What WAF should do if it fails to completely parse the JSON body. The options are the following:

                 

                
                * ``EVALUATE_AS_STRING`` - Inspect the body as plain text. WAF applies the text transformations and inspection criteria that you defined for the JSON inspection to the body text string.
                 
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                 

                If you don't provide this setting, WAF parses and evaluates the content only up to the first parsing failure that it encounters.

                 

                .. note::

                  

                  WAF parsing doesn't fully validate the input JSON string, so parsing can succeed even for invalid JSON. When parsing succeeds, WAF doesn't apply the fallback behavior. For more information, see `JSON body <https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-statement-fields-list.html#waf-rule-statement-request-component-json-body>`__ in the *WAF Developer Guide*.

                  

                
              

              - **OversizeHandling** *(string) --* 

                What WAF should do if the body is larger than WAF can inspect.

                 

                WAF does not support inspecting the entire contents of the web request body if the body exceeds the limit for the resource type. When a web request body is larger than the limit, the underlying host service only forwards the contents that are within the limit to WAF for inspection.

                 

                
                * For Application Load Balancer and AppSync, the limit is fixed at 8 KB (8,192 bytes).
                 
                * For CloudFront, API Gateway, Amazon Cognito, App Runner, and Verified Access, the default limit is 16 KB (16,384 bytes), and you can increase the limit for each resource type in the web ACL ``AssociationConfig``, for additional processing fees.
                 
                * For Amplify, use the CloudFront limit.
                

                 

                The options for oversize handling are the following:

                 

                
                * ``CONTINUE`` - Inspect the available body contents normally, according to the rule inspection criteria.
                 
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                 

                You can combine the ``MATCH`` or ``NO_MATCH`` settings for oversize handling with your rule and web ACL action settings, so that you block any request whose body is over the limit.

                 

                Default: ``CONTINUE``

                
          
            

            - **Headers** *(dict) --* 

              Inspect the request headers. You must configure scope and pattern matching filters in the ``Headers`` object, to define the set of headers to and the parts of the headers that WAF inspects.

               

              Only the first 8 KB (8192 bytes) of a request's headers and only the first 200 headers are forwarded to WAF for inspection by the underlying host service. You must configure how to handle any oversize header content in the ``Headers`` object. WAF applies the pattern matching filters to the headers that it receives from the underlying host service.

              
              

              - **MatchPattern** *(dict) --* 

                The filter to use to identify the subset of headers to inspect in a web request.

                 

                You must specify exactly one setting: either ``All``, ``IncludedHeaders``, or ``ExcludedHeaders``.

                 

                Example JSON: ``"MatchPattern": { "ExcludedHeaders": [ "KeyToExclude1", "KeyToExclude2" ] }``

                
                

                - **All** *(dict) --* 

                  Inspect all headers.

                  
              
                

                - **IncludedHeaders** *(list) --* 

                  Inspect only the headers that have a key that matches one of the strings specified here.

                  
                  

                  - *(string) --* 
              
                

                - **ExcludedHeaders** *(list) --* 

                  Inspect only the headers whose keys don't match any of the strings specified here.

                  
                  

                  - *(string) --* 
              
            
              

              - **MatchScope** *(string) --* 

                The parts of the headers to match with the rule inspection criteria. If you specify ``ALL``, WAF inspects both keys and values.

                 

                ``All`` does not require a match to be found in the keys and a match to be found in the values. It requires a match to be found in the keys or the values or both. To require a match in the keys and in the values, use a logical ``AND`` statement to combine two match rules, one that inspects the keys and another that inspects the values.

                
              

              - **OversizeHandling** *(string) --* 

                What WAF should do if the headers determined by your match scope are more numerous or larger than WAF can inspect. WAF does not support inspecting the entire contents of request headers when they exceed 8 KB (8192 bytes) or 200 total headers. The underlying host service forwards a maximum of 200 headers and at most 8 KB of header contents to WAF.

                 

                The options for oversize handling are the following:

                 

                
                * ``CONTINUE`` - Inspect the available headers normally, according to the rule inspection criteria.
                 
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                
          
            

            - **Cookies** *(dict) --* 

              Inspect the request cookies. You must configure scope and pattern matching filters in the ``Cookies`` object, to define the set of cookies and the parts of the cookies that WAF inspects.

               

              Only the first 8 KB (8192 bytes) of a request's cookies and only the first 200 cookies are forwarded to WAF for inspection by the underlying host service. You must configure how to handle any oversize cookie content in the ``Cookies`` object. WAF applies the pattern matching filters to the cookies that it receives from the underlying host service.

              
              

              - **MatchPattern** *(dict) --* 

                The filter to use to identify the subset of cookies to inspect in a web request.

                 

                You must specify exactly one setting: either ``All``, ``IncludedCookies``, or ``ExcludedCookies``.

                 

                Example JSON: ``"MatchPattern": { "IncludedCookies": [ "session-id-time", "session-id" ] }``

                
                

                - **All** *(dict) --* 

                  Inspect all cookies.

                  
              
                

                - **IncludedCookies** *(list) --* 

                  Inspect only the cookies that have a key that matches one of the strings specified here.

                  
                  

                  - *(string) --* 
              
                

                - **ExcludedCookies** *(list) --* 

                  Inspect only the cookies whose keys don't match any of the strings specified here.

                  
                  

                  - *(string) --* 
              
            
              

              - **MatchScope** *(string) --* 

                The parts of the cookies to inspect with the rule inspection criteria. If you specify ``ALL``, WAF inspects both keys and values.

                 

                ``All`` does not require a match to be found in the keys and a match to be found in the values. It requires a match to be found in the keys or the values or both. To require a match in the keys and in the values, use a logical ``AND`` statement to combine two match rules, one that inspects the keys and another that inspects the values.

                
              

              - **OversizeHandling** *(string) --* 

                What WAF should do if the cookies of the request are more numerous or larger than WAF can inspect. WAF does not support inspecting the entire contents of request cookies when they exceed 8 KB (8192 bytes) or 200 total cookies. The underlying host service forwards a maximum of 200 cookies and at most 8 KB of cookie contents to WAF.

                 

                The options for oversize handling are the following:

                 

                
                * ``CONTINUE`` - Inspect the available cookies normally, according to the rule inspection criteria.
                 
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                
          
            

            - **HeaderOrder** *(dict) --* 

              Inspect a string containing the list of the request's header names, ordered as they appear in the web request that WAF receives for inspection. WAF generates the string and then uses that as the field to match component in its inspection. WAF separates the header names in the string using colons and no added spaces, for example ``host:user-agent:accept:authorization:referer``.

              
              

              - **OversizeHandling** *(string) --* 

                What WAF should do if the headers determined by your match scope are more numerous or larger than WAF can inspect. WAF does not support inspecting the entire contents of request headers when they exceed 8 KB (8192 bytes) or 200 total headers. The underlying host service forwards a maximum of 200 headers and at most 8 KB of header contents to WAF.

                 

                The options for oversize handling are the following:

                 

                
                * ``CONTINUE`` - Inspect the available headers normally, according to the rule inspection criteria.
                 
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                
          
            

            - **JA3Fingerprint** *(dict) --* 

              Available for use with Amazon CloudFront distributions and Application Load Balancers. Match against the request's JA3 fingerprint. The JA3 fingerprint is a 32-character hash derived from the TLS Client Hello of an incoming request. This fingerprint serves as a unique identifier for the client's TLS configuration. WAF calculates and logs this fingerprint for each request that has enough TLS Client Hello information for the calculation. Almost all web requests include this information.

               

              .. note::

                

                You can use this choice only with a string match ``ByteMatchStatement`` with the ``PositionalConstraint`` set to ``EXACTLY``.

                

               

              You can obtain the JA3 fingerprint for client requests from the web ACL logs. If WAF is able to calculate the fingerprint, it includes it in the logs. For information about the logging fields, see `Log fields <https://docs.aws.amazon.com/waf/latest/developerguide/logging-fields.html>`__ in the *WAF Developer Guide*.

               

              Provide the JA3 fingerprint string from the logs in your string match statement specification, to match with any future requests that have the same TLS configuration.

              
              

              - **FallbackBehavior** *(string) --* 

                The match status to assign to the web request if the request doesn't have a JA3 fingerprint.

                 

                You can specify the following fallback behaviors:

                 

                
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                
          
            

            - **JA4Fingerprint** *(dict) --* 

              Available for use with Amazon CloudFront distributions and Application Load Balancers. Match against the request's JA4 fingerprint. The JA4 fingerprint is a 36-character hash derived from the TLS Client Hello of an incoming request. This fingerprint serves as a unique identifier for the client's TLS configuration. WAF calculates and logs this fingerprint for each request that has enough TLS Client Hello information for the calculation. Almost all web requests include this information.

               

              .. note::

                

                You can use this choice only with a string match ``ByteMatchStatement`` with the ``PositionalConstraint`` set to ``EXACTLY``.

                

               

              You can obtain the JA4 fingerprint for client requests from the web ACL logs. If WAF is able to calculate the fingerprint, it includes it in the logs. For information about the logging fields, see `Log fields <https://docs.aws.amazon.com/waf/latest/developerguide/logging-fields.html>`__ in the *WAF Developer Guide*.

               

              Provide the JA4 fingerprint string from the logs in your string match statement specification, to match with any future requests that have the same TLS configuration.

              
              

              - **FallbackBehavior** *(string) --* 

                The match status to assign to the web request if the request doesn't have a JA4 fingerprint.

                 

                You can specify the following fallback behaviors:

                 

                
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                
          
            

            - **UriFragment** *(dict) --* 

              Inspect fragments of the request URI. You must configure scope and pattern matching filters in the ``UriFragment`` object, to define the fragment of a URI that WAF inspects.

               

              Only the first 8 KB (8192 bytes) of a request's URI fragments and only the first 200 URI fragments are forwarded to WAF for inspection by the underlying host service. You must configure how to handle any oversize URI fragment content in the ``UriFragment`` object. WAF applies the pattern matching filters to the cookies that it receives from the underlying host service.

              
              

              - **FallbackBehavior** *(string) --* 

                What WAF should do if it fails to completely parse the JSON body. The options are the following:

                 

                
                * ``EVALUATE_AS_STRING`` - Inspect the body as plain text. WAF applies the text transformations and inspection criteria that you defined for the JSON inspection to the body text string.
                 
                * ``MATCH`` - Treat the web request as matching the rule statement. WAF applies the rule action to the request.
                 
                * ``NO_MATCH`` - Treat the web request as not matching the rule statement.
                

                 

                If you don't provide this setting, WAF parses and evaluates the content only up to the first parsing failure that it encounters.

                 

                Example JSON: ``{ "UriFragment": { "FallbackBehavior": "MATCH"} }``

                 

                .. note::

                  

                  WAF parsing doesn't fully validate the input JSON string, so parsing can succeed even for invalid JSON. When parsing succeeds, WAF doesn't apply the fallback behavior. For more information, see `JSON body <https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-statement-fields-list.html#waf-rule-statement-request-component-json-body>`__ in the *WAF Developer Guide*.

                  

                
          
        
      
        

        - **ManagedByFirewallManager** *(boolean) --* 

          Indicates whether the logging configuration was created by Firewall Manager, as part of an WAF policy configuration. If true, only Firewall Manager can modify or delete the configuration.

           

          The logging configuration can be created by Firewall Manager for use with any web ACL that Firewall Manager is using for an WAF policy. Web ACLs that Firewall Manager creates and uses have their ``ManagedByFirewallManager`` property set to true. Web ACLs that were created by a customer account and then retrofitted by Firewall Manager for use by a policy have their ``RetrofittedByFirewallManager`` property set to true. For either case, any corresponding logging configuration will indicate ``ManagedByFirewallManager``.

          
        

        - **LoggingFilter** *(dict) --* 

          Filtering that specifies which web requests are kept in the logs and which are dropped. You can filter on the rule action and on the web request labels that were applied by matching rules during web ACL evaluation.

          
          

          - **Filters** *(list) --* 

            The filters that you want to apply to the logs.

            
            

            - *(dict) --* 

              A single logging filter, used in  LoggingFilter.

              
              

              - **Behavior** *(string) --* 

                How to handle logs that satisfy the filter's conditions and requirement.

                
              

              - **Requirement** *(string) --* 

                Logic to apply to the filtering conditions. You can specify that, in order to satisfy the filter, a log must match all conditions or must match at least one condition.

                
              

              - **Conditions** *(list) --* 

                Match conditions for the filter.

                
                

                - *(dict) --* 

                  A single match condition for a  Filter.

                  
                  

                  - **ActionCondition** *(dict) --* 

                    A single action condition. This is the action setting that a log record must contain in order to meet the condition.

                    
                    

                    - **Action** *(string) --* 

                      The action setting that a log record must contain in order to meet the condition. This is the action that WAF applied to the web request.

                       

                      For rule groups, this is either the configured rule action setting, or if you've applied a rule action override to the rule, it's the override action. The value ``EXCLUDED_AS_COUNT`` matches on excluded rules and also on rules that have a rule action override of Count.

                      
                
                  

                  - **LabelNameCondition** *(dict) --* 

                    A single label name condition. This is the fully qualified label name that a log record must contain in order to meet the condition. Fully qualified labels have a prefix, optional namespaces, and label name. The prefix identifies the rule group or web ACL context of the rule that added the label.

                    
                    

                    - **LabelName** *(string) --* 

                      The label name that a log record must contain in order to meet the condition. This must be a fully qualified label name. Fully qualified labels have a prefix, optional namespaces, and label name. The prefix identifies the rule group or web ACL context of the rule that added the label.

                      
                
              
            
          
        
          

          - **DefaultBehavior** *(string) --* 

            Default handling for logs that don't match any of the specified filtering conditions.

            
      
        

        - **LogType** *(string) --* 

          Used to distinguish between various logging options. Currently, there is one option.

           

          Default: ``WAF_LOGS``

          
        

        - **LogScope** *(string) --* 

          The owner of the logging configuration, which must be set to ``CUSTOMER`` for the configurations that you manage.

           

          The log scope ``SECURITY_LAKE`` indicates a configuration that is managed through Amazon Security Lake. You can use Security Lake to collect log and event data from various sources for normalization, analysis, and management. For information, see `Collecting data from Amazon Web Services services <https://docs.aws.amazon.com/security-lake/latest/userguide/internal-sources.html>`__ in the *Amazon Security Lake user guide*.

           

          The log scope ``CLOUDWATCH_TELEMETRY_RULE_MANAGED`` indicates a configuration that is managed through Amazon CloudWatch Logs for telemetry data collection and analysis. For information, see `What is Amazon CloudWatch Logs ? <https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html>`__ in the *Amazon CloudWatch Logs user guide*.

           

          Default: ``CUSTOMER``

          
    
  
  **Exceptions**
  
  *   :py:class:`WAFV2.Client.exceptions.WAFInternalErrorException`

  
  *   :py:class:`WAFV2.Client.exceptions.WAFNonexistentItemException`

  
  *   :py:class:`WAFV2.Client.exceptions.WAFInvalidParameterException`

  
  *   :py:class:`WAFV2.Client.exceptions.WAFInvalidOperationException`

  