:doc:`CloudTrail <../../cloudtrail>` / Client / describe_query

**************
describe_query
**************



.. py:method:: CloudTrail.Client.describe_query(**kwargs)

  

  Returns metadata about a query, including query run time in milliseconds, number of events scanned and matched, and query status. If the query results were delivered to an S3 bucket, the response also provides the S3 URI and the delivery status.

   

  You must specify either ``QueryId`` or ``QueryAlias``. Specifying the ``QueryAlias`` parameter returns information about the last query run for the alias. You can provide ``RefreshId`` along with ``QueryAlias`` to view the query results of a dashboard query for the specified ``RefreshId``.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/cloudtrail-2013-11-01/DescribeQuery>`_  


  **Request Syntax**
  ::

    response = client.describe_query(
        EventDataStore='string',
        QueryId='string',
        QueryAlias='string',
        RefreshId='string',
        EventDataStoreOwnerAccountId='string'
    )
    
  :type EventDataStore: string
  :param EventDataStore: 

    The ARN (or the ID suffix of the ARN) of an event data store on which the specified query was run.

    

  
  :type QueryId: string
  :param QueryId: 

    The query ID.

    

  
  :type QueryAlias: string
  :param QueryAlias: 

    The alias that identifies a query template.

    

  
  :type RefreshId: string
  :param RefreshId: 

    The ID of the dashboard refresh.

    

  
  :type EventDataStoreOwnerAccountId: string
  :param EventDataStoreOwnerAccountId: 

    The account ID of the event data store owner.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'QueryId': 'string',
          'QueryString': 'string',
          'QueryStatus': 'QUEUED'|'RUNNING'|'FINISHED'|'FAILED'|'CANCELLED'|'TIMED_OUT',
          'QueryStatistics': {
              'EventsMatched': 123,
              'EventsScanned': 123,
              'BytesScanned': 123,
              'ExecutionTimeInMillis': 123,
              'CreationTime': datetime(2015, 1, 1)
          },
          'ErrorMessage': 'string',
          'DeliveryS3Uri': 'string',
          'DeliveryStatus': 'SUCCESS'|'FAILED'|'FAILED_SIGNING_FILE'|'PENDING'|'RESOURCE_NOT_FOUND'|'ACCESS_DENIED'|'ACCESS_DENIED_SIGNING_FILE'|'CANCELLED'|'UNKNOWN',
          'Prompt': 'string',
          'EventDataStoreOwnerAccountId': 'string'
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **QueryId** *(string) --* 

        The ID of the query.

        
      

      - **QueryString** *(string) --* 

        The SQL code of a query.

        
      

      - **QueryStatus** *(string) --* 

        The status of a query. Values for ``QueryStatus`` include ``QUEUED``, ``RUNNING``, ``FINISHED``, ``FAILED``, ``TIMED_OUT``, or ``CANCELLED``

        
      

      - **QueryStatistics** *(dict) --* 

        Metadata about a query, including the number of events that were matched, the total number of events scanned, the query run time in milliseconds, and the query's creation time.

        
        

        - **EventsMatched** *(integer) --* 

          The number of events that matched a query.

          
        

        - **EventsScanned** *(integer) --* 

          The number of events that the query scanned in the event data store.

          
        

        - **BytesScanned** *(integer) --* 

          The total bytes that the query scanned in the event data store. This value matches the number of bytes for which your account is billed for the query, unless the query is still running.

          
        

        - **ExecutionTimeInMillis** *(integer) --* 

          The query's run time, in milliseconds.

          
        

        - **CreationTime** *(datetime) --* 

          The creation time of the query.

          
    
      

      - **ErrorMessage** *(string) --* 

        The error message returned if a query failed.

        
      

      - **DeliveryS3Uri** *(string) --* 

        The URI for the S3 bucket where CloudTrail delivered query results, if applicable.

        
      

      - **DeliveryStatus** *(string) --* 

        The delivery status.

        
      

      - **Prompt** *(string) --* 

        The prompt used for a generated query. For information about generated queries, see `Create CloudTrail Lake queries from natural language prompts <https://docs.aws.amazon.com/awscloudtrail/latest/userguide/lake-query-generator.html>`__ in the *CloudTrail* user guide.

        
      

      - **EventDataStoreOwnerAccountId** *(string) --* 

        The account ID of the event data store owner.

        
  
  **Exceptions**
  
  *   :py:class:`CloudTrail.Client.exceptions.EventDataStoreARNInvalidException`

  
  *   :py:class:`CloudTrail.Client.exceptions.EventDataStoreNotFoundException`

  
  *   :py:class:`CloudTrail.Client.exceptions.InactiveEventDataStoreException`

  
  *   :py:class:`CloudTrail.Client.exceptions.InvalidParameterException`

  
  *   :py:class:`CloudTrail.Client.exceptions.QueryIdNotFoundException`

  
  *   :py:class:`CloudTrail.Client.exceptions.OperationNotPermittedException`

  
  *   :py:class:`CloudTrail.Client.exceptions.UnsupportedOperationException`

  
  *   :py:class:`CloudTrail.Client.exceptions.NoManagementAccountSLRExistsException`

  