:doc:`VPCLattice <../../vpc-lattice>` / Client / create_service_network_vpc_association

**************************************
create_service_network_vpc_association
**************************************



.. py:method:: VPCLattice.Client.create_service_network_vpc_association(**kwargs)

  

  Associates a VPC with a service network. When you associate a VPC with the service network, it enables all the resources within that VPC to be clients and communicate with other services in the service network. For more information, see `Manage VPC associations <https://docs.aws.amazon.com/vpc-lattice/latest/ug/service-network-associations.html#service-network-vpc-associations>`__ in the *Amazon VPC Lattice User Guide*.

   

  You can't use this operation if there is a disassociation in progress. If the association fails, retry by deleting the association and recreating it.

   

  As a result of this operation, the association gets created in the service network account and the VPC owner account.

   

  If you add a security group to the service network and VPC association, the association must continue to always have at least one security group. You can add or edit security groups at any time. However, to remove all security groups, you must first delete the association and recreate it without security groups.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/vpc-lattice-2022-11-30/CreateServiceNetworkVpcAssociation>`_  


  **Request Syntax**
  ::

    response = client.create_service_network_vpc_association(
        clientToken='string',
        serviceNetworkIdentifier='string',
        vpcIdentifier='string',
        privateDnsEnabled=True|False,
        securityGroupIds=[
            'string',
        ],
        tags={
            'string': 'string'
        },
        dnsOptions={
            'privateDnsPreference': 'VERIFIED_DOMAINS_ONLY'|'ALL_DOMAINS'|'VERIFIED_DOMAINS_AND_SPECIFIED_DOMAINS'|'SPECIFIED_DOMAINS_ONLY',
            'privateDnsSpecifiedDomains': [
                'string',
            ]
        }
    )
    
  :type clientToken: string
  :param clientToken: 

    A unique, case-sensitive identifier that you provide to ensure the idempotency of the request. If you retry a request that completed successfully using the same client token and parameters, the retry succeeds without performing any actions. If the parameters aren't identical, the retry fails.

    This field is autopopulated if not provided.

  
  :type serviceNetworkIdentifier: string
  :param serviceNetworkIdentifier: **[REQUIRED]** 

    The ID or ARN of the service network. You must use an ARN if the resources are in different accounts.

    

  
  :type vpcIdentifier: string
  :param vpcIdentifier: **[REQUIRED]** 

    The ID of the VPC.

    

  
  :type privateDnsEnabled: boolean
  :param privateDnsEnabled: 

    Indicates if private DNS is enabled for the VPC association.

    

  
  :type securityGroupIds: list
  :param securityGroupIds: 

    The IDs of the security groups. Security groups aren't added by default. You can add a security group to apply network level controls to control which resources in a VPC are allowed to access the service network and its services. For more information, see `Control traffic to resources using security groups <https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html>`__ in the *Amazon VPC User Guide*.

    

  
    - *(string) --* 

    

  :type tags: dict
  :param tags: 

    The tags for the association.

    

  
    - *(string) --* 

      The key of the tag.

       

      Constraints: Tag keys are case-sensitive and accept a maximum of 128 Unicode characters. Valid characters are Unicode letters, digits, white space, and any of the following symbols: _ . : / = + - @ May not begin with ``aws:``.

      

    
      - *(string) --* 

        The value of the tag.

         

        Constraints: Tag values are case-sensitive and accept a maximum of 256 Unicode characters. Valid characters are Unicode letters, digits, white space, and any of the following symbols: _ . : / = + - @

        

      


  :type dnsOptions: dict
  :param dnsOptions: 

    DNS options for the service network VPC association.

    

  
    - **privateDnsPreference** *(string) --* 

      The preference for which private domains have a private hosted zone created for and associated with the specified VPC. Only supported when private DNS is enabled and when the VPC endpoint type is ServiceNetwork or Resource.

       

      
      * ``ALL_DOMAINS`` - VPC Lattice provisions private hosted zones for all custom domain names.
       
      * ``VERIFIED_DOMAINS_ONLY`` - VPC Lattice provisions a private hosted zone only if custom domain name has been verified by the provider.
       
      * ``VERIFIED_DOMAINS_AND_SPECIFIED_DOMAINS`` - VPC Lattice provisions private hosted zones for all verified custom domain names and other domain names that the resource consumer specifies. The resource consumer specifies the domain names in the privateDnsSpecifiedDomains parameter.
       
      * ``SPECIFIED_DOMAINS_ONLY`` - VPC Lattice provisions a private hosted zone for domain names specified by the resource consumer. The resource consumer specifies the domain names in the privateDnsSpecifiedDomains parameter.
      

      

    
    - **privateDnsSpecifiedDomains** *(list) --* 

      Indicates which of the private domains to create private hosted zones for and associate with the specified VPC. Only supported when private DNS is enabled and the private DNS preference is ``VERIFIED_DOMAINS_AND_SPECIFIED_DOMAINS`` or ``SPECIFIED_DOMAINS_ONLY``.

      

    
      - *(string) --* 

      
  
  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'id': 'string',
          'status': 'CREATE_IN_PROGRESS'|'ACTIVE'|'UPDATE_IN_PROGRESS'|'DELETE_IN_PROGRESS'|'CREATE_FAILED'|'DELETE_FAILED'|'UPDATE_FAILED',
          'arn': 'string',
          'createdBy': 'string',
          'securityGroupIds': [
              'string',
          ],
          'privateDnsEnabled': True|False,
          'dnsOptions': {
              'privateDnsPreference': 'VERIFIED_DOMAINS_ONLY'|'ALL_DOMAINS'|'VERIFIED_DOMAINS_AND_SPECIFIED_DOMAINS'|'SPECIFIED_DOMAINS_ONLY',
              'privateDnsSpecifiedDomains': [
                  'string',
              ]
          }
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **id** *(string) --* 

        The ID of the association.

        
      

      - **status** *(string) --* 

        The association status.

        
      

      - **arn** *(string) --* 

        The Amazon Resource Name (ARN) of the association.

        
      

      - **createdBy** *(string) --* 

        The account that created the association.

        
      

      - **securityGroupIds** *(list) --* 

        The IDs of the security groups.

        
        

        - *(string) --* 
    
      

      - **privateDnsEnabled** *(boolean) --* 

        Indicates if private DNS is enabled for the VPC association.

        
      

      - **dnsOptions** *(dict) --* 

        The DNS configuration options.

        
        

        - **privateDnsPreference** *(string) --* 

          The preference for which private domains have a private hosted zone created for and associated with the specified VPC. Only supported when private DNS is enabled and when the VPC endpoint type is ServiceNetwork or Resource.

           

          
          * ``ALL_DOMAINS`` - VPC Lattice provisions private hosted zones for all custom domain names.
           
          * ``VERIFIED_DOMAINS_ONLY`` - VPC Lattice provisions a private hosted zone only if custom domain name has been verified by the provider.
           
          * ``VERIFIED_DOMAINS_AND_SPECIFIED_DOMAINS`` - VPC Lattice provisions private hosted zones for all verified custom domain names and other domain names that the resource consumer specifies. The resource consumer specifies the domain names in the privateDnsSpecifiedDomains parameter.
           
          * ``SPECIFIED_DOMAINS_ONLY`` - VPC Lattice provisions a private hosted zone for domain names specified by the resource consumer. The resource consumer specifies the domain names in the privateDnsSpecifiedDomains parameter.
          

          
        

        - **privateDnsSpecifiedDomains** *(list) --* 

          Indicates which of the private domains to create private hosted zones for and associate with the specified VPC. Only supported when private DNS is enabled and the private DNS preference is ``VERIFIED_DOMAINS_AND_SPECIFIED_DOMAINS`` or ``SPECIFIED_DOMAINS_ONLY``.

          
          

          - *(string) --* 
      
    
  
  **Exceptions**
  
  *   :py:class:`VPCLattice.Client.exceptions.ValidationException`

  
  *   :py:class:`VPCLattice.Client.exceptions.AccessDeniedException`

  
  *   :py:class:`VPCLattice.Client.exceptions.ConflictException`

  
  *   :py:class:`VPCLattice.Client.exceptions.ResourceNotFoundException`

  
  *   :py:class:`VPCLattice.Client.exceptions.ThrottlingException`

  
  *   :py:class:`VPCLattice.Client.exceptions.ServiceQuotaExceededException`

  
  *   :py:class:`VPCLattice.Client.exceptions.InternalServerException`

  