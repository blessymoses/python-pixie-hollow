:doc:`EC2 <../../ec2>` / Client / detach_volume

*************
detach_volume
*************



.. py:method:: EC2.Client.detach_volume(**kwargs)

  

  Detaches an EBS volume from an instance. Make sure to unmount any file systems on the device within your operating system before detaching the volume. Failure to do so can result in the volume becoming stuck in the ``busy`` state while detaching. If this happens, detachment can be delayed indefinitely until you unmount the volume, force detachment, reboot the instance, or all three. If an EBS volume is the root device of an instance, it can't be detached while the instance is running. To detach the root volume, stop the instance first.

   

  When a volume with an Amazon Web Services Marketplace product code is detached from an instance, the product code is no longer associated with the instance.

   

  You can't detach or force detach volumes that are attached to Amazon Web Services-managed resources. Attempting to do this results in the ``UnsupportedOperationException`` exception.

   

  For more information, see `Detach an Amazon EBS volume <https://docs.aws.amazon.com/ebs/latest/userguide/ebs-detaching-volume.html>`__ in the *Amazon EBS User Guide*.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ec2-2016-11-15/DetachVolume>`_  


  **Request Syntax**
  ::

    response = client.detach_volume(
        Device='string',
        Force=True|False,
        InstanceId='string',
        VolumeId='string',
        DryRun=True|False
    )
    
  :type Device: string
  :param Device: 

    The device name.

    

  
  :type Force: boolean
  :param Force: 

    Forces detachment if the previous detachment attempt did not occur cleanly (for example, logging into an instance, unmounting the volume, and detaching normally). This option can lead to data loss or a corrupted file system. Use this option only as a last resort to detach a volume from a failed instance. The instance won't have an opportunity to flush file system caches or file system metadata. If you use this option, you must perform file system check and repair procedures.

    

  
  :type InstanceId: string
  :param InstanceId: 

    The ID of the instance. If you are detaching a Multi-Attach enabled volume, you must specify an instance ID.

    

  
  :type VolumeId: string
  :param VolumeId: **[REQUIRED]** 

    The ID of the volume.

    

  
  :type DryRun: boolean
  :param DryRun: 

    Checks whether you have the required permissions for the action, without actually making the request, and provides an error response. If you have the required permissions, the error response is ``DryRunOperation``. Otherwise, it is ``UnauthorizedOperation``.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'DeleteOnTermination': True|False,
          'AssociatedResource': 'string',
          'InstanceOwningService': 'string',
          'EbsCardIndex': 123,
          'VolumeId': 'string',
          'InstanceId': 'string',
          'Device': 'string',
          'State': 'attaching'|'attached'|'detaching'|'detached'|'busy',
          'AttachTime': datetime(2015, 1, 1)
      }
      
    **Response Structure**

    

    - *(dict) --* 

      Describes volume attachment details.

      
      

      - **DeleteOnTermination** *(boolean) --* 

        Indicates whether the EBS volume is deleted on instance termination.

        
      

      - **AssociatedResource** *(string) --* 

        The ARN of the Amazon Web Services-managed resource to which the volume is attached.

        
      

      - **InstanceOwningService** *(string) --* 

        The service principal of the Amazon Web Services service that owns the underlying resource to which the volume is attached.

         

        This parameter is returned only for volumes that are attached to Amazon Web Services-managed resources.

        
      

      - **EbsCardIndex** *(integer) --* 

        The index of the EBS card. Some instance types support multiple EBS cards. The default EBS card index is 0.

        
      

      - **VolumeId** *(string) --* 

        The ID of the volume.

        
      

      - **InstanceId** *(string) --* 

        The ID of the instance.

         

        If the volume is attached to an Amazon Web Services-managed resource, this parameter returns ``null``.

        
      

      - **Device** *(string) --* 

        The device name.

         

        If the volume is attached to an Amazon Web Services-managed resource, this parameter returns ``null``.

        
      

      - **State** *(string) --* 

        The attachment state of the volume.

        
      

      - **AttachTime** *(datetime) --* 

        The time stamp when the attachment initiated.

        
  

  **Examples**

  This example detaches the volume (``vol-049df61146c4d7901``) from the instance it is attached to.
  ::

    response = client.detach_volume(
        VolumeId='vol-1234567890abcdef0',
    )
    
    print(response)

  
  Expected Output:
  ::

    {
        'AttachTime': datetime(2014, 2, 27, 19, 23, 6, 3, 58, 0),
        'Device': '/dev/sdb',
        'InstanceId': 'i-1234567890abcdef0',
        'State': 'detaching',
        'VolumeId': 'vol-049df61146c4d7901',
        'ResponseMetadata': {
            '...': '...',
        },
    }

  