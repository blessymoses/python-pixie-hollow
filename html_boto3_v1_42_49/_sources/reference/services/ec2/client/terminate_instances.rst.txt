:doc:`EC2 <../../ec2>` / Client / terminate_instances

*******************
terminate_instances
*******************



.. py:method:: EC2.Client.terminate_instances(**kwargs)

  

  Terminates (deletes) the specified instances. This operation is `idempotent <https://docs.aws.amazon.com/ec2/latest/devguide/ec2-api-idempotency.html>`__; if you terminate an instance more than once, each call succeeds.

   

  .. warning::

     

    **Terminating an instance is permanent and irreversible.**

     

    After you terminate an instance, you can no longer connect to it, and it can't be recovered. All attached Amazon EBS volumes that are configured to be deleted on termination are also permanently deleted and can't be recovered. All data stored on instance store volumes is permanently lost. For more information, see `How instance termination works <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/how-ec2-instance-termination-works.html>`__.

     

    Before you terminate an instance, ensure that you have backed up all data that you need to retain after the termination to persistent storage.

     

   

  If you specify multiple instances and the request fails (for example, because of a single incorrect instance ID), none of the instances are terminated.

   

  If you terminate multiple instances across multiple Availability Zones, and one or more of the specified instances are enabled for termination protection, the request fails with the following results:

   

  
  * The specified instances that are in the same Availability Zone as the protected instance are not terminated.
   
  * The specified instances that are in different Availability Zones, where no other specified instances are protected, are successfully terminated.
  

   

  For example, say you have the following instances:

   

  
  * Instance A: ``us-east-1a``; Not protected
   
  * Instance B: ``us-east-1a``; Not protected
   
  * Instance C: ``us-east-1b``; Protected
   
  * Instance D: ``us-east-1b``; not protected
  

   

  If you attempt to terminate all of these instances in the same request, the request reports failure with the following results:

   

  
  * Instance A and Instance B are successfully terminated because none of the specified instances in ``us-east-1a`` are enabled for termination protection.
   
  * Instance C and Instance D fail to terminate because at least one of the specified instances in ``us-east-1b`` (Instance C) is enabled for termination protection.
  

   

  Terminated instances remain visible after termination (for approximately one hour).

   

  By default, Amazon EC2 deletes all EBS volumes that were attached when the instance launched. Volumes attached after instance launch continue running.

   

  By default, the TerminateInstances operation includes a graceful operating system (OS) shutdown. To bypass the graceful shutdown, use the ``skipOsShutdown`` parameter; however, this might risk data integrity.

   

  You can stop, start, and terminate EBS-backed instances. You can only terminate instance store-backed instances. What happens to an instance differs if you stop or terminate it. For example, when you stop an instance, the root device and any other devices attached to the instance persist. When you terminate an instance, any attached EBS volumes with the ``DeleteOnTermination`` block device mapping parameter set to ``true`` are automatically deleted. For more information about the differences between stopping and terminating instances, see `Amazon EC2 instance state changes <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-lifecycle.html>`__ in the *Amazon EC2 User Guide*.

   

  When you terminate an instance, we attempt to terminate it forcibly after a short while. If your instance appears stuck in the shutting-down state after a period of time, there might be an issue with the underlying host computer. For more information about terminating and troubleshooting terminating your instances, see `Terminate Amazon EC2 instances <https://docs.aws.amazon.com/>`__ and `Troubleshooting terminating your instance <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesShuttingDown.html>`__ in the *Amazon EC2 User Guide*.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ec2-2016-11-15/TerminateInstances>`_  


  **Request Syntax**
  ::

    response = client.terminate_instances(
        InstanceIds=[
            'string',
        ],
        Force=True|False,
        SkipOsShutdown=True|False,
        DryRun=True|False
    )
    
  :type InstanceIds: list
  :param InstanceIds: **[REQUIRED]** 

    The IDs of the instances.

     

    Constraints: Up to 1000 instance IDs. We recommend breaking up this request into smaller batches.

    

  
    - *(string) --* 

    

  :type Force: boolean
  :param Force: 

    Forces the instances to terminate. The instance will first attempt a graceful shutdown, which includes flushing file system caches and metadata. If the graceful shutdown fails to complete within the timeout period, the instance shuts down forcibly without flushing the file system caches and metadata.

    

  
  :type SkipOsShutdown: boolean
  :param SkipOsShutdown: 

    Specifies whether to bypass the graceful OS shutdown process when the instance is terminated.

     

    Default: ``false``

    

  
  :type DryRun: boolean
  :param DryRun: 

    Checks whether you have the required permissions for the operation, without actually making the request, and provides an error response. If you have the required permissions, the error response is ``DryRunOperation``. Otherwise, it is ``UnauthorizedOperation``.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'TerminatingInstances': [
              {
                  'InstanceId': 'string',
                  'CurrentState': {
                      'Code': 123,
                      'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                  },
                  'PreviousState': {
                      'Code': 123,
                      'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                  }
              },
          ]
      }
      
    **Response Structure**

    

    - *(dict) --* 
      

      - **TerminatingInstances** *(list) --* 

        Information about the terminated instances.

        
        

        - *(dict) --* 

          Describes an instance state change.

          
          

          - **InstanceId** *(string) --* 

            The ID of the instance.

            
          

          - **CurrentState** *(dict) --* 

            The current state of the instance.

            
            

            - **Code** *(integer) --* 

              The state of the instance as a 16-bit unsigned integer.

               

              The high byte is all of the bits between 2^8 and (2^16)-1, which equals decimal values between 256 and 65,535. These numerical values are used for internal purposes and should be ignored.

               

              The low byte is all of the bits between 2^0 and (2^8)-1, which equals decimal values between 0 and 255.

               

              The valid values for instance-state-code will all be in the range of the low byte and they are:

               

              
              * ``0`` : ``pending``
               
              * ``16`` : ``running``
               
              * ``32`` : ``shutting-down``
               
              * ``48`` : ``terminated``
               
              * ``64`` : ``stopping``
               
              * ``80`` : ``stopped``
              

               

              You can ignore the high byte value by zeroing out all of the bits above 2^8 or 256 in decimal.

              
            

            - **Name** *(string) --* 

              The current state of the instance.

              
        
          

          - **PreviousState** *(dict) --* 

            The previous state of the instance.

            
            

            - **Code** *(integer) --* 

              The state of the instance as a 16-bit unsigned integer.

               

              The high byte is all of the bits between 2^8 and (2^16)-1, which equals decimal values between 256 and 65,535. These numerical values are used for internal purposes and should be ignored.

               

              The low byte is all of the bits between 2^0 and (2^8)-1, which equals decimal values between 0 and 255.

               

              The valid values for instance-state-code will all be in the range of the low byte and they are:

               

              
              * ``0`` : ``pending``
               
              * ``16`` : ``running``
               
              * ``32`` : ``shutting-down``
               
              * ``48`` : ``terminated``
               
              * ``64`` : ``stopping``
               
              * ``80`` : ``stopped``
              

               

              You can ignore the high byte value by zeroing out all of the bits above 2^8 or 256 in decimal.

              
            

            - **Name** *(string) --* 

              The current state of the instance.

              
        
      
    
  

  **Examples**

  This example terminates the specified EC2 instance.
  ::

    response = client.terminate_instances(
        InstanceIds=[
            'i-1234567890abcdef0',
        ],
    )
    
    print(response)

  
  Expected Output:
  ::

    {
        'TerminatingInstances': [
            {
                'CurrentState': {
                    'Code': 32,
                    'Name': 'shutting-down',
                },
                'InstanceId': 'i-1234567890abcdef0',
                'PreviousState': {
                    'Code': 16,
                    'Name': 'running',
                },
            },
        ],
        'ResponseMetadata': {
            '...': '...',
        },
    }

  