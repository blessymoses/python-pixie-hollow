:doc:`EC2 <../../ec2>` / Client / attach_volume

*************
attach_volume
*************



.. py:method:: EC2.Client.attach_volume(**kwargs)

  

  Attaches an Amazon EBS volume to a ``running`` or ``stopped`` instance, and exposes it to the instance with the specified device name.

   

  .. note::

    

    The maximum number of Amazon EBS volumes that you can attach to an instance depends on the instance type. If you exceed the volume attachment limit for an instance type, the attachment request fails with the ``AttachmentLimitExceeded`` error. For more information, see `Instance volume limits <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/volume_limits.html>`__.

    

   

  After you attach an EBS volume, you must make it available for use. For more information, see `Make an EBS volume available for use <https://docs.aws.amazon.com/ebs/latest/userguide/ebs-using-volumes.html>`__.

   

  If a volume has an Amazon Web Services Marketplace product code:

   

  
  * The volume can be attached only to a stopped instance.
   
  * Amazon Web Services Marketplace product codes are copied from the volume to the instance.
   
  * You must be subscribed to the product.
   
  * The instance type and operating system of the instance must support the product. For example, you can't detach a volume from a Windows instance and attach it to a Linux instance.
  

   

  For more information, see `Attach an Amazon EBS volume to an instance <https://docs.aws.amazon.com/ebs/latest/userguide/ebs-attaching-volume.html>`__ in the *Amazon EBS User Guide*.

  

  See also: `AWS API Documentation <https://docs.aws.amazon.com/goto/WebAPI/ec2-2016-11-15/AttachVolume>`_  


  **Request Syntax**
  ::

    response = client.attach_volume(
        Device='string',
        InstanceId='string',
        VolumeId='string',
        EbsCardIndex=123,
        DryRun=True|False
    )
    
  :type Device: string
  :param Device: **[REQUIRED]** 

    The device name (for example, ``/dev/sdh`` or ``xvdh``).

    

  
  :type InstanceId: string
  :param InstanceId: **[REQUIRED]** 

    The ID of the instance.

    

  
  :type VolumeId: string
  :param VolumeId: **[REQUIRED]** 

    The ID of the EBS volume. The volume and instance must be within the same Availability Zone.

    

  
  :type EbsCardIndex: integer
  :param EbsCardIndex: 

    The index of the EBS card. Some instance types support multiple EBS cards. The default EBS card index is 0.

    

  
  :type DryRun: boolean
  :param DryRun: 

    Checks whether you have the required permissions for the action, without actually making the request, and provides an error response. If you have the required permissions, the error response is ``DryRunOperation``. Otherwise, it is ``UnauthorizedOperation``.

    

  
  
  :rtype: dict
  :returns: 
    
    **Response Syntax**

    
    ::

      {
          'DeleteOnTermination': True|False,
          'AssociatedResource': 'string',
          'InstanceOwningService': 'string',
          'EbsCardIndex': 123,
          'VolumeId': 'string',
          'InstanceId': 'string',
          'Device': 'string',
          'State': 'attaching'|'attached'|'detaching'|'detached'|'busy',
          'AttachTime': datetime(2015, 1, 1)
      }
      
    **Response Structure**

    

    - *(dict) --* 

      Describes volume attachment details.

      
      

      - **DeleteOnTermination** *(boolean) --* 

        Indicates whether the EBS volume is deleted on instance termination.

        
      

      - **AssociatedResource** *(string) --* 

        The ARN of the Amazon Web Services-managed resource to which the volume is attached.

        
      

      - **InstanceOwningService** *(string) --* 

        The service principal of the Amazon Web Services service that owns the underlying resource to which the volume is attached.

         

        This parameter is returned only for volumes that are attached to Amazon Web Services-managed resources.

        
      

      - **EbsCardIndex** *(integer) --* 

        The index of the EBS card. Some instance types support multiple EBS cards. The default EBS card index is 0.

        
      

      - **VolumeId** *(string) --* 

        The ID of the volume.

        
      

      - **InstanceId** *(string) --* 

        The ID of the instance.

         

        If the volume is attached to an Amazon Web Services-managed resource, this parameter returns ``null``.

        
      

      - **Device** *(string) --* 

        The device name.

         

        If the volume is attached to an Amazon Web Services-managed resource, this parameter returns ``null``.

        
      

      - **State** *(string) --* 

        The attachment state of the volume.

        
      

      - **AttachTime** *(datetime) --* 

        The time stamp when the attachment initiated.

        
  

  **Examples**

  This example attaches a volume (``vol-1234567890abcdef0``) to an instance (``i-01474ef662b89480``) as ``/dev/sdf``.
  ::

    response = client.attach_volume(
        Device='/dev/sdf',
        InstanceId='i-01474ef662b89480',
        VolumeId='vol-1234567890abcdef0',
    )
    
    print(response)

  
  Expected Output:
  ::

    {
        'AttachTime': datetime(2016, 8, 29, 18, 52, 32, 0, 242, 0),
        'Device': '/dev/sdf',
        'InstanceId': 'i-01474ef662b89480',
        'State': 'attaching',
        'VolumeId': 'vol-1234567890abcdef0',
        'ResponseMetadata': {
            '...': '...',
        },
    }

  